"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[917],{36986:function(Di,ti,pe){pe.d(ti,{Z:function(){return jt}});var E=pe(1413),ae=pe(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-12-12-28.3-18.7-45.3-18.7H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 176h256v112H384V176zm128 554c-79.5 0-144-64.5-144-144s64.5-144 144-144 144 64.5 144 144-64.5 144-144 144zm0-224c-44.2 0-80 35.8-80 80s35.8 80 80 80 80-35.8 80-80-35.8-80-80-80z"}}]},name:"save",theme:"filled"},z=xe,ce=pe(91146),Ke=function(nt,Xe){return ae.createElement(ce.Z,(0,E.Z)((0,E.Z)({},nt),{},{ref:Xe,icon:z}))},Re=ae.forwardRef(Ke),jt=Re},28058:function(Di,ti,pe){pe.d(ti,{Z:function(){return jt}});var E=pe(1413),ae=pe(67294),xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},z=xe,ce=pe(91146),Ke=function(nt,Xe){return ae.createElement(ce.Z,(0,E.Z)((0,E.Z)({},nt),{},{ref:Xe,icon:z}))},Re=ae.forwardRef(Ke),jt=Re},96906:function(Di,ti,pe){pe.d(ti,{Z:function(){return Ut}});var E=pe(45987),ae=pe(1413),xe=pe(56874),z=pe(87462),ce=pe(67294),Ke=pe(29245),Re=pe(78026),jt=function(Dt,Gt){return ce.createElement(Re.Z,(0,z.Z)({},Dt,{ref:Gt,icon:Ke.Z}))},it=ce.forwardRef(jt),nt=it,Xe=pe(86413),lt=pe(28459),Ee=pe(85418),ct=pe(14726),vt=pe(93967),ft=pe.n(vt),ue=pe(85893),kt=["key","name"],Ot=function(Dt){var Gt=Dt.children,$t=Dt.menus,at=Dt.onSelect,Le=Dt.className,He=Dt.style,Me=(0,ce.useContext)(lt.ZP.ConfigContext),ke=Me.getPrefixCls,Ne=ke("pro-table-dropdown"),K=(0,Xe.Q)({onClick:function(Fe){return at&&at(Fe.key)},items:$t==null?void 0:$t.map(function($e){return{label:$e.name,key:$e.key}})});return(0,ue.jsx)(Ee.Z,(0,ae.Z)((0,ae.Z)({},K),{},{className:ft()(Ne,Le),children:(0,ue.jsxs)(ct.ZP,{style:He,children:[Gt," ",(0,ue.jsx)(xe.Z,{})]})}))},Qt=function(Dt){var Gt=Dt.className,$t=Dt.style,at=Dt.onSelect,Le=Dt.menus,He=Le===void 0?[]:Le,Me=Dt.children,ke=(0,ce.useContext)(lt.ZP.ConfigContext),Ne=ke.getPrefixCls,K=Ne("pro-table-dropdown"),$e=(0,Xe.Q)({onClick:function(ee){at==null||at(ee.key)},items:He.map(function(Fe){var ee=Fe.key,ge=Fe.name,Ce=(0,E.Z)(Fe,kt);return(0,ae.Z)((0,ae.Z)({key:ee},Ce),{},{title:Ce.title,label:ge})})});return(0,ue.jsx)(Ee.Z,(0,ae.Z)((0,ae.Z)({},$e),{},{className:ft()(K,Gt),children:(0,ue.jsx)("a",{style:$t,children:Me||(0,ue.jsx)(nt,{})})}))};Qt.Button=Ot;var Ut=Qt},36128:function(Di,ti,pe){pe.d(ti,{eR:function(){return nt}});var E=pe(87462),ae=pe(35524),xe=pe(75533),z=pe(59119),ce=Xe=>{var{theme:lt,settings:Ee={},styles:ct=[]}=Xe,vt={".cm-gutters":{}},ft={};Ee.background&&(ft.backgroundColor=Ee.background),Ee.backgroundImage&&(ft.backgroundImage=Ee.backgroundImage),Ee.foreground&&(ft.color=Ee.foreground),Ee.fontSize&&(ft.fontSize=Ee.fontSize),(Ee.background||Ee.foreground)&&(vt["&"]=ft),Ee.fontFamily&&(vt["&.cm-editor .cm-scroller"]={fontFamily:Ee.fontFamily}),Ee.gutterBackground&&(vt[".cm-gutters"].backgroundColor=Ee.gutterBackground),Ee.gutterForeground&&(vt[".cm-gutters"].color=Ee.gutterForeground),Ee.gutterBorder&&(vt[".cm-gutters"].borderRightColor=Ee.gutterBorder),Ee.caret&&(vt[".cm-content"]={caretColor:Ee.caret},vt[".cm-cursor, .cm-dropCursor"]={borderLeftColor:Ee.caret});var ue={};Ee.gutterActiveForeground&&(ue.color=Ee.gutterActiveForeground),Ee.lineHighlight&&(vt[".cm-activeLine"]={backgroundColor:Ee.lineHighlight},ue.backgroundColor=Ee.lineHighlight),vt[".cm-activeLineGutter"]=ue,Ee.selection&&(vt["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:Ee.selection+" !important"}),Ee.selectionMatch&&(vt["& .cm-selectionMatch"]={backgroundColor:Ee.selectionMatch});var kt=xe.tk.theme(vt,{dark:lt==="dark"}),Ot=z.Qf.define(ct),Qt=[kt,(0,z.nF)(Ot)];return Qt},Ke=null,Re={background:"#F5F5F5",foreground:"#333333",selection:"#C9D0D9",selectionMatch:"#C9D0D9",cursor:"#54494B",dropdownBackground:"#F5F5F5",activeLine:"#79ff002b",matchingBracket:"#E4F6D4",keyword:"#4B69C6",storage:"#4B69C6",variable:"#7A3E9D",parameter:"#7A3E9D",function:"#AA3731",string:"#448C27",constant:"#9C5D27",type:"#7A3E9D",class:"#AA3731",number:"#9C5D27",comment:"#AAAAAA",heading:"#AA3731",invalid:"#cd3131",regexp:"#4B69C6",tag:"#4B69C6"},jt={background:Re.background,foreground:Re.foreground,caret:Re.cursor,selection:Re.selection,selectionMatch:Re.selection,gutterBackground:Re.background,gutterForeground:Re.foreground,gutterBorder:"transparent",lineHighlight:Re.activeLine},it=Xe=>{var{theme:lt="light",settings:Ee={},styles:ct=[]}=Xe||{};return ce({theme:lt,settings:(0,E.Z)({},jt,Ee),styles:[{tag:ae.pJ.keyword,color:Re.keyword},{tag:[ae.pJ.name,ae.pJ.deleted,ae.pJ.character,ae.pJ.macroName],color:Re.variable},{tag:[ae.pJ.propertyName],color:Re.function},{tag:[ae.pJ.processingInstruction,ae.pJ.string,ae.pJ.inserted,ae.pJ.special(ae.pJ.string)],color:Re.string},{tag:[ae.pJ.function(ae.pJ.variableName),ae.pJ.labelName],color:Re.function},{tag:[ae.pJ.color,ae.pJ.constant(ae.pJ.name),ae.pJ.standard(ae.pJ.name)],color:Re.constant},{tag:[ae.pJ.definition(ae.pJ.name),ae.pJ.separator],color:Re.variable},{tag:[ae.pJ.className],color:Re.class},{tag:[ae.pJ.number,ae.pJ.changed,ae.pJ.annotation,ae.pJ.modifier,ae.pJ.self,ae.pJ.namespace],color:Re.number},{tag:[ae.pJ.typeName],color:Re.type,fontStyle:Re.type},{tag:[ae.pJ.operator,ae.pJ.operatorKeyword],color:Re.keyword},{tag:[ae.pJ.url,ae.pJ.escape,ae.pJ.regexp,ae.pJ.link],color:Re.regexp},{tag:[ae.pJ.meta,ae.pJ.comment],color:Re.comment},{tag:ae.pJ.tagName,color:Re.tag},{tag:ae.pJ.strong,fontWeight:"bold"},{tag:ae.pJ.emphasis,fontStyle:"italic"},{tag:ae.pJ.link,textDecoration:"underline"},{tag:ae.pJ.heading,fontWeight:"bold",color:Re.heading},{tag:[ae.pJ.atom,ae.pJ.bool,ae.pJ.special(ae.pJ.variableName)],color:Re.variable},{tag:ae.pJ.invalid,color:Re.invalid},{tag:ae.pJ.strikethrough,textDecoration:"line-through"},...ct]})},nt=it()},91229:function(Di,ti,pe){pe.d(ti,{ZP:function(){return Xi}});var E=pe(87462),ae=pe(63366),xe=pe(67294),z=pe(78120),ce=pe(75533),Ke=pe(59119),Re=pe(41113);const jt=r=>{let{state:i}=r,l=i.doc.lineAt(i.selection.main.from),c=ue(r.state,l.from);return c.line?nt(r):c.block?ft(r):!1};function it(r,i){return({state:l,dispatch:c})=>{if(l.readOnly)return!1;let f=r(i,l);return f?(c(l.update(f)),!0):!1}}const nt=it(Pt,0),Xe=null,lt=null,Ee=it(Ut,0),ct=null,vt=null,ft=it((r,i)=>Ut(r,i,Qt(i)),0);function ue(r,i){let l=r.languageDataAt("commentTokens",i);return l.length?l[0]:{}}const kt=50;function Ot(r,{open:i,close:l},c,f){let p=r.sliceDoc(c-kt,c),S=r.sliceDoc(f,f+kt),C=/\s*$/.exec(p)[0].length,W=/^\s*/.exec(S)[0].length,Z=p.length-C;if(p.slice(Z-i.length,Z)==i&&S.slice(W,W+l.length)==l)return{open:{pos:c-C,margin:C&&1},close:{pos:f+W,margin:W&&1}};let ie,we;f-c<=2*kt?ie=we=r.sliceDoc(c,f):(ie=r.sliceDoc(c,c+kt),we=r.sliceDoc(f-kt,f));let Ue=/^\s*/.exec(ie)[0].length,At=/\s*$/.exec(we)[0].length,Xt=we.length-At-l.length;return ie.slice(Ue,Ue+i.length)==i&&we.slice(Xt,Xt+l.length)==l?{open:{pos:c+Ue+i.length,margin:/\s/.test(ie.charAt(Ue+i.length))?1:0},close:{pos:f-At-l.length,margin:/\s/.test(we.charAt(Xt-1))?1:0}}:null}function Qt(r){let i=[];for(let l of r.selection.ranges){let c=r.doc.lineAt(l.from),f=l.to<=c.to?c:r.doc.lineAt(l.to),p=i.length-1;p>=0&&i[p].to>c.from?i[p].to=f.to:i.push({from:c.from+/^\s*/.exec(c.text)[0].length,to:f.to})}return i}function Ut(r,i,l=i.selection.ranges){let c=l.map(p=>ue(i,p.from).block);if(!c.every(p=>p))return null;let f=l.map((p,S)=>Ot(i,c[S],p.from,p.to));if(r!=2&&!f.every(p=>p))return{changes:i.changes(l.map((p,S)=>f[S]?[]:[{from:p.from,insert:c[S].open+" "},{from:p.to,insert:" "+c[S].close}]))};if(r!=1&&f.some(p=>p)){let p=[];for(let S=0,C;S<f.length;S++)if(C=f[S]){let W=c[S],{open:Z,close:ie}=C;p.push({from:Z.pos-W.open.length,to:Z.pos+Z.margin},{from:ie.pos-ie.margin,to:ie.pos+W.close.length})}return{changes:p}}return null}function Pt(r,i,l=i.selection.ranges){let c=[],f=-1;for(let{from:p,to:S}of l){let C=c.length,W=1e9,Z=ue(i,p).line;if(Z){for(let ie=p;ie<=S;){let we=i.doc.lineAt(ie);if(we.from>f&&(p==S||S>we.from)){f=we.from;let Ue=/^\s*/.exec(we.text)[0].length,At=Ue==we.length,Xt=we.text.slice(Ue,Ue+Z.length)==Z?Ue:-1;Ue<we.text.length&&Ue<W&&(W=Ue),c.push({line:we,comment:Xt,token:Z,indent:Ue,empty:At,single:!1})}ie=we.to+1}if(W<1e9)for(let ie=C;ie<c.length;ie++)c[ie].indent<c[ie].line.text.length&&(c[ie].indent=W);c.length==C+1&&(c[C].single=!0)}}if(r!=2&&c.some(p=>p.comment<0&&(!p.empty||p.single))){let p=[];for(let{line:C,token:W,indent:Z,empty:ie,single:we}of c)(we||!ie)&&p.push({from:C.from+Z,insert:W+" "});let S=i.changes(p);return{changes:S,selection:i.selection.map(S,1)}}else if(r!=1&&c.some(p=>p.comment>=0)){let p=[];for(let{line:S,comment:C,token:W}of c)if(C>=0){let Z=S.from+C,ie=Z+W.length;S.text[ie-S.from]==" "&&ie++,p.push({from:Z,to:ie})}return{changes:p}}return null}const Dt=z.q6.define(),Gt=z.q6.define(),$t=z.r$.define(),at=z.r$.define({combine(r){return(0,z.BO)(r,{minDepth:100,newGroupDelay:500,joinToEvent:(i,l)=>l},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(i,l)=>(c,f)=>i(c,f)||l(c,f)})}}),Le=z.QQ.define({create(){return oe.empty},update(r,i){let l=i.state.facet(at),c=i.annotation(Dt);if(c){let W=Oe.fromTransaction(i,c.selection),Z=c.side,ie=Z==0?r.undone:r.done;return W?ie=De(ie,ie.length,l.minDepth,W):ie=It(ie,i.startState.selection),new oe(Z==0?c.rest:ie,Z==0?ie:c.rest)}let f=i.annotation(Gt);if((f=="full"||f=="before")&&(r=r.isolate()),i.annotation(z.YW.addToHistory)===!1)return i.changes.empty?r:r.addMapping(i.changes.desc);let p=Oe.fromTransaction(i),S=i.annotation(z.YW.time),C=i.annotation(z.YW.userEvent);return p?r=r.addChanges(p,S,C,l,i):i.selection&&(r=r.addSelection(i.startState.selection,S,C,l.newGroupDelay)),(f=="full"||f=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(i=>i.toJSON()),undone:r.undone.map(i=>i.toJSON())}},fromJSON(r){return new oe(r.done.map(Oe.fromJSON),r.undone.map(Oe.fromJSON))}});function He(r={}){return[Le,at.of(r),ce.tk.domEventHandlers({beforeinput(i,l){let c=i.inputType=="historyUndo"?Ne:i.inputType=="historyRedo"?K:null;return c?(i.preventDefault(),c(l)):!1}})]}const Me=null;function ke(r,i){return function({state:l,dispatch:c}){if(!i&&l.readOnly)return!1;let f=l.field(Le,!1);if(!f)return!1;let p=f.pop(r,l,i);return p?(c(p),!0):!1}}const Ne=ke(0,!1),K=ke(1,!1),$e=ke(0,!0),Fe=ke(1,!0);function ee(r){return function(i){let l=i.field(Le,!1);if(!l)return 0;let c=r==0?l.done:l.undone;return c.length-(c.length&&!c[0].changes?1:0)}}const ge=null,Ce=null;class Oe{constructor(i,l,c,f,p){this.changes=i,this.effects=l,this.mapped=c,this.startSelection=f,this.selectionsAfter=p}setSelAfter(i){return new Oe(this.changes,this.effects,this.mapped,this.startSelection,i)}toJSON(){var i,l,c;return{changes:(i=this.changes)===null||i===void 0?void 0:i.toJSON(),mapped:(l=this.mapped)===null||l===void 0?void 0:l.toJSON(),startSelection:(c=this.startSelection)===null||c===void 0?void 0:c.toJSON(),selectionsAfter:this.selectionsAfter.map(f=>f.toJSON())}}static fromJSON(i){return new Oe(i.changes&&z.as.fromJSON(i.changes),[],i.mapped&&z.n0.fromJSON(i.mapped),i.startSelection&&z.jT.fromJSON(i.startSelection),i.selectionsAfter.map(z.jT.fromJSON))}static fromTransaction(i,l){let c=pt;for(let f of i.startState.facet($t)){let p=f(i);p.length&&(c=c.concat(p))}return!c.length&&i.changes.empty?null:new Oe(i.changes.invert(i.startState.doc),c,void 0,l||i.startState.selection,pt)}static selection(i){return new Oe(void 0,pt,void 0,void 0,i)}}function De(r,i,l,c){let f=i+1>l+20?i-l-1:0,p=r.slice(f,i);return p.push(c),p}function dt(r,i){let l=[],c=!1;return r.iterChangedRanges((f,p)=>l.push(f,p)),i.iterChangedRanges((f,p,S,C)=>{for(let W=0;W<l.length;){let Z=l[W++],ie=l[W++];C>=Z&&S<=ie&&(c=!0)}}),c}function Ye(r,i){return r.ranges.length==i.ranges.length&&r.ranges.filter((l,c)=>l.empty!=i.ranges[c].empty).length===0}function xt(r,i){return r.length?i.length?r.concat(i):r:i}const pt=[],Rt=200;function It(r,i){if(r.length){let l=r[r.length-1],c=l.selectionsAfter.slice(Math.max(0,l.selectionsAfter.length-Rt));return c.length&&c[c.length-1].eq(i)?r:(c.push(i),De(r,r.length-1,1e9,l.setSelAfter(c)))}else return[Oe.selection([i])]}function Et(r){let i=r[r.length-1],l=r.slice();return l[r.length-1]=i.setSelAfter(i.selectionsAfter.slice(0,i.selectionsAfter.length-1)),l}function Mt(r,i){if(!r.length)return r;let l=r.length,c=pt;for(;l;){let f=ii(r[l-1],i,c);if(f.changes&&!f.changes.empty||f.effects.length){let p=r.slice(0,l);return p[l-1]=f,p}else i=f.mapped,l--,c=f.selectionsAfter}return c.length?[Oe.selection(c)]:pt}function ii(r,i,l){let c=xt(r.selectionsAfter.length?r.selectionsAfter.map(C=>C.map(i)):pt,l);if(!r.changes)return Oe.selection(c);let f=r.changes.map(i),p=i.mapDesc(r.changes,!0),S=r.mapped?r.mapped.composeDesc(p):p;return new Oe(f,z.Py.mapEffects(r.effects,i),S,r.startSelection.map(p),c)}const oi=/^(input\.type|delete)($|\.)/;class oe{constructor(i,l,c=0,f=void 0){this.done=i,this.undone=l,this.prevTime=c,this.prevUserEvent=f}isolate(){return this.prevTime?new oe(this.done,this.undone):this}addChanges(i,l,c,f,p){let S=this.done,C=S[S.length-1];return C&&C.changes&&!C.changes.empty&&i.changes&&(!c||oi.test(c))&&(!C.selectionsAfter.length&&l-this.prevTime<f.newGroupDelay&&f.joinToEvent(p,dt(C.changes,i.changes))||c=="input.type.compose")?S=De(S,S.length-1,f.minDepth,new Oe(i.changes.compose(C.changes),xt(i.effects,C.effects),C.mapped,C.startSelection,pt)):S=De(S,S.length,f.minDepth,i),new oe(S,pt,l,c)}addSelection(i,l,c,f){let p=this.done.length?this.done[this.done.length-1].selectionsAfter:pt;return p.length>0&&l-this.prevTime<f&&c==this.prevUserEvent&&c&&/^select($|\.)/.test(c)&&Ye(p[p.length-1],i)?this:new oe(It(this.done,i),this.undone,l,c)}addMapping(i){return new oe(Mt(this.done,i),Mt(this.undone,i),this.prevTime,this.prevUserEvent)}pop(i,l,c){let f=i==0?this.done:this.undone;if(f.length==0)return null;let p=f[f.length-1],S=p.selectionsAfter[0]||l.selection;if(c&&p.selectionsAfter.length)return l.update({selection:p.selectionsAfter[p.selectionsAfter.length-1],annotations:Dt.of({side:i,rest:Et(f),selection:S}),userEvent:i==0?"select.undo":"select.redo",scrollIntoView:!0});if(p.changes){let C=f.length==1?pt:f.slice(0,f.length-1);return p.mapped&&(C=Mt(C,p.mapped)),l.update({changes:p.changes,selection:p.startSelection,effects:p.effects,annotations:Dt.of({side:i,rest:C,selection:S}),filter:!1,userEvent:i==0?"undo":"redo",scrollIntoView:!0})}else return null}}oe.empty=new oe(pt,pt);const x=[{key:"Mod-z",run:Ne,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:K,preventDefault:!0},{linux:"Ctrl-Shift-z",run:K,preventDefault:!0},{key:"Mod-u",run:$e,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Fe,preventDefault:!0}];function M(r,i){return z.jT.create(r.ranges.map(i),r.mainIndex)}function F(r,i){return r.update({selection:i,scrollIntoView:!0,userEvent:"select"})}function j({state:r,dispatch:i},l){let c=M(r.selection,l);return c.eq(r.selection,!0)?!1:(i(F(r,c)),!0)}function $(r,i){return z.jT.cursor(i?r.to:r.from)}function se(r,i){return j(r,l=>l.empty?r.moveByChar(l,i):$(l,i))}function le(r){return r.textDirectionAt(r.state.selection.main.head)==ce.Nm.LTR}const Be=r=>se(r,!le(r)),et=r=>se(r,le(r)),We=r=>se(r,!0),_=r=>se(r,!1);function Pe(r,i){return j(r,l=>l.empty?r.moveByGroup(l,i):$(l,i))}const ye=r=>Pe(r,!le(r)),Te=r=>Pe(r,le(r)),je=r=>Pe(r,!0),Ve=r=>Pe(r,!1),ht=typeof Intl!="undefined"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function wt(r,i,l){let c=r.state.charCategorizer(i.from),f=CharCategory.Space,p=i.from,S=0,C=!1,W=!1,Z=!1,ie=Ue=>{if(C)return!1;p+=l?Ue.length:-Ue.length;let At=c(Ue),Xt;if(At==CharCategory.Word&&Ue.charCodeAt(0)<128&&/[\W_]/.test(Ue)&&(At=-1),f==CharCategory.Space&&(f=At),f!=At)return!1;if(f==CharCategory.Word)if(Ue.toLowerCase()==Ue){if(!l&&W)return!1;Z=!0}else if(Z){if(l)return!1;C=!0}else{if(W&&l&&c(Xt=r.state.sliceDoc(p,p+1))==CharCategory.Word&&Xt.toLowerCase()==Xt)return!1;W=!0}return S++,!0},we=r.moveByChar(i,l,Ue=>(ie(Ue),ie));if(ht&&f==CharCategory.Word&&we.from==i.from+S*(l?1:-1)){let Ue=Math.min(i.head,we.head),At=Math.max(i.head,we.head),Xt=r.state.sliceDoc(Ue,At);if(Xt.length>1&&/[\u4E00-\uffff]/.test(Xt)){let ai=Array.from(ht.segment(Xt));if(ai.length>1)return l?EditorSelection.cursor(i.head+ai[1].index,-1):EditorSelection.cursor(we.head+ai[ai.length-1].index,1)}}return we}function gt(r,i){return j(r,l=>l.empty?wt(r,l,i):$(l,i))}const Ft=r=>gt(r,!0),ze=r=>gt(r,!1);function Tt(r,i,l){if(i.type.prop(l))return!0;let c=i.to-i.from;return c&&(c>2||/[^\s,.;:]/.test(r.sliceDoc(i.from,i.to)))||i.firstChild}function Qe(r,i,l){let c=(0,Ke.qz)(r).resolveInner(i.head),f=l?Re.md.closedBy:Re.md.openedBy;for(let W=i.head;;){let Z=l?c.childAfter(W):c.childBefore(W);if(!Z)break;Tt(r,Z,f)?c=Z:W=l?Z.to:Z.from}let p=c.type.prop(f),S,C;return p&&(S=l?(0,Ke.Um)(r,c.from,1):(0,Ke.Um)(r,c.to,-1))&&S.matched?C=l?S.end.to:S.end.from:C=l?c.to:c.from,z.jT.cursor(C,l?-1:1)}const Ct=r=>j(r,i=>Qe(r.state,i,!le(r))),Ge=r=>j(r,i=>Qe(r.state,i,le(r)));function tt(r,i){return j(r,l=>{if(!l.empty)return $(l,i);let c=r.moveVertically(l,i);return c.head!=l.head?c:r.moveToLineBoundary(l,i)})}const mt=r=>tt(r,!1),st=r=>tt(r,!0);function zt(r){let i=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,l=0,c=0,f;if(i){for(let p of r.state.facet(ce.tk.scrollMargins)){let S=p(r);S!=null&&S.top&&(l=Math.max(S==null?void 0:S.top,l)),S!=null&&S.bottom&&(c=Math.max(S==null?void 0:S.bottom,c))}f=r.scrollDOM.clientHeight-l-c}else f=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:l,marginBottom:c,selfScroll:i,height:Math.max(r.defaultLineHeight,f-5)}}function Ht(r,i){let l=zt(r),{state:c}=r,f=M(c.selection,S=>S.empty?r.moveVertically(S,i,l.height):$(S,i));if(f.eq(c.selection))return!1;let p;if(l.selfScroll){let S=r.coordsAtPos(c.selection.main.head),C=r.scrollDOM.getBoundingClientRect(),W=C.top+l.marginTop,Z=C.bottom-l.marginBottom;S&&S.top>W&&S.bottom<Z&&(p=ce.tk.scrollIntoView(f.main.head,{y:"start",yMargin:S.top-W}))}return r.dispatch(F(c,f),{effects:p}),!0}const St=r=>Ht(r,!1),si=r=>Ht(r,!0);function qt(r,i,l){let c=r.lineBlockAt(i.head),f=r.moveToLineBoundary(i,l);if(f.head==i.head&&f.head!=(l?c.to:c.from)&&(f=r.moveToLineBoundary(i,l,!1)),!l&&f.head==c.from&&c.length){let p=/^\s*/.exec(r.state.sliceDoc(c.from,Math.min(c.from+100,c.to)))[0].length;p&&i.head!=c.from+p&&(f=z.jT.cursor(c.from+p))}return f}const _t=r=>j(r,i=>qt(r,i,!0)),rt=r=>j(r,i=>qt(r,i,!1)),Vt=r=>j(r,i=>qt(r,i,!le(r))),Nt=r=>j(r,i=>qt(r,i,le(r))),fi=r=>j(r,i=>z.jT.cursor(r.lineBlockAt(i.head).from,1)),hi=r=>j(r,i=>z.jT.cursor(r.lineBlockAt(i.head).to,-1));function mi(r,i,l){let c=!1,f=M(r.selection,p=>{let S=(0,Ke.Um)(r,p.head,-1)||(0,Ke.Um)(r,p.head,1)||p.head>0&&(0,Ke.Um)(r,p.head-1,1)||p.head<r.doc.length&&(0,Ke.Um)(r,p.head+1,-1);if(!S||!S.end)return p;c=!0;let C=S.start.from==p.head?S.end.to:S.end.from;return l?z.jT.range(p.anchor,C):z.jT.cursor(C)});return c?(i(F(r,f)),!0):!1}const I=({state:r,dispatch:i})=>mi(r,i,!1),y=({state:r,dispatch:i})=>mi(r,i,!0);function P(r,i){let l=M(r.state.selection,c=>{let f=i(c);return z.jT.range(c.anchor,f.head,f.goalColumn,f.bidiLevel||void 0)});return l.eq(r.state.selection)?!1:(r.dispatch(F(r.state,l)),!0)}function N(r,i){return P(r,l=>r.moveByChar(l,i))}const U=r=>N(r,!le(r)),ne=r=>N(r,le(r)),J=r=>N(r,!0),he=r=>N(r,!1);function Je(r,i){return P(r,l=>r.moveByGroup(l,i))}const Ze=r=>Je(r,!le(r)),Kt=r=>Je(r,le(r)),D=r=>Je(r,!0),a=r=>Je(r,!1);function d(r,i){return P(r,l=>wt(r,l,i))}const m=r=>d(r,!0),k=r=>d(r,!1),R=r=>P(r,i=>Qe(r.state,i,!le(r))),B=r=>P(r,i=>Qe(r.state,i,le(r)));function Q(r,i){return P(r,l=>r.moveVertically(l,i))}const q=r=>Q(r,!1),de=r=>Q(r,!0);function Se(r,i){return P(r,l=>r.moveVertically(l,i,zt(r).height))}const Ie=r=>Se(r,!1),ot=r=>Se(r,!0),_e=r=>P(r,i=>qt(r,i,!0)),ei=r=>P(r,i=>qt(r,i,!1)),Ci=r=>P(r,i=>qt(r,i,!le(r))),ni=r=>P(r,i=>qt(r,i,le(r))),Ni=r=>P(r,i=>z.jT.cursor(r.lineBlockAt(i.head).from)),Ai=r=>P(r,i=>z.jT.cursor(r.lineBlockAt(i.head).to)),$i=({state:r,dispatch:i})=>(i(F(r,{anchor:0})),!0),ns=({state:r,dispatch:i})=>(i(F(r,{anchor:r.doc.length})),!0),Hi=({state:r,dispatch:i})=>(i(F(r,{anchor:r.selection.main.anchor,head:0})),!0),di=({state:r,dispatch:i})=>(i(F(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),wn=({state:r,dispatch:i})=>(i(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),Fn=({state:r,dispatch:i})=>{let l=G(r).map(({from:c,to:f})=>z.jT.range(c,Math.min(f+1,r.doc.length)));return i(r.update({selection:z.jT.create(l),userEvent:"select"})),!0},Sn=({state:r,dispatch:i})=>{let l=M(r.selection,c=>{var f;let p=(0,Ke.qz)(r).resolveStack(c.from,1);for(let S=p;S;S=S.next){let{node:C}=S;if((C.from<c.from&&C.to>=c.to||C.to>c.to&&C.from<=c.from)&&(!((f=C.parent)===null||f===void 0)&&f.parent))return z.jT.range(C.to,C.from)}return c});return i(F(r,l)),!0},Vi=({state:r,dispatch:i})=>{let l=r.selection,c=null;return l.ranges.length>1?c=z.jT.create([l.main]):l.main.empty||(c=z.jT.create([z.jT.cursor(l.main.head)])),c?(i(F(r,c)),!0):!1};function Fi(r,i){if(r.state.readOnly)return!1;let l="delete.selection",{state:c}=r,f=c.changeByRange(p=>{let{from:S,to:C}=p;if(S==C){let W=i(p);W<S?(l="delete.backward",W=Gi(r,W,!1)):W>S&&(l="delete.forward",W=Gi(r,W,!0)),S=Math.min(S,W),C=Math.max(C,W)}else S=Gi(r,S,!1),C=Gi(r,C,!0);return S==C?{range:p}:{changes:{from:S,to:C},range:z.jT.cursor(S,S<p.head?-1:1)}});return f.changes.empty?!1:(r.dispatch(c.update(f,{scrollIntoView:!0,userEvent:l,effects:l=="delete.selection"?ce.tk.announce.of(c.phrase("Selection deleted")):void 0})),!0)}function Gi(r,i,l){if(r instanceof ce.tk)for(let c of r.state.facet(ce.tk.atomicRanges).map(f=>f(r)))c.between(i,i,(f,p)=>{f<i&&p>i&&(i=l?p:f)});return i}const on=(r,i,l)=>Fi(r,c=>{let f=c.from,{state:p}=r,S=p.doc.lineAt(f),C,W;if(l&&!i&&f>S.from&&f<S.from+200&&!/[^ \t]/.test(C=S.text.slice(0,f-S.from))){if(C[C.length-1]=="	")return f-1;let Z=(0,z.IS)(C,p.tabSize),ie=Z%(0,Ke.y1)(p)||(0,Ke.y1)(p);for(let we=0;we<ie&&C[C.length-1-we]==" ";we++)f--;W=f}else W=(0,z.cp)(S.text,f-S.from,i,i)+S.from,W==f&&S.number!=(i?p.doc.lines:1)?W+=i?1:-1:!i&&/[\ufe00-\ufe0f]/.test(S.text.slice(W-S.from,f-S.from))&&(W=(0,z.cp)(S.text,W-S.from,!1,!1)+S.from);return W}),ln=r=>on(r,!1,!0),Es=r=>on(r,!1,!1),an=r=>on(r,!0,!1),hn=(r,i)=>Fi(r,l=>{let c=l.head,{state:f}=r,p=f.doc.lineAt(c),S=f.charCategorizer(c);for(let C=null;;){if(c==(i?p.to:p.from)){c==l.head&&p.number!=(i?f.doc.lines:1)&&(c+=i?1:-1);break}let W=(0,z.cp)(p.text,c-p.from,i)+p.from,Z=p.text.slice(Math.min(c,W)-p.from,Math.max(c,W)-p.from),ie=S(Z);if(C!=null&&ie!=C)break;(Z!=" "||c!=l.head)&&(C=ie),c=W}return c}),wi=r=>hn(r,!1),cn=r=>hn(r,!0),ss=r=>Fi(r,i=>{let l=r.lineBlockAt(i.head).to;return i.head<l?l:Math.min(r.state.doc.length,i.head+1)}),kr=r=>Fi(r,i=>{let l=r.lineBlockAt(i.head).from;return i.head>l?l:Math.max(0,i.head-1)}),T=r=>Fi(r,i=>{let l=r.moveToLineBoundary(i,!1).head;return i.head>l?l:Math.max(0,i.head-1)}),g=r=>Fi(r,i=>{let l=r.moveToLineBoundary(i,!0).head;return i.head<l?l:Math.min(r.state.doc.length,i.head+1)}),w=({state:r,dispatch:i})=>{if(r.readOnly)return!1;let l=[];for(let c=0,f="",p=r.doc.iter();;){if(p.next(),p.lineBreak||p.done){let S=f.search(/\s+$/);if(S>-1&&l.push({from:c-(f.length-S),to:c}),p.done)break;f=""}else f=p.value;c+=p.value.length}return l.length?(i(r.update({changes:l,userEvent:"delete"})),!0):!1},L=({state:r,dispatch:i})=>{if(r.readOnly)return!1;let l=r.changeByRange(c=>({changes:{from:c.from,to:c.to,insert:z.xv.of(["",""])},range:z.jT.cursor(c.from)}));return i(r.update(l,{scrollIntoView:!0,userEvent:"input"})),!0},H=({state:r,dispatch:i})=>{if(r.readOnly)return!1;let l=r.changeByRange(c=>{if(!c.empty||c.from==0||c.from==r.doc.length)return{range:c};let f=c.from,p=r.doc.lineAt(f),S=f==p.from?f-1:(0,z.cp)(p.text,f-p.from,!1)+p.from,C=f==p.to?f+1:(0,z.cp)(p.text,f-p.from,!0)+p.from;return{changes:{from:S,to:C,insert:r.doc.slice(f,C).append(r.doc.slice(S,f))},range:z.jT.cursor(C)}});return l.changes.empty?!1:(i(r.update(l,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function G(r){let i=[],l=-1;for(let c of r.selection.ranges){let f=r.doc.lineAt(c.from),p=r.doc.lineAt(c.to);if(!c.empty&&c.to==p.from&&(p=r.doc.lineAt(c.to-1)),l>=f.number){let S=i[i.length-1];S.to=p.to,S.ranges.push(c)}else i.push({from:f.from,to:p.to,ranges:[c]});l=p.number+1}return i}function Y(r,i,l){if(r.readOnly)return!1;let c=[],f=[];for(let p of G(r)){if(l?p.to==r.doc.length:p.from==0)continue;let S=r.doc.lineAt(l?p.to+1:p.from-1),C=S.length+1;if(l){c.push({from:p.to,to:S.to},{from:p.from,insert:S.text+r.lineBreak});for(let W of p.ranges)f.push(z.jT.range(Math.min(r.doc.length,W.anchor+C),Math.min(r.doc.length,W.head+C)))}else{c.push({from:S.from,to:p.from},{from:p.to,insert:r.lineBreak+S.text});for(let W of p.ranges)f.push(z.jT.range(W.anchor-C,W.head-C))}}return c.length?(i(r.update({changes:c,scrollIntoView:!0,selection:z.jT.create(f,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const be=({state:r,dispatch:i})=>Y(r,i,!1),ve=({state:r,dispatch:i})=>Y(r,i,!0);function qe(r,i,l){if(r.readOnly)return!1;let c=[];for(let f of G(r))l?c.push({from:f.from,insert:r.doc.slice(f.from,f.to)+r.lineBreak}):c.push({from:f.to,insert:r.lineBreak+r.doc.slice(f.from,f.to)});return i(r.update({changes:c,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const yt=({state:r,dispatch:i})=>qe(r,i,!1),Yt=({state:r,dispatch:i})=>qe(r,i,!0),yi=r=>{if(r.state.readOnly)return!1;let{state:i}=r,l=i.changes(G(i).map(({from:f,to:p})=>(f>0?f--:p<i.doc.length&&p++,{from:f,to:p}))),c=M(i.selection,f=>{let p;if(r.lineWrapping){let S=r.lineBlockAt(f.head),C=r.coordsAtPos(f.head,f.assoc||1);C&&(p=S.bottom+r.documentTop-C.bottom+r.defaultLineHeight/2)}return r.moveVertically(f,!0,p)}).map(l);return r.dispatch({changes:l,selection:c,scrollIntoView:!0,userEvent:"delete.line"}),!0},bi=({state:r,dispatch:i})=>(i(r.update(r.replaceSelection(r.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0),Ei=({state:r,dispatch:i})=>(i(r.update(r.changeByRange(l=>{let c=/^\s*/.exec(r.doc.lineAt(l.from).text)[0];return{changes:{from:l.from,to:l.to,insert:r.lineBreak+c},range:EditorSelection.cursor(l.from+c.length+1)}}),{scrollIntoView:!0,userEvent:"input"})),!0);function ji(r,i){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(i-1,i+1)))return{from:i,to:i};let l=(0,Ke.qz)(r).resolveInner(i),c=l.childBefore(i),f=l.childAfter(i),p;return c&&f&&c.to<=i&&f.from>=i&&(p=c.type.prop(Re.md.closedBy))&&p.indexOf(f.name)>-1&&r.doc.lineAt(c.to).from==r.doc.lineAt(f.from).from&&!/\S/.test(r.sliceDoc(c.to,f.from))?{from:c.to,to:f.from}:null}const rs=wr(!1),On=wr(!0);function wr(r){return({state:i,dispatch:l})=>{if(i.readOnly)return!1;let c=i.changeByRange(f=>{let{from:p,to:S}=f,C=i.doc.lineAt(p),W=!r&&p==S&&ji(i,p);r&&(p=S=(S<=C.to?C:i.doc.lineAt(S)).to);let Z=new Ke.Gn(i,{simulateBreak:p,simulateDoubleBreak:!!W}),ie=(0,Ke.K0)(Z,p);for(ie==null&&(ie=(0,z.IS)(/^\s*/.exec(i.doc.lineAt(p).text)[0],i.tabSize));S<C.to&&/\s/.test(C.text[S-C.from]);)S++;W?{from:p,to:S}=W:p>C.from&&p<C.from+100&&!/\S/.test(C.text.slice(0,p))&&(p=C.from);let we=["",(0,Ke.SS)(i,ie)];return W&&we.push((0,Ke.SS)(i,Z.lineIndent(C.from,-1))),{changes:{from:p,to:S,insert:z.xv.of(we)},range:z.jT.cursor(p+1+we[1].length)}});return l(i.update(c,{scrollIntoView:!0,userEvent:"input"})),!0}}function Ls(r,i){let l=-1;return r.changeByRange(c=>{let f=[];for(let S=c.from;S<=c.to;){let C=r.doc.lineAt(S);C.number>l&&(c.empty||c.to>C.from)&&(i(C,f,c),l=C.number),S=C.to+1}let p=r.changes(f);return{changes:f,range:z.jT.range(p.mapPos(c.anchor,1),p.mapPos(c.head,1))}})}const Is=({state:r,dispatch:i})=>{if(r.readOnly)return!1;let l=Object.create(null),c=new Ke.Gn(r,{overrideIndentation:p=>{let S=l[p];return S==null?-1:S}}),f=Ls(r,(p,S,C)=>{let W=(0,Ke.K0)(c,p.from);if(W==null)return;/\S/.test(p.text)||(W=0);let Z=/^\s*/.exec(p.text)[0],ie=(0,Ke.SS)(r,W);(Z!=ie||C.from<p.from+Z.length)&&(l[p.from]=W,S.push({from:p.from,to:p.from+Z.length,insert:ie}))});return f.changes.empty||i(r.update(f,{userEvent:"indent"})),!0},Ns=({state:r,dispatch:i})=>r.readOnly?!1:(i(r.update(Ls(r,(l,c)=>{c.push({from:l.from,insert:r.facet(Ke.c)})}),{userEvent:"input.indent"})),!0),$s=({state:r,dispatch:i})=>r.readOnly?!1:(i(r.update(Ls(r,(l,c)=>{let f=/^\s*/.exec(l.text)[0];if(!f)return;let p=(0,z.IS)(f,r.tabSize),S=0,C=(0,Ke.SS)(r,Math.max(0,p-(0,Ke.y1)(r)));for(;S<f.length&&S<C.length&&f.charCodeAt(S)==C.charCodeAt(S);)S++;c.push({from:l.from+S,to:l.from+f.length,insert:C.slice(S)})}),{userEvent:"delete.dedent"})),!0),wl=({state:r,dispatch:i})=>r.selection.ranges.some(l=>!l.empty)?Ns({state:r,dispatch:i}):(i(r.update(r.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),Co=[{key:"Ctrl-b",run:Be,shift:U,preventDefault:!0},{key:"Ctrl-f",run:et,shift:ne},{key:"Ctrl-p",run:mt,shift:q},{key:"Ctrl-n",run:st,shift:de},{key:"Ctrl-a",run:fi,shift:Ni},{key:"Ctrl-e",run:hi,shift:Ai},{key:"Ctrl-d",run:an},{key:"Ctrl-h",run:ln},{key:"Ctrl-k",run:ss},{key:"Ctrl-Alt-h",run:wi},{key:"Ctrl-o",run:L},{key:"Ctrl-t",run:H},{key:"Ctrl-v",run:si}],os=[{key:"ArrowLeft",run:Be,shift:U,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ye,shift:Ze,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Vt,shift:Ci,preventDefault:!0},{key:"ArrowRight",run:et,shift:ne,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Te,shift:Kt,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Nt,shift:ni,preventDefault:!0},{key:"ArrowUp",run:mt,shift:q,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$i,shift:Hi},{mac:"Ctrl-ArrowUp",run:St,shift:Ie},{key:"ArrowDown",run:st,shift:de,preventDefault:!0},{mac:"Cmd-ArrowDown",run:ns,shift:di},{mac:"Ctrl-ArrowDown",run:si,shift:ot},{key:"PageUp",run:St,shift:Ie},{key:"PageDown",run:si,shift:ot},{key:"Home",run:rt,shift:ei,preventDefault:!0},{key:"Mod-Home",run:$i,shift:Hi},{key:"End",run:_t,shift:_e,preventDefault:!0},{key:"Mod-End",run:ns,shift:di},{key:"Enter",run:rs},{key:"Mod-a",run:wn},{key:"Backspace",run:ln,shift:ln},{key:"Delete",run:an},{key:"Mod-Backspace",mac:"Alt-Backspace",run:wi},{key:"Mod-Delete",mac:"Alt-Delete",run:cn},{mac:"Mod-Backspace",run:T},{mac:"Mod-Delete",run:g}].concat(Co.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),Fs=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Ct,shift:R},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ge,shift:B},{key:"Alt-ArrowUp",run:be},{key:"Shift-Alt-ArrowUp",run:yt},{key:"Alt-ArrowDown",run:ve},{key:"Shift-Alt-ArrowDown",run:Yt},{key:"Escape",run:Vi},{key:"Mod-Enter",run:On},{key:"Alt-l",mac:"Ctrl-l",run:Fn},{key:"Mod-i",run:Sn,preventDefault:!0},{key:"Mod-[",run:$s},{key:"Mod-]",run:Ns},{key:"Mod-Alt-\\",run:Is},{key:"Shift-Mod-k",run:yi},{key:"Shift-Mod-\\",run:I},{key:"Mod-/",run:jt},{key:"Alt-A",run:Ee}].concat(os),Ao={key:"Tab",run:Ns,shift:$s};function ri(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var i=1,l=arguments[1];if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){for(var c in l)if(Object.prototype.hasOwnProperty.call(l,c)){var f=l[c];typeof f=="string"?r.setAttribute(c,f):f!=null&&(r[c]=f)}i++}for(;i<arguments.length;i++)Sr(r,arguments[i]);return r}function Sr(r,i){if(typeof i=="string")r.appendChild(document.createTextNode(i));else if(i!=null)if(i.nodeType!=null)r.appendChild(i);else if(Array.isArray(i))for(var l=0;l<i.length;l++)Sr(r,i[l]);else throw new RangeError("Unsupported child node: "+i)}const Ws=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class Cn{constructor(i,l,c=0,f=i.length,p,S){this.test=S,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=i.iterRange(c,f),this.bufferStart=c,this.normalize=p?C=>p(Ws(C)):Ws,this.query=this.normalize(l)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return(0,z.gm)(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let i=this.peek();if(i<0)return this.done=!0,this;let l=(0,z.bg)(i),c=this.bufferStart+this.bufferPos;this.bufferPos+=(0,z.nZ)(i);let f=this.normalize(l);for(let p=0,S=c;;p++){let C=f.charCodeAt(p),W=this.match(C,S,this.bufferPos+this.bufferStart);if(p==f.length-1){if(W)return this.value=W,this;break}S==c&&p<l.length&&l.charCodeAt(p)==C&&S++}}}match(i,l,c){let f=null;for(let p=0;p<this.matches.length;p+=2){let S=this.matches[p],C=!1;this.query.charCodeAt(S)==i&&(S==this.query.length-1?f={from:this.matches[p+1],to:c}:(this.matches[p]++,C=!0)),C||(this.matches.splice(p,2),p-=2)}return this.query.charCodeAt(0)==i&&(this.query.length==1?f={from:l,to:c}:this.matches.push(1,l)),f&&this.test&&!this.test(f.from,f.to,this.buffer,this.bufferStart)&&(f=null),f}}typeof Symbol!="undefined"&&(Cn.prototype[Symbol.iterator]=function(){return this});const zs={from:-1,to:-1,match:/.*/.exec("")},An="gm"+(/x/.unicode==null?"":"u");class Wn{constructor(i,l,c,f=0,p=i.length){if(this.text=i,this.to=p,this.curLine="",this.done=!1,this.value=zs,/\\[sWDnr]|\n|\r|\[\^/.test(l))return new Or(i,l,c,f,p);this.re=new RegExp(l,An+(c!=null&&c.ignoreCase?"i":"")),this.test=c==null?void 0:c.test,this.iter=i.iter();let S=i.lineAt(f);this.curLineStart=S.from,this.matchPos=ls(i,f),this.getLine(this.curLineStart)}getLine(i){this.iter.next(i),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let i=this.matchPos-this.curLineStart;;){this.re.lastIndex=i;let l=this.matchPos<=this.to&&this.re.exec(this.curLine);if(l){let c=this.curLineStart+l.index,f=c+l[0].length;if(this.matchPos=ls(this.text,f+(c==f?1:0)),c==this.curLineStart+this.curLine.length&&this.nextLine(),(c<f||c>this.value.to)&&(!this.test||this.test(c,f,l)))return this.value={from:c,to:f,match:l},this;i=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),i=0;else return this.done=!0,this}}}const Hs=new WeakMap;class Tn{constructor(i,l){this.from=i,this.text=l}get to(){return this.from+this.text.length}static get(i,l,c){let f=Hs.get(i);if(!f||f.from>=c||f.to<=l){let C=new Tn(l,i.sliceString(l,c));return Hs.set(i,C),C}if(f.from==l&&f.to==c)return f;let{text:p,from:S}=f;return S>l&&(p=i.sliceString(l,S)+p,S=l),f.to<c&&(p+=i.sliceString(f.to,c)),Hs.set(i,new Tn(S,p)),new Tn(l,p.slice(l-S,c-S))}}class Or{constructor(i,l,c,f,p){this.text=i,this.to=p,this.done=!1,this.value=zs,this.matchPos=ls(i,f),this.re=new RegExp(l,An+(c!=null&&c.ignoreCase?"i":"")),this.test=c==null?void 0:c.test,this.flat=Tn.get(i,f,this.chunkEnd(f+5e3))}chunkEnd(i){return i>=this.to?this.to:this.text.lineAt(i).to}next(){for(;;){let i=this.re.lastIndex=this.matchPos-this.flat.from,l=this.re.exec(this.flat.text);if(l&&!l[0]&&l.index==i&&(this.re.lastIndex=i+1,l=this.re.exec(this.flat.text)),l){let c=this.flat.from+l.index,f=c+l[0].length;if((this.flat.to>=this.to||l.index+l[0].length<=this.flat.text.length-10)&&(!this.test||this.test(c,f,l)))return this.value={from:c,to:f,match:l},this.matchPos=ls(this.text,f+(c==f?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Tn.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol!="undefined"&&(Wn.prototype[Symbol.iterator]=Or.prototype[Symbol.iterator]=function(){return this});function To(r){try{return new RegExp(r,An),!0}catch(i){return!1}}function ls(r,i){if(i>=r.length)return i;let l=r.lineAt(i),c;for(;i<l.to&&(c=l.text.charCodeAt(i-l.from))>=56320&&c<57344;)i++;return i}function Vs(r){let i=String(r.state.doc.lineAt(r.state.selection.main.head).number),l=ri("input",{class:"cm-textfield",name:"line",value:i}),c=ri("form",{class:"cm-gotoLine",onkeydown:p=>{p.keyCode==27?(p.preventDefault(),r.dispatch({effects:Pi.of(!1)}),r.focus()):p.keyCode==13&&(p.preventDefault(),f())},onsubmit:p=>{p.preventDefault(),f()}},ri("label",r.state.phrase("Go to line"),": ",l)," ",ri("button",{class:"cm-button",type:"submit"},r.state.phrase("go")));function f(){let p=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(l.value);if(!p)return;let{state:S}=r,C=S.doc.lineAt(S.selection.main.head),[,W,Z,ie,we]=p,Ue=ie?+ie.slice(1):0,At=Z?+Z:C.number;if(Z&&we){let zi=At/100;W&&(zi=zi*(W=="-"?-1:1)+C.number/S.doc.lines),At=Math.round(S.doc.lines*zi)}else Z&&W&&(At=At*(W=="-"?-1:1)+C.number);let Xt=S.doc.line(Math.max(1,Math.min(S.doc.lines,At))),ai=z.jT.cursor(Xt.from+Math.max(0,Math.min(Ue,Xt.length)));r.dispatch({effects:[Pi.of(!1),ce.tk.scrollIntoView(ai.from,{y:"center"})],selection:ai}),r.focus()}return{dom:c}}const Pi=z.Py.define(),Ri=z.QQ.define({create(){return!0},update(r,i){for(let l of i.effects)l.is(Pi)&&(r=l.value);return r},provide:r=>ce.mH.from(r,i=>i?Vs:null)}),Cr=r=>{let i=(0,ce.Sd)(r,Vs);if(!i){let l=[Pi.of(!0)];r.state.field(Ri,!1)==null&&l.push(z.Py.appendConfig.of([Ri,Po])),r.dispatch({effects:l}),i=(0,ce.Sd)(r,Vs)}return i&&i.dom.querySelector("input").select(),!0},Po=ce.tk.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Ar={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},js=z.r$.define({combine(r){return(0,z.BO)(r,Ar,{highlightWordAroundCursor:(i,l)=>i||l,minSelectionLength:Math.min,maxMatches:Math.min})}});function Tr(r){let i=[Dr,Mr];return r&&i.push(js.of(r)),i}const Pr=ce.p.mark({class:"cm-selectionMatch"}),Mo=ce.p.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Qs(r,i,l,c){return(l==0||r(i.sliceDoc(l-1,l))!=z.D0.Word)&&(c==i.doc.length||r(i.sliceDoc(c,c+1))!=z.D0.Word)}function Do(r,i,l,c){return r(i.sliceDoc(l,l+1))==z.D0.Word&&r(i.sliceDoc(c-1,c))==z.D0.Word}const Mr=ce.lg.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let i=r.state.facet(js),{state:l}=r,c=l.selection;if(c.ranges.length>1)return ce.p.none;let f=c.main,p,S=null;if(f.empty){if(!i.highlightWordAroundCursor)return ce.p.none;let W=l.wordAt(f.head);if(!W)return ce.p.none;S=l.charCategorizer(f.head),p=l.sliceDoc(W.from,W.to)}else{let W=f.to-f.from;if(W<i.minSelectionLength||W>200)return ce.p.none;if(i.wholeWords){if(p=l.sliceDoc(f.from,f.to),S=l.charCategorizer(f.head),!(Qs(S,l,f.from,f.to)&&Do(S,l,f.from,f.to)))return ce.p.none}else if(p=l.sliceDoc(f.from,f.to),!p)return ce.p.none}let C=[];for(let W of r.visibleRanges){let Z=new Cn(l.doc,p,W.from,W.to);for(;!Z.next().done;){let{from:ie,to:we}=Z.value;if((!S||Qs(S,l,ie,we))&&(f.empty&&ie<=f.from&&we>=f.to?C.push(Mo.range(ie,we)):(ie>=f.to||we<=f.from)&&C.push(Pr.range(ie,we)),C.length>i.maxMatches))return ce.p.none}}return ce.p.set(C)}},{decorations:r=>r.decorations}),Dr=ce.tk.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Rr=({state:r,dispatch:i})=>{let{selection:l}=r,c=z.jT.create(l.ranges.map(f=>r.wordAt(f.head)||z.jT.cursor(f.head)),l.mainIndex);return c.eq(l)?!1:(i(r.update({selection:c})),!0)};function Br(r,i){let{main:l,ranges:c}=r.selection,f=r.wordAt(l.head),p=f&&f.from==l.from&&f.to==l.to;for(let S=!1,C=new Cn(r.doc,i,c[c.length-1].to);;)if(C.next(),C.done){if(S)return null;C=new Cn(r.doc,i,0,Math.max(0,c[c.length-1].from-1)),S=!0}else{if(S&&c.some(W=>W.from==C.value.from))continue;if(p){let W=r.wordAt(C.value.from);if(!W||W.from!=C.value.from||W.to!=C.value.to)continue}return C.value}}const Ro=({state:r,dispatch:i})=>{let{ranges:l}=r.selection;if(l.some(p=>p.from===p.to))return Rr({state:r,dispatch:i});let c=r.sliceDoc(l[0].from,l[0].to);if(r.selection.ranges.some(p=>r.sliceDoc(p.from,p.to)!=c))return!1;let f=Br(r,c);return f?(i(r.update({selection:r.selection.addRange(z.jT.range(f.from,f.to),!1),effects:ce.tk.scrollIntoView(f.to)})),!0):!1},fn=z.r$.define({combine(r){return(0,z.BO)(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:i=>new $o(i),scrollToMatch:i=>ce.tk.scrollIntoView(i)})}});function Bo(r){return r?[fn.of(r),Qn]:Qn}class Er{constructor(i){this.search=i.search,this.caseSensitive=!!i.caseSensitive,this.literal=!!i.literal,this.regexp=!!i.regexp,this.replace=i.replace||"",this.valid=!!this.search&&(!this.regexp||To(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!i.wholeWord}unquote(i){return this.literal?i:i.replace(/\\([nrt\\])/g,(l,c)=>c=="n"?`
`:c=="r"?"\r":c=="t"?"	":"\\")}eq(i){return this.search==i.search&&this.replace==i.replace&&this.caseSensitive==i.caseSensitive&&this.regexp==i.regexp&&this.wholeWord==i.wholeWord}create(){return this.regexp?new Fr(this):new Nr(this)}getCursor(i,l=0,c){let f=i.doc?i:z.yy.create({doc:i});return c==null&&(c=f.doc.length),this.regexp?un(this,f,l,c):qi(this,f,l,c)}}class Lr{constructor(i){this.spec=i}}function qi(r,i,l,c){return new Cn(i.doc,r.unquoted,l,c,r.caseSensitive?void 0:f=>f.toLowerCase(),r.wholeWord?Ir(i.doc,i.charCategorizer(i.selection.main.head)):void 0)}function Ir(r,i){return(l,c,f,p)=>((p>l||p+f.length<c)&&(p=Math.max(0,l-2),f=r.sliceString(p,Math.min(r.length,c+2))),(i(zn(f,l-p))!=z.D0.Word||i(as(f,l-p))!=z.D0.Word)&&(i(as(f,c-p))!=z.D0.Word||i(zn(f,c-p))!=z.D0.Word))}class Nr extends Lr{constructor(i){super(i)}nextMatch(i,l,c){let f=qi(this.spec,i,c,i.doc.length).nextOverlapping();return f.done&&(f=qi(this.spec,i,0,l).nextOverlapping()),f.done?null:f.value}prevMatchInRange(i,l,c){for(let f=c;;){let p=Math.max(l,f-1e4-this.spec.unquoted.length),S=qi(this.spec,i,p,f),C=null;for(;!S.nextOverlapping().done;)C=S.value;if(C)return C;if(p==l)return null;f-=1e4}}prevMatch(i,l,c){return this.prevMatchInRange(i,0,l)||this.prevMatchInRange(i,c,i.doc.length)}getReplacement(i){return this.spec.unquote(this.spec.replace)}matchAll(i,l){let c=qi(this.spec,i,0,i.doc.length),f=[];for(;!c.next().done;){if(f.length>=l)return null;f.push(c.value)}return f}highlight(i,l,c,f){let p=qi(this.spec,i,Math.max(0,l-this.spec.unquoted.length),Math.min(c+this.spec.unquoted.length,i.doc.length));for(;!p.next().done;)f(p.value.from,p.value.to)}}function un(r,i,l,c){return new Wn(i.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?$r(i.charCategorizer(i.selection.main.head)):void 0},l,c)}function zn(r,i){return r.slice((0,z.cp)(r,i,!1),i)}function as(r,i){return r.slice(i,(0,z.cp)(r,i))}function $r(r){return(i,l,c)=>!c[0].length||(r(zn(c.input,c.index))!=z.D0.Word||r(as(c.input,c.index))!=z.D0.Word)&&(r(as(c.input,c.index+c[0].length))!=z.D0.Word||r(zn(c.input,c.index+c[0].length))!=z.D0.Word)}class Fr extends Lr{nextMatch(i,l,c){let f=un(this.spec,i,c,i.doc.length).next();return f.done&&(f=un(this.spec,i,0,l).next()),f.done?null:f.value}prevMatchInRange(i,l,c){for(let f=1;;f++){let p=Math.max(l,c-f*1e4),S=un(this.spec,i,p,c),C=null;for(;!S.next().done;)C=S.value;if(C&&(p==l||C.from>p+10))return C;if(p==l)return null}}prevMatch(i,l,c){return this.prevMatchInRange(i,0,l)||this.prevMatchInRange(i,c,i.doc.length)}getReplacement(i){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,(l,c)=>c=="$"?"$":c=="&"?i.match[0]:c!="0"&&+c<i.match.length?i.match[c]:l)}matchAll(i,l){let c=un(this.spec,i,0,i.doc.length),f=[];for(;!c.next().done;){if(f.length>=l)return null;f.push(c.value)}return f}highlight(i,l,c,f){let p=un(this.spec,i,Math.max(0,l-250),Math.min(c+250,i.doc.length));for(;!p.next().done;)f(p.value.from,p.value.to)}}const Pn=z.Py.define(),Li=z.Py.define(),Zt=z.QQ.define({create(r){return new hs(fs(r).create(),null)},update(r,i){for(let l of i.effects)l.is(Pn)?r=new hs(l.value.create(),r.panel):l.is(Li)&&(r=new hs(r.query,l.value?Hn:null));return r},provide:r=>ce.mH.from(r,i=>i.panel)});function Xs(r){let i=r.field(Zt,!1);return i?i.query.spec:fs(r)}function Ti(r){var i;return((i=r.field(Zt,!1))===null||i===void 0?void 0:i.panel)!=null}class hs{constructor(i,l){this.query=i,this.panel=l}}const Bi=ce.p.mark({class:"cm-searchMatch"}),vi=ce.p.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Eo=ce.lg.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Zt))}update(r){let i=r.state.field(Zt);(i!=r.startState.field(Zt)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(i))}highlight({query:r,panel:i}){if(!i||!r.spec.valid)return ce.p.none;let{view:l}=this,c=new z.f_;for(let f=0,p=l.visibleRanges,S=p.length;f<S;f++){let{from:C,to:W}=p[f];for(;f<S-1&&W>p[f+1].from-2*250;)W=p[++f].to;r.highlight(l.state,C,W,(Z,ie)=>{let we=l.state.selection.ranges.some(Ue=>Ue.from==Z&&Ue.to==ie);c.add(Z,ie,we?vi:Bi)})}return c.finish()}},{decorations:r=>r.decorations});function Mn(r){return i=>{let l=i.state.field(Zt,!1);return l&&l.query.spec.valid?r(i,l):zr(i)}}const cs=Mn((r,{query:i})=>{let{to:l}=r.state.selection.main,c=i.nextMatch(r.state,l,l);if(!c)return!1;let f=z.jT.single(c.from,c.to),p=r.state.facet(fn);return r.dispatch({selection:f,effects:[Rn(r,c),p.scrollToMatch(f.main,r)],userEvent:"select.search"}),Vn(r),!0}),Dn=Mn((r,{query:i})=>{let{state:l}=r,{from:c}=l.selection.main,f=i.prevMatch(l,c,c);if(!f)return!1;let p=z.jT.single(f.from,f.to),S=r.state.facet(fn);return r.dispatch({selection:p,effects:[Rn(r,f),S.scrollToMatch(p.main,r)],userEvent:"select.search"}),Vn(r),!0}),Lo=Mn((r,{query:i})=>{let l=i.matchAll(r.state,1e3);return!l||!l.length?!1:(r.dispatch({selection:z.jT.create(l.map(c=>z.jT.range(c.from,c.to))),userEvent:"select.search.matches"}),!0)}),Io=({state:r,dispatch:i})=>{let l=r.selection;if(l.ranges.length>1||l.main.empty)return!1;let{from:c,to:f}=l.main,p=[],S=0;for(let C=new Cn(r.doc,r.sliceDoc(c,f));!C.next().done;){if(p.length>1e3)return!1;C.value.from==c&&(S=p.length),p.push(z.jT.range(C.value.from,C.value.to))}return i(r.update({selection:z.jT.create(p,S),userEvent:"select.search.matches"})),!0},Wr=Mn((r,{query:i})=>{let{state:l}=r,{from:c,to:f}=l.selection.main;if(l.readOnly)return!1;let p=i.nextMatch(l,c,c);if(!p)return!1;let S=[],C,W,Z=[];if(p.from==c&&p.to==f&&(W=l.toText(i.getReplacement(p)),S.push({from:p.from,to:p.to,insert:W}),p=i.nextMatch(l,p.from,p.to),Z.push(ce.tk.announce.of(l.phrase("replaced match on line $",l.doc.lineAt(c).number)+"."))),p){let ie=S.length==0||S[0].from>=p.to?0:p.to-p.from-W.length;C=z.jT.single(p.from-ie,p.to-ie),Z.push(Rn(r,p)),Z.push(l.facet(fn).scrollToMatch(C.main,r))}return r.dispatch({changes:S,selection:C,effects:Z,userEvent:"input.replace"}),!0}),No=Mn((r,{query:i})=>{if(r.state.readOnly)return!1;let l=i.matchAll(r.state,1e9).map(f=>{let{from:p,to:S}=f;return{from:p,to:S,insert:i.getReplacement(f)}});if(!l.length)return!1;let c=r.state.phrase("replaced $ matches",l.length)+".";return r.dispatch({changes:l,effects:ce.tk.announce.of(c),userEvent:"input.replace.all"}),!0});function Hn(r){return r.state.facet(fn).createPanel(r)}function fs(r,i){var l,c,f,p,S;let C=r.selection.main,W=C.empty||C.to>C.from+100?"":r.sliceDoc(C.from,C.to);if(i&&!W)return i;let Z=r.facet(fn);return new Er({search:((l=i==null?void 0:i.literal)!==null&&l!==void 0?l:Z.literal)?W:W.replace(/\n/g,"\\n"),caseSensitive:(c=i==null?void 0:i.caseSensitive)!==null&&c!==void 0?c:Z.caseSensitive,literal:(f=i==null?void 0:i.literal)!==null&&f!==void 0?f:Z.literal,regexp:(p=i==null?void 0:i.regexp)!==null&&p!==void 0?p:Z.regexp,wholeWord:(S=i==null?void 0:i.wholeWord)!==null&&S!==void 0?S:Z.wholeWord})}function Js(r){let i=(0,ce.Sd)(r,Hn);return i&&i.dom.querySelector("[main-field]")}function Vn(r){let i=Js(r);i&&i==r.root.activeElement&&i.select()}const zr=r=>{let i=r.state.field(Zt,!1);if(i&&i.panel){let l=Js(r);if(l&&l!=r.root.activeElement){let c=fs(r.state,i.query.spec);c.valid&&r.dispatch({effects:Pn.of(c)}),l.focus(),l.select()}}else r.dispatch({effects:[Li.of(!0),i?Pn.of(fs(r.state,i.query.spec)):z.Py.appendConfig.of(Qn)]});return!0},jn=r=>{let i=r.state.field(Zt,!1);if(!i||!i.panel)return!1;let l=(0,ce.Sd)(r,Hn);return l&&l.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:Li.of(!1)}),!0},us=[{key:"Mod-f",run:zr,scope:"editor search-panel"},{key:"F3",run:cs,shift:Dn,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:cs,shift:Dn,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:jn,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Io},{key:"Mod-Alt-g",run:Cr},{key:"Mod-d",run:Ro,preventDefault:!0}];class $o{constructor(i){this.view=i;let l=this.query=i.state.field(Zt).query.spec;this.commit=this.commit.bind(this),this.searchField=ri("input",{value:l.search,placeholder:Mi(i,"Find"),"aria-label":Mi(i,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=ri("input",{value:l.replace,placeholder:Mi(i,"Replace"),"aria-label":Mi(i,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=ri("input",{type:"checkbox",name:"case",form:"",checked:l.caseSensitive,onchange:this.commit}),this.reField=ri("input",{type:"checkbox",name:"re",form:"",checked:l.regexp,onchange:this.commit}),this.wordField=ri("input",{type:"checkbox",name:"word",form:"",checked:l.wholeWord,onchange:this.commit});function c(f,p,S){return ri("button",{class:"cm-button",name:f,onclick:p,type:"button"},S)}this.dom=ri("div",{onkeydown:f=>this.keydown(f),class:"cm-search"},[this.searchField,c("next",()=>cs(i),[Mi(i,"next")]),c("prev",()=>Dn(i),[Mi(i,"previous")]),c("select",()=>Lo(i),[Mi(i,"all")]),ri("label",null,[this.caseField,Mi(i,"match case")]),ri("label",null,[this.reField,Mi(i,"regexp")]),ri("label",null,[this.wordField,Mi(i,"by word")]),...i.state.readOnly?[]:[ri("br"),this.replaceField,c("replace",()=>Wr(i),[Mi(i,"replace")]),c("replaceAll",()=>No(i),[Mi(i,"replace all")])],ri("button",{name:"close",onclick:()=>jn(i),"aria-label":Mi(i,"close"),type:"button"},["\xD7"])])}commit(){let i=new Er({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});i.eq(this.query)||(this.query=i,this.view.dispatch({effects:Pn.of(i)}))}keydown(i){(0,ce.$1)(this.view,i,"search-panel")?i.preventDefault():i.keyCode==13&&i.target==this.searchField?(i.preventDefault(),(i.shiftKey?Dn:cs)(this.view)):i.keyCode==13&&i.target==this.replaceField&&(i.preventDefault(),Wr(this.view))}update(i){for(let l of i.transactions)for(let c of l.effects)c.is(Pn)&&!c.value.eq(this.query)&&this.setQuery(c.value)}setQuery(i){this.query=i,this.searchField.value=i.search,this.replaceField.value=i.replace,this.caseField.checked=i.caseSensitive,this.reField.checked=i.regexp,this.wordField.checked=i.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(fn).top}}function Mi(r,i){return r.state.phrase(i)}const ds=30,Ki=/[\s\.,:;?!]/;function Rn(r,{from:i,to:l}){let c=r.state.doc.lineAt(i),f=r.state.doc.lineAt(l).to,p=Math.max(c.from,i-ds),S=Math.min(f,l+ds),C=r.state.sliceDoc(p,S);if(p!=c.from){for(let W=0;W<ds;W++)if(!Ki.test(C[W+1])&&Ki.test(C[W])){C=C.slice(W);break}}if(S!=f){for(let W=C.length-1;W>C.length-ds;W--)if(!Ki.test(C[W-1])&&Ki.test(C[W])){C=C.slice(0,W);break}}return ce.tk.announce.of(`${r.state.phrase("current match")}. ${C} ${r.state.phrase("on line")} ${c.number}.`)}const Us=ce.tk.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),Qn=[Zt,z.Wl.low(Eo),Us];class Gs{constructor(i,l,c){this.state=i,this.pos=l,this.explicit=c,this.abortListeners=[]}tokenBefore(i){let l=(0,Ke.qz)(this.state).resolveInner(this.pos,-1);for(;l&&i.indexOf(l.name)<0;)l=l.parent;return l?{from:l.from,to:this.pos,text:this.state.sliceDoc(l.from,this.pos),type:l.type}:null}matchBefore(i){let l=this.state.doc.lineAt(this.pos),c=Math.max(l.from,this.pos-250),f=l.text.slice(c-l.from,this.pos-l.from),p=f.search(Ys(i,!1));return p<0?null:{from:c+p,to:this.pos,text:f.slice(p)}}get aborted(){return this.abortListeners==null}addEventListener(i,l){i=="abort"&&this.abortListeners&&this.abortListeners.push(l)}}function qs(r){let i=Object.keys(r).join(""),l=/\w/.test(i);return l&&(i=i.replace(/\w/g,"")),`[${l?"\\w":""}${i.replace(/[^\w\s]/g,"\\$&")}]`}function Hr(r){let i=Object.create(null),l=Object.create(null);for(let{label:f}of r){i[f[0]]=!0;for(let p=1;p<f.length;p++)l[f[p]]=!0}let c=qs(i)+qs(l)+"*$";return[new RegExp("^"+c),new RegExp(c)]}function Ks(r){let i=r.map(f=>typeof f=="string"?{label:f}:f),[l,c]=i.every(f=>/^\w+$/.test(f.label))?[/\w*$/,/\w+$/]:Hr(i);return f=>{let p=f.matchBefore(c);return p||f.explicit?{from:p?p.from:f.pos,options:i,validFor:l}:null}}function Sl(r,i){return l=>{for(let c=syntaxTree(l.state).resolveInner(l.pos,-1);c;c=c.parent){if(r.indexOf(c.name)>-1)return i(l);if(c.type.isTop)break}return null}}function ps(r,i){return l=>{for(let c=syntaxTree(l.state).resolveInner(l.pos,-1);c;c=c.parent){if(r.indexOf(c.name)>-1)return null;if(c.type.isTop)break}return i(l)}}class Vr{constructor(i,l,c,f){this.completion=i,this.source=l,this.match=c,this.score=f}}function Yi(r){return r.selection.main.from}function Ys(r,i){var l;let{source:c}=r,f=i&&c[0]!="^",p=c[c.length-1]!="$";return!f&&!p?r:new RegExp(`${f?"^":""}(?:${c})${p?"$":""}`,(l=r.flags)!==null&&l!==void 0?l:r.ignoreCase?"i":"")}const Zs=z.q6.define();function jr(r,i,l,c){let{main:f}=r.selection,p=l-f.from,S=c-f.from;return Object.assign(Object.assign({},r.changeByRange(C=>C!=f&&l!=c&&r.sliceDoc(C.from+p,C.from+S)!=r.sliceDoc(l,c)?{range:C}:{changes:{from:C.from+p,to:c==f.from?C.to:C.from+S,insert:i},range:z.jT.cursor(C.from+p+i.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Qr=new WeakMap;function Fo(r){if(!Array.isArray(r))return r;let i=Qr.get(r);return i||Qr.set(r,i=Ks(r)),i}const gs=z.Py.define(),Xn=z.Py.define();class Wo{constructor(i){this.pattern=i,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let l=0;l<i.length;){let c=(0,z.gm)(i,l),f=(0,z.nZ)(c);this.chars.push(c);let p=i.slice(l,l+f),S=p.toUpperCase();this.folded.push((0,z.gm)(S==p?p.toLowerCase():S,0)),l+=f}this.astral=i.length!=this.chars.length}ret(i,l){return this.score=i,this.matched=l,this}match(i){if(this.pattern.length==0)return this.ret(-100,[]);if(i.length<this.pattern.length)return null;let{chars:l,folded:c,any:f,precise:p,byWord:S}=this;if(l.length==1){let ci=(0,z.gm)(i,0),Ji=(0,z.nZ)(ci),Ii=Ji==i.length?0:-100;if(ci!=l[0])if(ci==c[0])Ii+=-200;else return null;return this.ret(Ii,[0,Ji])}let C=i.indexOf(this.pattern);if(C==0)return this.ret(i.length==this.pattern.length?0:-100,[0,this.pattern.length]);let W=l.length,Z=0;if(C<0){for(let ci=0,Ji=Math.min(i.length,200);ci<Ji&&Z<W;){let Ii=(0,z.gm)(i,ci);(Ii==l[Z]||Ii==c[Z])&&(f[Z++]=ci),ci+=(0,z.nZ)(Ii)}if(Z<W)return null}let ie=0,we=0,Ue=!1,At=0,Xt=-1,ai=-1,zi=/[a-z]/.test(i),nn=!0;for(let ci=0,Ji=Math.min(i.length,200),Ii=0;ci<Ji&&we<W;){let Si=(0,z.gm)(i,ci);C<0&&(ie<W&&Si==l[ie]&&(p[ie++]=ci),At<W&&(Si==l[At]||Si==c[At]?(At==0&&(Xt=ci),ai=ci+1,At++):At=0));let sn,rn=Si<255?Si>=48&&Si<=57||Si>=97&&Si<=122?2:Si>=65&&Si<=90?1:0:(sn=(0,z.bg)(Si))!=sn.toLowerCase()?1:sn!=sn.toUpperCase()?2:0;(!ci||rn==1&&zi||Ii==0&&rn!=0)&&(l[we]==Si||c[we]==Si&&(Ue=!0)?S[we++]=ci:S.length&&(nn=!1)),Ii=rn,ci+=(0,z.nZ)(Si)}return we==W&&S[0]==0&&nn?this.result(-100+(Ue?-200:0),S,i):At==W&&Xt==0?this.ret(-200-i.length+(ai==i.length?0:-100),[0,ai]):C>-1?this.ret(-700-i.length,[C,C+this.pattern.length]):At==W?this.ret(-900-i.length,[Xt,ai]):we==W?this.result(-100+(Ue?-200:0)+-700+(nn?0:-1100),S,i):l.length==2?null:this.result((f[0]?-700:0)+-200+-1100,f,i)}result(i,l,c){let f=[],p=0;for(let S of l){let C=S+(this.astral?(0,z.nZ)((0,z.gm)(c,S)):1);p&&f[p-1]==S?f[p-1]=C:(f[p++]=S,f[p++]=C)}return this.ret(i-c.length,f)}}class _s{constructor(i){this.pattern=i,this.matched=[],this.score=0,this.folded=i.toLowerCase()}match(i){if(i.length<this.pattern.length)return null;let l=i.slice(0,this.pattern.length),c=l==this.pattern?0:l.toLowerCase()==this.folded?-200:null;return c==null?null:(this.matched=[0,l.length],this.score=c+(i.length==this.pattern.length?0:-100),this)}}const xi=z.r$.define({combine(r){return(0,z.BO)(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Xr,filterStrict:!1,compareCompletions:(i,l)=>i.label.localeCompare(l.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(i,l)=>i&&l,closeOnBlur:(i,l)=>i&&l,icons:(i,l)=>i&&l,tooltipClass:(i,l)=>c=>er(i(c),l(c)),optionClass:(i,l)=>c=>er(i(c),l(c)),addToOptions:(i,l)=>i.concat(l),filterStrict:(i,l)=>i||l})}});function er(r,i){return r?i?r+" "+i:r:i}function Xr(r,i,l,c,f,p){let S=r.textDirection==ce.Nm.RTL,C=S,W=!1,Z="top",ie,we,Ue=i.left-f.left,At=f.right-i.right,Xt=c.right-c.left,ai=c.bottom-c.top;if(C&&Ue<Math.min(Xt,At)?C=!1:!C&&At<Math.min(Xt,Ue)&&(C=!0),Xt<=(C?Ue:At))ie=Math.max(f.top,Math.min(l.top,f.bottom-ai))-i.top,we=Math.min(400,C?Ue:At);else{W=!0,we=Math.min(400,(S?i.right:f.right-i.left)-30);let ci=f.bottom-i.bottom;ci>=ai||ci>i.top?ie=l.bottom-i.top:(Z="bottom",ie=i.bottom-l.top)}let zi=(i.bottom-i.top)/p.offsetHeight,nn=(i.right-i.left)/p.offsetWidth;return{style:`${Z}: ${ie/zi}px; max-width: ${we/nn}px`,class:"cm-completionInfo-"+(W?S?"left-narrow":"right-narrow":C?"left":"right")}}function zo(r){let i=r.addToOptions.slice();return r.icons&&i.push({render(l){let c=document.createElement("div");return c.classList.add("cm-completionIcon"),l.type&&c.classList.add(...l.type.split(/\s+/g).map(f=>"cm-completionIcon-"+f)),c.setAttribute("aria-hidden","true"),c},position:20}),i.push({render(l,c,f,p){let S=document.createElement("span");S.className="cm-completionLabel";let C=l.displayLabel||l.label,W=0;for(let Z=0;Z<p.length;){let ie=p[Z++],we=p[Z++];ie>W&&S.appendChild(document.createTextNode(C.slice(W,ie)));let Ue=S.appendChild(document.createElement("span"));Ue.appendChild(document.createTextNode(C.slice(ie,we))),Ue.className="cm-completionMatchedText",W=we}return W<C.length&&S.appendChild(document.createTextNode(C.slice(W))),S},position:50},{render(l){if(!l.detail)return null;let c=document.createElement("span");return c.className="cm-completionDetail",c.textContent=l.detail,c},position:80}),i.sort((l,c)=>l.position-c.position).map(l=>l.render)}function Jt(r,i,l){if(r<=l)return{from:0,to:r};if(i<0&&(i=0),i<=r>>1){let f=Math.floor(i/l);return{from:f*l,to:(f+1)*l}}let c=Math.floor((r-i)/l);return{from:r-(c+1)*l,to:r-c*l}}class Ho{constructor(i,l,c){this.view=i,this.stateField=l,this.applyCompletion=c,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:W=>this.placeInfo(W),key:this},this.space=null,this.currentClass="";let f=i.state.field(l),{options:p,selected:S}=f.open,C=i.state.facet(xi);this.optionContent=zo(C),this.optionClass=C.optionClass,this.tooltipClass=C.tooltipClass,this.range=Jt(p.length,S,C.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(i.state),this.dom.addEventListener("mousedown",W=>{let{options:Z}=i.state.field(l).open;for(let ie=W.target,we;ie&&ie!=this.dom;ie=ie.parentNode)if(ie.nodeName=="LI"&&(we=/-(\d+)$/.exec(ie.id))&&+we[1]<Z.length){this.applyCompletion(i,Z[+we[1]]),W.preventDefault();return}}),this.dom.addEventListener("focusout",W=>{let Z=i.state.field(this.stateField,!1);Z&&Z.tooltip&&i.state.facet(xi).closeOnBlur&&W.relatedTarget!=i.contentDOM&&i.dispatch({effects:Xn.of(null)})}),this.showOptions(p,f.id)}mount(){this.updateSel()}showOptions(i,l){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(i,l,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(i){var l;let c=i.state.field(this.stateField),f=i.startState.field(this.stateField);if(this.updateTooltipClass(i.state),c!=f){let{options:p,selected:S,disabled:C}=c.open;(!f.open||f.open.options!=p)&&(this.range=Jt(p.length,S,i.state.facet(xi).maxRenderedOptions),this.showOptions(p,c.id)),this.updateSel(),C!=((l=f.open)===null||l===void 0?void 0:l.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!C)}}updateTooltipClass(i){let l=this.tooltipClass(i);if(l!=this.currentClass){for(let c of this.currentClass.split(" "))c&&this.dom.classList.remove(c);for(let c of l.split(" "))c&&this.dom.classList.add(c);this.currentClass=l}}positioned(i){this.space=i,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let i=this.view.state.field(this.stateField),l=i.open;if((l.selected>-1&&l.selected<this.range.from||l.selected>=this.range.to)&&(this.range=Jt(l.options.length,l.selected,this.view.state.facet(xi).maxRenderedOptions),this.showOptions(l.options,i.id)),this.updateSelectedOption(l.selected)){this.destroyInfo();let{completion:c}=l.options[l.selected],{info:f}=c;if(!f)return;let p=typeof f=="string"?document.createTextNode(f):f(c);if(!p)return;"then"in p?p.then(S=>{S&&this.view.state.field(this.stateField,!1)==i&&this.addInfoPane(S,c)}).catch(S=>(0,ce.OO)(this.view.state,S,"completion info")):this.addInfoPane(p,c)}}addInfoPane(i,l){this.destroyInfo();let c=this.info=document.createElement("div");if(c.className="cm-tooltip cm-completionInfo",i.nodeType!=null)c.appendChild(i),this.infoDestroy=null;else{let{dom:f,destroy:p}=i;c.appendChild(f),this.infoDestroy=p||null}this.dom.appendChild(c),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(i){let l=null;for(let c=this.list.firstChild,f=this.range.from;c;c=c.nextSibling,f++)c.nodeName!="LI"||!c.id?f--:f==i?c.hasAttribute("aria-selected")||(c.setAttribute("aria-selected","true"),l=c):c.hasAttribute("aria-selected")&&c.removeAttribute("aria-selected");return l&&ms(this.list,l),l}measureInfo(){let i=this.dom.querySelector("[aria-selected]");if(!i||!this.info)return null;let l=this.dom.getBoundingClientRect(),c=this.info.getBoundingClientRect(),f=i.getBoundingClientRect(),p=this.space;if(!p){let S=this.dom.ownerDocument.defaultView||window;p={left:0,top:0,right:S.innerWidth,bottom:S.innerHeight}}return f.top>Math.min(p.bottom,l.bottom)-10||f.bottom<Math.max(p.top,l.top)+10?null:this.view.state.facet(xi).positionInfo(this.view,l,f,c,p,this.dom)}placeInfo(i){this.info&&(i?(i.style&&(this.info.style.cssText=i.style),this.info.className="cm-tooltip cm-completionInfo "+(i.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(i,l,c){const f=document.createElement("ul");f.id=l,f.setAttribute("role","listbox"),f.setAttribute("aria-expanded","true"),f.setAttribute("aria-label",this.view.state.phrase("Completions"));let p=null;for(let S=c.from;S<c.to;S++){let{completion:C,match:W}=i[S],{section:Z}=C;if(Z){let Ue=typeof Z=="string"?Z:Z.name;if(Ue!=p&&(S>c.from||c.from==0))if(p=Ue,typeof Z!="string"&&Z.header)f.appendChild(Z.header(Z));else{let At=f.appendChild(document.createElement("completion-section"));At.textContent=Ue}}const ie=f.appendChild(document.createElement("li"));ie.id=l+"-"+S,ie.setAttribute("role","option");let we=this.optionClass(C);we&&(ie.className=we);for(let Ue of this.optionContent){let At=Ue(C,this.view.state,this.view,W);At&&ie.appendChild(At)}}return c.from&&f.classList.add("cm-completionListIncompleteTop"),c.to<i.length&&f.classList.add("cm-completionListIncompleteBottom"),f}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Jr(r,i){return l=>new Ho(l,r,i)}function ms(r,i){let l=r.getBoundingClientRect(),c=i.getBoundingClientRect(),f=l.height/r.offsetHeight;c.top<l.top?r.scrollTop-=(l.top-c.top)/f:c.bottom>l.bottom&&(r.scrollTop+=(c.bottom-l.bottom)/f)}function tr(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function Vo(r,i){let l=[],c=null,f=Z=>{l.push(Z);let{section:ie}=Z.completion;if(ie){c||(c=[]);let we=typeof ie=="string"?ie:ie.name;c.some(Ue=>Ue.name==we)||c.push(typeof ie=="string"?{name:we}:ie)}},p=i.facet(xi);for(let Z of r)if(Z.hasResult()){let ie=Z.result.getMatch;if(Z.result.filter===!1)for(let we of Z.result.options)f(new Vr(we,Z.source,ie?ie(we):[],1e9-l.length));else{let we=i.sliceDoc(Z.from,Z.to),Ue,At=p.filterStrict?new _s(we):new Wo(we);for(let Xt of Z.result.options)if(Ue=At.match(Xt.label)){let ai=Xt.displayLabel?ie?ie(Xt,Ue.matched):[]:Ue.matched;f(new Vr(Xt,Z.source,ai,Ue.score+(Xt.boost||0)))}}}if(c){let Z=Object.create(null),ie=0,we=(Ue,At)=>{var Xt,ai;return((Xt=Ue.rank)!==null&&Xt!==void 0?Xt:1e9)-((ai=At.rank)!==null&&ai!==void 0?ai:1e9)||(Ue.name<At.name?-1:1)};for(let Ue of c.sort(we))ie-=1e5,Z[Ue.name]=ie;for(let Ue of l){let{section:At}=Ue.completion;At&&(Ue.score+=Z[typeof At=="string"?At:At.name])}}let S=[],C=null,W=p.compareCompletions;for(let Z of l.sort((ie,we)=>we.score-ie.score||W(ie.completion,we.completion))){let ie=Z.completion;!C||C.label!=ie.label||C.detail!=ie.detail||C.type!=null&&ie.type!=null&&C.type!=ie.type||C.apply!=ie.apply||C.boost!=ie.boost?S.push(Z):tr(Z.completion)>tr(C)&&(S[S.length-1]=Z),C=Z.completion}return S}class Bn{constructor(i,l,c,f,p,S){this.options=i,this.attrs=l,this.tooltip=c,this.timestamp=f,this.selected=p,this.disabled=S}setSelected(i,l){return i==this.selected||i>=this.options.length?this:new Bn(this.options,ir(l,i),this.tooltip,this.timestamp,i,this.disabled)}static build(i,l,c,f,p){let S=Vo(i,l);if(!S.length)return f&&i.some(W=>W.state==1)?new Bn(f.options,f.attrs,f.tooltip,f.timestamp,f.selected,!0):null;let C=l.facet(xi).selectOnOpen?0:-1;if(f&&f.selected!=C&&f.selected!=-1){let W=f.options[f.selected].completion;for(let Z=0;Z<S.length;Z++)if(S[Z].completion==W){C=Z;break}}return new Bn(S,ir(c,C),{pos:i.reduce((W,Z)=>Z.hasResult()?Math.min(W,Z.from):W,1e8),create:Xo,above:p.aboveCursor},f?f.timestamp:Date.now(),C,!1)}map(i){return new Bn(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:i.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dn{constructor(i,l,c){this.active=i,this.id=l,this.open=c}static start(){return new dn(Gr,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(i){let{state:l}=i,c=l.facet(xi),p=(c.override||l.languageDataAt("autocomplete",Yi(l)).map(Fo)).map(C=>(this.active.find(Z=>Z.source==C)||new ui(C,this.active.some(Z=>Z.state!=0)?1:0)).update(i,c));p.length==this.active.length&&p.every((C,W)=>C==this.active[W])&&(p=this.active);let S=this.open;S&&i.docChanged&&(S=S.map(i.changes)),i.selection||p.some(C=>C.hasResult()&&i.changes.touchesRange(C.from,C.to))||!jo(p,this.active)?S=Bn.build(p,l,this.id,S,c):S&&S.disabled&&!p.some(C=>C.state==1)&&(S=null),!S&&p.every(C=>C.state!=1)&&p.some(C=>C.hasResult())&&(p=p.map(C=>C.hasResult()?new ui(C.source,0):C));for(let C of i.effects)C.is(pn)&&(S=S&&S.setSelected(C.value,this.id));return p==this.active&&S==this.open?this:new dn(p,this.id,S)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:Ur}}function jo(r,i){if(r==i)return!0;for(let l=0,c=0;;){for(;l<r.length&&!r[l].hasResult;)l++;for(;c<i.length&&!i[c].hasResult;)c++;let f=l==r.length,p=c==i.length;if(f||p)return f==p;if(r[l++].result!=i[c++].result)return!1}}const Ur={"aria-autocomplete":"list"};function ir(r,i){let l={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return i>-1&&(l["aria-activedescendant"]=r+"-"+i),l}const Gr=[];function nr(r,i){if(r.isUserEvent("input.complete")){let l=r.annotation(Zs);if(l&&i.activateOnCompletion(l))return"input"}return r.isUserEvent("input.type")?"input":r.isUserEvent("delete.backward")?"delete":null}class ui{constructor(i,l,c=-1){this.source=i,this.state=l,this.explicitPos=c}hasResult(){return!1}update(i,l){let c=nr(i,l),f=this;c?f=f.handleUserEvent(i,c,l):i.docChanged?f=f.handleChange(i):i.selection&&f.state!=0&&(f=new ui(f.source,0));for(let p of i.effects)if(p.is(gs))f=new ui(f.source,1,p.value?Yi(i.state):-1);else if(p.is(Xn))f=new ui(f.source,0);else if(p.is(sr))for(let S of p.value)S.source==f.source&&(f=S);return f}handleUserEvent(i,l,c){return l=="delete"||!c.activateOnTyping?this.map(i.changes):new ui(this.source,1)}handleChange(i){return i.changes.touchesRange(Yi(i.startState))?new ui(this.source,0):this.map(i.changes)}map(i){return i.empty||this.explicitPos<0?this:new ui(this.source,this.state,i.mapPos(this.explicitPos))}}class En extends ui{constructor(i,l,c,f,p){super(i,2,l),this.result=c,this.from=f,this.to=p}hasResult(){return!0}handleUserEvent(i,l,c){var f;let p=this.result;p.map&&!i.changes.empty&&(p=p.map(p,i.changes));let S=i.changes.mapPos(this.from),C=i.changes.mapPos(this.to,1),W=Yi(i.state);if((this.explicitPos<0?W<=S:W<this.from)||W>C||!p||l=="delete"&&Yi(i.startState)==this.from)return new ui(this.source,l=="input"&&c.activateOnTyping?1:0);let Z=this.explicitPos<0?-1:i.changes.mapPos(this.explicitPos);return Qo(p.validFor,i.state,S,C)?new En(this.source,Z,p,S,C):p.update&&(p=p.update(p,S,C,new Gs(i.state,W,Z>=0)))?new En(this.source,Z,p,p.from,(f=p.to)!==null&&f!==void 0?f:Yi(i.state)):new ui(this.source,1,Z)}handleChange(i){return i.changes.touchesRange(this.from,this.to)?new ui(this.source,0):this.map(i.changes)}map(i){return i.empty?this:(this.result.map?this.result.map(this.result,i):this.result)?new En(this.source,this.explicitPos<0?-1:i.mapPos(this.explicitPos),this.result,i.mapPos(this.from),i.mapPos(this.to,1)):new ui(this.source,0)}}function Qo(r,i,l,c){if(!r)return!1;let f=i.sliceDoc(l,c);return typeof r=="function"?r(f,l,c,i):Ys(r,!0).test(f)}const sr=z.Py.define({map(r,i){return r.map(l=>l.map(i))}}),pn=z.Py.define(),gi=z.QQ.define({create(){return dn.start()},update(r,i){return r.update(i)},provide:r=>[ce.hJ.from(r,i=>i.tooltip),ce.tk.contentAttributes.from(r,i=>i.attrs)]});function ys(r,i){const l=i.completion.apply||i.completion.label;let c=r.state.field(gi).active.find(f=>f.source==i.source);return c instanceof En?(typeof l=="string"?r.dispatch(Object.assign(Object.assign({},jr(r.state,l,c.from,c.to)),{annotations:Zs.of(i.completion)})):l(r,i.completion,c.from,c.to),!0):!1}const Xo=Jr(gi,ys);function bs(r,i="option"){return l=>{let c=l.state.field(gi,!1);if(!c||!c.open||c.open.disabled||Date.now()-c.open.timestamp<l.state.facet(xi).interactionDelay)return!1;let f=1,p;i=="page"&&(p=(0,ce.gB)(l,c.open.tooltip))&&(f=Math.max(2,Math.floor(p.dom.offsetHeight/p.dom.querySelector("li").offsetHeight)-1));let{length:S}=c.open.options,C=c.open.selected>-1?c.open.selected+f*(r?1:-1):r?0:S-1;return C<0?C=i=="page"?0:S-1:C>=S&&(C=i=="page"?S-1:0),l.dispatch({effects:pn.of(C)}),!0}}const Jo=r=>{let i=r.state.field(gi,!1);return r.state.readOnly||!i||!i.open||i.open.selected<0||i.open.disabled||Date.now()-i.open.timestamp<r.state.facet(xi).interactionDelay?!1:ys(r,i.open.options[i.open.selected])},vs=r=>r.state.field(gi,!1)?(r.dispatch({effects:gs.of(!0)}),!0):!1,qr=r=>{let i=r.state.field(gi,!1);return!i||!i.active.some(l=>l.state!=0)?!1:(r.dispatch({effects:Xn.of(null)}),!0)};class Kr{constructor(i,l){this.active=i,this.context=l,this.time=Date.now(),this.updates=[],this.done=void 0}}const Ln=50,Uo=1e3,Ol=ce.lg.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let i of r.state.field(gi).active)i.state==1&&this.startQuery(i)}update(r){let i=r.state.field(gi),l=r.state.facet(xi);if(!r.selectionSet&&!r.docChanged&&r.startState.field(gi)==i)return;let c=r.transactions.some(p=>(p.selection||p.docChanged)&&!nr(p,l));for(let p=0;p<this.running.length;p++){let S=this.running[p];if(c||S.updates.length+r.transactions.length>Ln&&Date.now()-S.time>Uo){for(let C of S.context.abortListeners)try{C()}catch(W){(0,ce.OO)(this.view.state,W)}S.context.abortListeners=null,this.running.splice(p--,1)}else S.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(p=>p.effects.some(S=>S.is(gs)))&&(this.pendingStart=!0);let f=this.pendingStart?50:l.activateOnTypingDelay;if(this.debounceUpdate=i.active.some(p=>p.state==1&&!this.running.some(S=>S.active.source==p.source))?setTimeout(()=>this.startUpdate(),f):-1,this.composing!=0)for(let p of r.transactions)nr(p,l)=="input"?this.composing=2:this.composing==2&&p.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,i=r.field(gi);for(let l of i.active)l.state==1&&!this.running.some(c=>c.active.source==l.source)&&this.startQuery(l)}startQuery(r){let{state:i}=this.view,l=Yi(i),c=new Gs(i,l,r.explicitPos==l),f=new Kr(r,c);this.running.push(f),Promise.resolve(r.source(c)).then(p=>{f.context.aborted||(f.done=p||null,this.scheduleAccept())},p=>{this.view.dispatch({effects:Xn.of(null)}),(0,ce.OO)(this.view.state,p)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(xi).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let i=[],l=this.view.state.facet(xi);for(let c=0;c<this.running.length;c++){let f=this.running[c];if(f.done===void 0)continue;if(this.running.splice(c--,1),f.done){let S=new En(f.active.source,f.active.explicitPos,f.done,f.done.from,(r=f.done.to)!==null&&r!==void 0?r:Yi(f.updates.length?f.updates[0].startState:this.view.state));for(let C of f.updates)S=S.update(C,l);if(S.hasResult()){i.push(S);continue}}let p=this.view.state.field(gi).active.find(S=>S.source==f.active.source);if(p&&p.state==1)if(f.done==null){let S=new ui(f.active.source,0);for(let C of f.updates)S=S.update(C,l);S.state!=1&&i.push(S)}else this.startQuery(p)}i.length&&this.view.dispatch({effects:sr.of(i)})}},{eventHandlers:{blur(r){let i=this.view.state.field(gi,!1);if(i&&i.tooltip&&this.view.state.facet(xi).closeOnBlur){let l=i.open&&(0,ce.gB)(this.view,i.open.tooltip);(!l||!l.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Xn.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:gs.of(!1)}),20),this.composing=0}}}),Yr=typeof navigator=="object"&&/Win/.test(navigator.platform),Go=z.Wl.highest(ce.tk.domEventHandlers({keydown(r,i){let l=i.state.field(gi,!1);if(!l||!l.open||l.open.disabled||l.open.selected<0||r.key.length>1||r.ctrlKey&&!(Yr&&r.altKey)||r.metaKey)return!1;let c=l.open.options[l.open.selected],f=l.active.find(S=>S.source==c.source),p=c.completion.commitCharacters||f.result.commitCharacters;return p&&p.indexOf(r.key)>-1&&ys(i,c),!1}})),rr=ce.tk.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class qo{constructor(i,l,c,f){this.field=i,this.line=l,this.from=c,this.to=f}}class Jn{constructor(i,l,c){this.field=i,this.from=l,this.to=c}map(i){let l=i.mapPos(this.from,-1,MapMode.TrackDel),c=i.mapPos(this.to,1,MapMode.TrackDel);return l==null||c==null?null:new Jn(this.field,l,c)}}class or{constructor(i,l){this.lines=i,this.fieldPositions=l}instantiate(i,l){let c=[],f=[l],p=i.doc.lineAt(l),S=/^\s*/.exec(p.text)[0];for(let W of this.lines){if(c.length){let Z=S,ie=/^\t*/.exec(W)[0].length;for(let we=0;we<ie;we++)Z+=i.facet(indentUnit);f.push(l+Z.length-ie),W=Z+W.slice(ie)}c.push(W),l+=W.length+1}let C=this.fieldPositions.map(W=>new Jn(W.field,f[W.line]+W.from,f[W.line]+W.to));return{text:c,ranges:C}}static parse(i){let l=[],c=[],f=[],p;for(let S of i.split(/\r\n?|\n/)){for(;p=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(S);){let C=p[1]?+p[1]:null,W=p[2]||p[3]||"",Z=-1,ie=W.replace(/\\[{}]/g,we=>we[1]);for(let we=0;we<l.length;we++)(C!=null?l[we].seq==C:ie&&l[we].name==ie)&&(Z=we);if(Z<0){let we=0;for(;we<l.length&&(C==null||l[we].seq!=null&&l[we].seq<C);)we++;l.splice(we,0,{seq:C,name:ie}),Z=we;for(let Ue of f)Ue.field>=Z&&Ue.field++}f.push(new qo(Z,c.length,p.index,p.index+ie.length)),S=S.slice(0,p.index)+W+S.slice(p.index+p[0].length)}S=S.replace(/\\([{}])/g,(C,W,Z)=>{for(let ie of f)ie.line==c.length&&ie.from>Z&&(ie.from--,ie.to--);return W}),c.push(S)}return new or(c,f)}}let Zr=ce.p.widget({widget:new class extends ce.l9{toDOM(){let r=document.createElement("span");return r.className="cm-snippetFieldPosition",r}ignoreEvent(){return!1}}}),Un=ce.p.mark({class:"cm-snippetField"});class In{constructor(i,l){this.ranges=i,this.active=l,this.deco=ce.p.set(i.map(c=>(c.from==c.to?Zr:Un).range(c.from,c.to)))}map(i){let l=[];for(let c of this.ranges){let f=c.map(i);if(!f)return null;l.push(f)}return new In(l,this.active)}selectionInsideField(i){return i.ranges.every(l=>this.ranges.some(c=>c.field==this.active&&c.from<=l.from&&c.to>=l.to))}}const Gn=z.Py.define({map(r,i){return r&&r.map(i)}}),_r=z.Py.define(),gn=z.QQ.define({create(){return null},update(r,i){for(let l of i.effects){if(l.is(Gn))return l.value;if(l.is(_r)&&r)return new In(r.ranges,l.value)}return r&&i.docChanged&&(r=r.map(i.changes)),r&&i.selection&&!r.selectionInsideField(i.selection)&&(r=null),r},provide:r=>ce.tk.decorations.from(r,i=>i?i.deco:ce.p.none)});function qn(r,i){return z.jT.create(r.filter(l=>l.field==i).map(l=>z.jT.range(l.from,l.to)))}function lr(r){let i=or.parse(r);return(l,c,f,p)=>{let{text:S,ranges:C}=i.instantiate(l.state,f),W={changes:{from:f,to:p,insert:Text.of(S)},scrollIntoView:!0,annotations:c?[Zs.of(c),Transaction.userEvent.of("input.complete")]:void 0};if(C.length&&(W.selection=qn(C,0)),C.some(Z=>Z.field>0)){let Z=new In(C,0),ie=W.effects=[Gn.of(Z)];l.state.field(gn,!1)===void 0&&ie.push(StateEffect.appendConfig.of([gn,Zo,_o,rr]))}l.dispatch(l.state.update(W))}}function eo(r){return({state:i,dispatch:l})=>{let c=i.field(gn,!1);if(!c||r<0&&c.active==0)return!1;let f=c.active+r,p=r>0&&!c.ranges.some(S=>S.field==f+r);return l(i.update({selection:qn(c.ranges,f),effects:Gn.of(p?null:new In(c.ranges,f)),scrollIntoView:!0})),!0}}const Ko=({state:r,dispatch:i})=>r.field(gn,!1)?(i(r.update({effects:Gn.of(null)})),!0):!1,ar=eo(1),Yo=eo(-1);function hr(r){let i=r.field(gn,!1);return!!(i&&i.ranges.some(l=>l.field==i.active+1))}function Cl(r){let i=r.field(gn,!1);return!!(i&&i.active>0)}const to=[{key:"Tab",run:ar,shift:Yo},{key:"Escape",run:Ko}],io=z.r$.define({combine(r){return r.length?r[0]:to}}),Zo=z.Wl.highest(ce.$f.compute([io],r=>r.facet(io)));function Al(r,i){return Object.assign(Object.assign({},i),{apply:lr(r)})}const _o=ce.tk.domEventHandlers({mousedown(r,i){let l=i.state.field(gn,!1),c;if(!l||(c=i.posAtCoords({x:r.clientX,y:r.clientY}))==null)return!1;let f=l.ranges.find(p=>p.from<=c&&p.to>=c);return!f||f.field==l.active?!1:(i.dispatch({selection:qn(l.ranges,f.field),effects:Gn.of(l.ranges.some(p=>p.field>f.field)?new In(l.ranges,f.field):null),scrollIntoView:!0}),!0)}});function el(r){let i=r.replace(/[\]\-\\]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${i}]+`,"ug")}catch(l){return new RegExp(`[w${i}]`,"g")}}function cr(r,i){return new RegExp(i(r.source),r.unicode?"u":"")}const tl=null;function il(r){return tl[r]||(tl[r]=new WeakMap)}function no(r,i,l,c,f){for(let p=r.iterLines(),S=0;!p.next().done;){let{value:C}=p,W;for(i.lastIndex=0;W=i.exec(C);)if(!c[W[0]]&&S+W.index!=f&&(l.push({type:"text",label:W[0]}),c[W[0]]=!0,l.length>=2e3))return;S+=C.length+1}}function so(r,i,l,c,f){let p=r.length>=1e3,S=p&&i.get(r);if(S)return S;let C=[],W=Object.create(null);if(r.children){let Z=0;for(let ie of r.children){if(ie.length>=1e3)for(let we of so(ie,i,l,c-Z,f-Z))W[we.label]||(W[we.label]=!0,C.push(we));else no(ie,l,C,W,f-Z);Z+=ie.length+1}}else no(r,l,C,W,f);return p&&C.length<2e3&&i.set(r,C),C}const Tl=r=>{let i=r.state.languageDataAt("wordChars",r.pos).join(""),l=el(i),c=r.matchBefore(cr(l,S=>S+"$"));if(!c&&!r.explicit)return null;let f=c?c.from:r.pos,p=so(r.state.doc,il(i),l,5e4,f);return{from:f,options:p,validFor:cr(l,S=>"^"+S)}},Kn={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Qi=z.Py.define({map(r,i){let l=i.mapPos(r,-1,z.gc.TrackAfter);return l==null?void 0:l}}),fr=new class extends z.uU{};fr.startSide=1,fr.endSide=-1;const ro=z.QQ.define({create(){return z.Xs.empty},update(r,i){if(r=r.map(i.changes),i.selection){let l=i.state.doc.lineAt(i.selection.main.head);r=r.update({filter:c=>c>=l.from&&c<=l.to})}for(let l of i.effects)l.is(Qi)&&(r=r.update({add:[fr.range(l.value,l.value+1)]}));return r}});function oo(){return[sl,ro]}const ur="()[]{}<>";function lo(r){for(let i=0;i<ur.length;i+=2)if(ur.charCodeAt(i)==r)return ur.charAt(i+1);return(0,z.bg)(r<128?r:r+1)}function ao(r,i){return r.languageDataAt("closeBrackets",i)[0]||Kn}const nl=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),sl=ce.tk.inputHandler.of((r,i,l,c)=>{if((nl?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let f=r.state.selection.main;if(c.length>2||c.length==2&&(0,z.nZ)((0,z.gm)(c,0))==1||i!=f.from||l!=f.to)return!1;let p=Pl(r.state,c);return p?(r.dispatch(p),!0):!1}),ho=[{key:"Backspace",run:({state:r,dispatch:i})=>{if(r.readOnly)return!1;let c=ao(r,r.selection.main.head).brackets||Kn.brackets,f=null,p=r.changeByRange(S=>{if(S.empty){let C=fo(r.doc,S.head);for(let W of c)if(W==C&&mn(r.doc,S.head)==lo((0,z.gm)(W,0)))return{changes:{from:S.head-W.length,to:S.head+W.length},range:z.jT.cursor(S.head-W.length)}}return{range:f=S}});return f||i(r.update(p,{scrollIntoView:!0,userEvent:"delete.backward"})),!f}}];function Pl(r,i){let l=ao(r,r.selection.main.head),c=l.brackets||Kn.brackets;for(let f of c){let p=lo((0,z.gm)(f,0));if(i==f)return p==f?ol(r,f,c.indexOf(f+f+f)>-1,l):ks(r,f,p,l.before||Kn.before);if(i==p&&co(r,r.selection.main.from))return rl(r,f,p)}return null}function co(r,i){let l=!1;return r.field(ro).between(0,r.doc.length,c=>{c==i&&(l=!0)}),l}function mn(r,i){let l=r.sliceString(i,i+2);return l.slice(0,(0,z.nZ)((0,z.gm)(l,0)))}function fo(r,i){let l=r.sliceString(i-2,i);return(0,z.nZ)((0,z.gm)(l,0))==l.length?l:l.slice(1)}function ks(r,i,l,c){let f=null,p=r.changeByRange(S=>{if(!S.empty)return{changes:[{insert:i,from:S.from},{insert:l,from:S.to}],effects:Qi.of(S.to+i.length),range:z.jT.range(S.anchor+i.length,S.head+i.length)};let C=mn(r.doc,S.head);return!C||/\s/.test(C)||c.indexOf(C)>-1?{changes:{insert:i+l,from:S.head},effects:Qi.of(S.head+i.length),range:z.jT.cursor(S.head+i.length)}:{range:f=S}});return f?null:r.update(p,{scrollIntoView:!0,userEvent:"input.type"})}function rl(r,i,l){let c=null,f=r.changeByRange(p=>p.empty&&mn(r.doc,p.head)==l?{changes:{from:p.head,to:p.head+l.length,insert:l},range:z.jT.cursor(p.head+l.length)}:c={range:p});return c?null:r.update(f,{scrollIntoView:!0,userEvent:"input.type"})}function ol(r,i,l,c){let f=c.stringPrefixes||Kn.stringPrefixes,p=null,S=r.changeByRange(C=>{if(!C.empty)return{changes:[{insert:i,from:C.from},{insert:i,from:C.to}],effects:Qi.of(C.to+i.length),range:z.jT.range(C.anchor+i.length,C.head+i.length)};let W=C.head,Z=mn(r.doc,W),ie;if(Z==i){if(ws(r,W))return{changes:{insert:i+i,from:W},effects:Qi.of(W+i.length),range:z.jT.cursor(W+i.length)};if(co(r,W)){let Ue=l&&r.sliceDoc(W,W+i.length*3)==i+i+i?i+i+i:i;return{changes:{from:W,to:W+Ue.length,insert:Ue},range:z.jT.cursor(W+Ue.length)}}}else{if(l&&r.sliceDoc(W-2*i.length,W)==i+i&&(ie=Zn(r,W-2*i.length,f))>-1&&ws(r,ie))return{changes:{insert:i+i+i+i,from:W},effects:Qi.of(W+i.length),range:z.jT.cursor(W+i.length)};if(r.charCategorizer(W)(Z)!=z.D0.Word&&Zn(r,W,f)>-1&&!Yn(r,W,i,f))return{changes:{insert:i+i,from:W},effects:Qi.of(W+i.length),range:z.jT.cursor(W+i.length)}}return{range:p=C}});return p?null:r.update(S,{scrollIntoView:!0,userEvent:"input.type"})}function ws(r,i){let l=(0,Ke.qz)(r).resolveInner(i+1);return l.parent&&l.from==i}function Yn(r,i,l,c){let f=(0,Ke.qz)(r).resolveInner(i,-1),p=c.reduce((S,C)=>Math.max(S,C.length),0);for(let S=0;S<5;S++){let C=r.sliceDoc(f.from,Math.min(f.to,f.from+l.length+p)),W=C.indexOf(l);if(!W||W>-1&&c.indexOf(C.slice(0,W))>-1){let ie=f.firstChild;for(;ie&&ie.from==f.from&&ie.to-ie.from>l.length+W;){if(r.sliceDoc(ie.to-l.length,ie.to)==l)return!1;ie=ie.firstChild}return!0}let Z=f.to==i&&f.parent;if(!Z)break;f=Z}return!1}function Zn(r,i,l){let c=r.charCategorizer(i);if(c(r.sliceDoc(i-1,i))!=z.D0.Word)return i;for(let f of l){let p=i-f.length;if(r.sliceDoc(p,i)==f&&c(r.sliceDoc(p-1,p))!=z.D0.Word)return p}return-1}function ll(r={}){return[Go,gi,xi.of(r),Ol,Ss,rr]}const uo=[{key:"Ctrl-Space",run:vs},{key:"Escape",run:qr},{key:"ArrowDown",run:bs(!0)},{key:"ArrowUp",run:bs(!1)},{key:"PageDown",run:bs(!0,"page")},{key:"PageUp",run:bs(!1,"page")},{key:"Enter",run:Jo}],Ss=z.Wl.highest(ce.$f.computeN([xi],r=>r.facet(xi).defaultKeymap?[uo]:[]));function Ml(r){let i=r.field(gi,!1);return i&&i.active.some(l=>l.state==1)?"pending":i&&i.active.some(l=>l.state!=0)?"active":null}const po=new WeakMap;function Dl(r){var i;let l=(i=r.field(gi,!1))===null||i===void 0?void 0:i.open;if(!l||l.disabled)return[];let c=po.get(l.options);return c||po.set(l.options,c=l.options.map(f=>f.completion)),c}function Rl(r){var i;let l=(i=r.field(gi,!1))===null||i===void 0?void 0:i.open;return l&&!l.disabled&&l.selected>=0?l.options[l.selected].completion:null}function Nl(r){var i;let l=(i=r.field(gi,!1))===null||i===void 0?void 0:i.open;return l&&!l.disabled&&l.selected>=0?l.selected:null}function Bl(r){return pn.of(r)}class El{constructor(i,l,c){this.from=i,this.to=l,this.diagnostic=c}}class Nn{constructor(i,l,c){this.diagnostics=i,this.panel=l,this.selected=c}static init(i,l,c){let f=i,p=c.facet(bn).markerFilter;p&&(f=p(f,c));let S=ce.p.set(f.map(C=>C.from==C.to||C.from==C.to-1&&c.doc.lineAt(C.from).to==C.from?ce.p.widget({widget:new yr(C),diagnostic:C}).range(C.from):ce.p.mark({attributes:{class:"cm-lintRange cm-lintRange-"+C.severity+(C.markClass?" "+C.markClass:"")},diagnostic:C,inclusive:!0}).range(C.from,C.to)),!0);return new Nn(S,l,Zi(S))}}function Zi(r,i=null,l=0){let c=null;return r.between(l,1e9,(f,p,{spec:S})=>{if(!(i&&S.diagnostic!=i))return c=new El(f,p,S.diagnostic),!1}),c}function al(r,i){let l=i.pos,c=i.end||l,f=r.state.facet(bn).hideOn(r,l,c);if(f!=null)return f;let p=r.startState.doc.lineAt(i.pos);return!!(r.effects.some(S=>S.is(yn))||r.changes.touchesRange(p.from,Math.max(p.to,c)))}function go(r,i){return r.field(li,!1)?i:i.concat(z.Py.appendConfig.of(o))}function hl(r,i){return{effects:go(r,[yn.of(i)])}}const yn=z.Py.define(),Os=z.Py.define(),Cs=z.Py.define(),li=z.QQ.define({create(){return new Nn(ce.p.none,null,null)},update(r,i){if(i.docChanged&&r.diagnostics.size){let l=r.diagnostics.map(i.changes),c=null,f=r.panel;if(r.selected){let p=i.changes.mapPos(r.selected.from,1);c=Zi(l,r.selected.diagnostic,p)||Zi(l,null,p)}!l.size&&f&&i.state.facet(bn).autoPanel&&(f=null),r=new Nn(l,f,c)}for(let l of i.effects)if(l.is(yn)){let c=i.state.facet(bn).autoPanel?l.value.length?es.open:null:r.panel;r=Nn.init(l.value,c,i.state)}else l.is(Os)?r=new Nn(r.diagnostics,l.value?es.open:null,r.selected):l.is(Cs)&&(r=new Nn(r.diagnostics,r.panel,l.value));return r},provide:r=>[ce.mH.from(r,i=>i.panel),ce.tk.decorations.from(r,i=>i.diagnostics)]});function dr(r){let i=r.field(li,!1);return i?i.diagnostics.size:0}const cl=ce.p.mark({class:"cm-lintRange cm-lintRange-active",inclusive:!0});function _n(r,i,l){let{diagnostics:c}=r.state.field(li),f=[],p=2e8,S=0;c.between(i-(l<0?1:0),i+(l>0?1:0),(W,Z,{spec:ie})=>{i>=W&&i<=Z&&(W==Z||(i>W||l>0)&&(i<Z||l<0))&&(f.push(ie.diagnostic),p=Math.min(W,p),S=Math.max(Z,S))});let C=r.state.facet(bn).tooltipFilter;return C&&(f=C(f,r.state)),f.length?{pos:p,end:S,above:r.state.doc.lineAt(p).to<S,create(){return{dom:mo(r,f)}}}:null}function mo(r,i){return ri("ul",{class:"cm-tooltip-lint"},i.map(l=>vn(r,l,!1)))}const pr=r=>{let i=r.state.field(li,!1);(!i||!i.panel)&&r.dispatch({effects:go(r.state,[Os.of(!0)])});let l=(0,ce.Sd)(r,es.open);return l&&l.dom.querySelector(".cm-panel-lint ul").focus(),!0},gr=r=>{let i=r.state.field(li,!1);return!i||!i.panel?!1:(r.dispatch({effects:Os.of(!1)}),!0)},fl=r=>{let i=r.state.field(li,!1);if(!i)return!1;let l=r.state.selection.main,c=i.diagnostics.iter(l.to+1);return!c.value&&(c=i.diagnostics.iter(0),!c.value||c.from==l.from&&c.to==l.to)?!1:(r.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0}),!0)},ul=r=>{let{state:i}=r,l=i.field(li,!1);if(!l)return!1;let c=i.selection.main,f,p,S,C;return l.diagnostics.between(0,i.doc.length,(W,Z)=>{Z<c.to&&(f==null||f<W)&&(f=W,p=Z),(S==null||W>S)&&(S=W,C=Z)}),S==null||f==null&&S==c.from?!1:(r.dispatch({selection:{anchor:f!=null?f:S,head:p!=null?p:C},scrollIntoView:!0}),!0)},mr=[{key:"Mod-Shift-m",run:pr,preventDefault:!0},{key:"F8",run:fl}],yo=null,bn=z.r$.define({combine(r){return Object.assign({sources:r.map(i=>i.source).filter(i=>i!=null)},(0,z.BO)(r.map(i=>i.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(i,l)=>i?l?c=>i(c)||l(c):i:l}))}});function dl(r,i={}){return[bn.of({source:r,config:i}),yo,o]}function Ll(r){let i=r.plugin(yo);i&&i.force()}function bo(r){let i=[];if(r)e:for(let{name:l}of r){for(let c=0;c<l.length;c++){let f=l[c];if(/[a-zA-Z]/.test(f)&&!i.some(p=>p.toLowerCase()==f.toLowerCase())){i.push(f);continue e}}i.push("")}return i}function vn(r,i,l){var c;let f=l?bo(i.actions):[];return ri("li",{class:"cm-diagnostic cm-diagnostic-"+i.severity},ri("span",{class:"cm-diagnosticText"},i.renderMessage?i.renderMessage(r):i.message),(c=i.actions)===null||c===void 0?void 0:c.map((p,S)=>{let C=!1,W=Ue=>{if(Ue.preventDefault(),C)return;C=!0;let At=Zi(r.state.field(li).diagnostics,i);At&&p.apply(r,At.from,At.to)},{name:Z}=p,ie=f[S]?Z.indexOf(f[S]):-1,we=ie<0?Z:[Z.slice(0,ie),ri("u",Z.slice(ie,ie+1)),Z.slice(ie+1)];return ri("button",{type:"button",class:"cm-diagnosticAction",onclick:W,onmousedown:W,"aria-label":` Action: ${Z}${ie<0?"":` (access key "${f[S]})"`}.`},we)}),i.source&&ri("div",{class:"cm-diagnosticSource"},i.source))}class yr extends ce.l9{constructor(i){super(),this.diagnostic=i}eq(i){return i.diagnostic==this.diagnostic}toDOM(){return ri("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class As{constructor(i,l){this.diagnostic=l,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=vn(i,l,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class es{constructor(i){this.view=i,this.items=[];let l=f=>{if(f.keyCode==27)gr(this.view),this.view.focus();else if(f.keyCode==38||f.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(f.keyCode==40||f.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(f.keyCode==36)this.moveSelection(0);else if(f.keyCode==35)this.moveSelection(this.items.length-1);else if(f.keyCode==13)this.view.focus();else if(f.keyCode>=65&&f.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:p}=this.items[this.selectedIndex],S=bo(p.actions);for(let C=0;C<S.length;C++)if(S[C].toUpperCase().charCodeAt(0)==f.keyCode){let W=Zi(this.view.state.field(li).diagnostics,p);W&&p.actions[C].apply(i,W.from,W.to)}}else return;f.preventDefault()},c=f=>{for(let p=0;p<this.items.length;p++)this.items[p].dom.contains(f.target)&&this.moveSelection(p)};this.list=ri("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:l,onclick:c}),this.dom=ri("div",{class:"cm-panel-lint"},this.list,ri("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>gr(this.view)},"\xD7")),this.update()}get selectedIndex(){let i=this.view.state.field(li).selected;if(!i)return-1;for(let l=0;l<this.items.length;l++)if(this.items[l].diagnostic==i.diagnostic)return l;return-1}update(){let{diagnostics:i,selected:l}=this.view.state.field(li),c=0,f=!1,p=null;for(i.between(0,this.view.state.doc.length,(S,C,{spec:W})=>{let Z=-1,ie;for(let we=c;we<this.items.length;we++)if(this.items[we].diagnostic==W.diagnostic){Z=we;break}Z<0?(ie=new As(this.view,W.diagnostic),this.items.splice(c,0,ie),f=!0):(ie=this.items[Z],Z>c&&(this.items.splice(c,Z-c),f=!0)),l&&ie.diagnostic==l.diagnostic?ie.dom.hasAttribute("aria-selected")||(ie.dom.setAttribute("aria-selected","true"),p=ie):ie.dom.hasAttribute("aria-selected")&&ie.dom.removeAttribute("aria-selected"),c++});c<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)f=!0,this.items.pop();this.items.length==0&&(this.items.push(new As(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),f=!0),p?(this.list.setAttribute("aria-activedescendant",p.id),this.view.requestMeasure({key:this,read:()=>({sel:p.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:S,panel:C})=>{let W=C.height/this.list.offsetHeight;S.top<C.top?this.list.scrollTop-=(C.top-S.top)/W:S.bottom>C.bottom&&(this.list.scrollTop+=(S.bottom-C.bottom)/W)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),f&&this.sync()}sync(){let i=this.list.firstChild;function l(){let c=i;i=c.nextSibling,c.remove()}for(let c of this.items)if(c.dom.parentNode==this.list){for(;i!=c.dom;)l();i=c.dom.nextSibling}else this.list.insertBefore(c.dom,i);for(;i;)l()}moveSelection(i){if(this.selectedIndex<0)return;let l=this.view.state.field(li),c=Zi(l.diagnostics,this.items[i].diagnostic);c&&this.view.dispatch({selection:{anchor:c.from,head:c.to},scrollIntoView:!0,effects:Cs.of(c)})}static open(i){return new es(i)}}function Ts(r,i='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${i}>${encodeURIComponent(r)}</svg>')`}function ts(r){return Ts(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pl=ce.tk.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:ts("#d11")},".cm-lintRange-warning":{backgroundImage:ts("orange")},".cm-lintRange-info":{backgroundImage:ts("#999")},".cm-lintRange-hint":{backgroundImage:ts("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function vo(r){return r=="error"?4:r=="warning"?3:r=="info"?2:1}class gl extends ce.SJ{constructor(i){super(),this.diagnostics=i,this.severity=i.reduce((l,c)=>vo(l)<vo(c.severity)?c.severity:l,"hint")}toDOM(i){let l=document.createElement("div");l.className="cm-lint-marker cm-lint-marker-"+this.severity;let c=this.diagnostics,f=i.state.facet(e).tooltipFilter;return f&&(c=f(c,i.state)),c.length&&(l.onmouseover=()=>ml(i,l,c)),l}}function xo(r,i){let l=c=>{let f=i.getBoundingClientRect();if(!(c.clientX>f.left-10&&c.clientX<f.right+10&&c.clientY>f.top-10&&c.clientY<f.bottom+10)){for(let p=c.target;p;p=p.parentNode)if(p.nodeType==1&&p.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",l),r.state.field(vl)&&r.dispatch({effects:br.of(null)})}};window.addEventListener("mousemove",l)}function ml(r,i,l){function c(){let S=r.elementAtHeight(i.getBoundingClientRect().top+5-r.documentTop);r.coordsAtPos(S.from)&&r.dispatch({effects:br.of({pos:S.from,above:!1,create(){return{dom:mo(r,l),getCoords:()=>i.getBoundingClientRect()}}})}),i.onmouseout=i.onmousemove=null,xo(r,i)}let{hoverTime:f}=r.state.facet(e),p=setTimeout(c,f);i.onmouseout=()=>{clearTimeout(p),i.onmouseout=i.onmousemove=null},i.onmousemove=()=>{clearTimeout(p),p=setTimeout(c,f)}}function ko(r,i){let l=Object.create(null);for(let f of i){let p=r.lineAt(f.from);(l[p.from]||(l[p.from]=[])).push(f)}let c=[];for(let f in l)c.push(new gl(l[f]).range(+f));return z.Xs.of(c,!0)}const yl=(0,ce.v5)({class:"cm-gutter-lint",markers:r=>r.state.field(bl)}),bl=z.QQ.define({create(){return z.Xs.empty},update(r,i){r=r.map(i.changes);let l=i.state.facet(e).markerFilter;for(let c of i.effects)if(c.is(yn)){let f=c.value;l&&(f=l(f||[],i.state)),r=ko(i.state.doc,f.slice(0))}return r}}),br=z.Py.define(),vl=z.QQ.define({create(){return null},update(r,i){return r&&i.docChanged&&(r=al(i,r)?null:Object.assign(Object.assign({},r),{pos:i.changes.mapPos(r.pos)})),i.effects.reduce((l,c)=>c.is(br)?c.value:l,r)},provide:r=>ce.hJ.from(r)}),Il=ce.tk.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:Ts('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:Ts('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error":{content:Ts('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),o=[li,ce.tk.decorations.compute([li],r=>{let{selected:i,panel:l}=r.field(li);return!i||!l||i.from==i.to?ce.p.none:ce.p.set([cl.range(i.from,i.to)])}),(0,ce.bF)(_n,{hideOn:al}),pl],e=z.r$.define({combine(r){return(0,z.BO)(r,{hoverTime:300,markerFilter:null,tooltipFilter:null})}});function t(r={}){return[e.of(r),bl,yl,Il,vl]}function n(r,i){let l=r.field(li,!1);if(l&&l.diagnostics.size)for(let c=RangeSet.iter([l.diagnostics]);c.value;c.next())i(c.value.spec.diagnostic,c.from,c.to)}var s=function(i){i===void 0&&(i={});var{crosshairCursor:l=!1}=i,c=[];i.closeBracketsKeymap!==!1&&(c=c.concat(ho)),i.defaultKeymap!==!1&&(c=c.concat(Fs)),i.searchKeymap!==!1&&(c=c.concat(us)),i.historyKeymap!==!1&&(c=c.concat(x)),i.foldKeymap!==!1&&(c=c.concat(Ke.e7)),i.completionKeymap!==!1&&(c=c.concat(uo)),i.lintKeymap!==!1&&(c=c.concat(mr));var f=[];return i.lineNumbers!==!1&&f.push((0,ce.Eu)()),i.highlightActiveLineGutter!==!1&&f.push((0,ce.HQ)()),i.highlightSpecialChars!==!1&&f.push((0,ce.AE)()),i.history!==!1&&f.push(He()),i.foldGutter!==!1&&f.push((0,Ke.mi)()),i.drawSelection!==!1&&f.push((0,ce.Uw)()),i.dropCursor!==!1&&f.push((0,ce.qr)()),i.allowMultipleSelections!==!1&&f.push(z.yy.allowMultipleSelections.of(!0)),i.indentOnInput!==!1&&f.push((0,Ke.nY)()),i.syntaxHighlighting!==!1&&f.push((0,Ke.nF)(Ke.R_,{fallback:!0})),i.bracketMatching!==!1&&f.push((0,Ke.n$)()),i.closeBrackets!==!1&&f.push(oo()),i.autocompletion!==!1&&f.push(ll()),i.rectangularSelection!==!1&&f.push((0,ce.Zs)()),l!==!1&&f.push((0,ce.S2)()),i.highlightActiveLine!==!1&&f.push((0,ce.ZO)()),i.highlightSelectionMatches!==!1&&f.push(Tr()),i.tabSize&&typeof i.tabSize=="number"&&f.push(Ke.c.of(" ".repeat(i.tabSize))),f.concat([ce.$f.of(c.flat())]).filter(Boolean)},h=function(i){i===void 0&&(i={});var l=[];i.defaultKeymap!==!1&&(l=l.concat(defaultKeymap)),i.historyKeymap!==!1&&(l=l.concat(historyKeymap));var c=[];return i.highlightSpecialChars!==!1&&c.push(highlightSpecialChars()),i.history!==!1&&c.push(history()),i.drawSelection!==!1&&c.push(drawSelection()),i.syntaxHighlighting!==!1&&c.push(syntaxHighlighting(defaultHighlightStyle,{fallback:!0})),c.concat([keymap.of(l.flat())]).filter(Boolean)},u=pe(35524);const b="#e5c07b",v="#e06c75",A="#56b6c2",O="#ffffff",V="#abb2bf",X="#7d8799",te="#61afef",re="#98c379",me="#d19a66",fe="#c678dd",Ae="#21252b",bt="#2c313a",Lt="#282c34",ut="#353a42",Bt="#3E4451",Wt="#528bff",pi={chalky:b,coral:v,cyan:A,invalid:O,ivory:V,stone:X,malibu:te,sage:re,whiskey:me,violet:fe,darkBackground:Ae,highlightBackground:bt,background:Lt,tooltipBackground:ut,selection:Bt,cursor:Wt},ki=ce.tk.theme({"&":{color:V,backgroundColor:Lt},".cm-content":{caretColor:Wt},".cm-cursor, .cm-dropCursor":{borderLeftColor:Wt},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Bt},".cm-panels":{backgroundColor:Ae,color:V},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Lt,color:X,border:"none"},".cm-activeLineGutter":{backgroundColor:bt},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ut},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ut,borderBottomColor:ut},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:bt,color:V}}},{dark:!0}),_i=Ke.Qf.define([{tag:u.pJ.keyword,color:fe},{tag:[u.pJ.name,u.pJ.deleted,u.pJ.character,u.pJ.propertyName,u.pJ.macroName],color:v},{tag:[u.pJ.function(u.pJ.variableName),u.pJ.labelName],color:te},{tag:[u.pJ.color,u.pJ.constant(u.pJ.name),u.pJ.standard(u.pJ.name)],color:me},{tag:[u.pJ.definition(u.pJ.name),u.pJ.separator],color:V},{tag:[u.pJ.typeName,u.pJ.className,u.pJ.number,u.pJ.changed,u.pJ.annotation,u.pJ.modifier,u.pJ.self,u.pJ.namespace],color:b},{tag:[u.pJ.operator,u.pJ.operatorKeyword,u.pJ.url,u.pJ.escape,u.pJ.regexp,u.pJ.link,u.pJ.special(u.pJ.string)],color:A},{tag:[u.pJ.meta,u.pJ.comment],color:X},{tag:u.pJ.strong,fontWeight:"bold"},{tag:u.pJ.emphasis,fontStyle:"italic"},{tag:u.pJ.strikethrough,textDecoration:"line-through"},{tag:u.pJ.link,color:X,textDecoration:"underline"},{tag:u.pJ.heading,fontWeight:"bold",color:v},{tag:[u.pJ.atom,u.pJ.bool,u.pJ.special(u.pJ.variableName)],color:me},{tag:[u.pJ.processingInstruction,u.pJ.string,u.pJ.inserted],color:re},{tag:u.pJ.invalid,color:O}]),Ps=[ki,(0,Ke.nF)(_i)];var wo=ce.tk.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Ms=function(i){i===void 0&&(i={});var{indentWithTab:l=!0,editable:c=!0,readOnly:f=!1,theme:p="light",placeholder:S="",basicSetup:C=!0}=i,W=[];switch(l&&W.unshift(ce.$f.of([Ao])),C&&(typeof C=="boolean"?W.unshift(s()):W.unshift(s(C))),S&&W.unshift((0,ce.W$)(S)),p){case"light":W.push(wo);break;case"dark":W.push(Ps);break;case"none":break;default:W.push(p);break}return c===!1&&W.push(ce.tk.editable.of(!1)),f&&W.push(z.yy.readOnly.of(!0)),[...W]},Ds=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(i=>r.state.sliceDoc(i.from,i.to)),selectedText:r.state.selection.ranges.some(i=>!i.empty)}),en=z.q6.define(),tn=[];function $n(r){var{value:i,selection:l,onChange:c,onStatistics:f,onCreateEditor:p,onUpdate:S,extensions:C=tn,autoFocus:W,theme:Z="light",height:ie=null,minHeight:we=null,maxHeight:Ue=null,width:At=null,minWidth:Xt=null,maxWidth:ai=null,placeholder:zi="",editable:nn=!0,readOnly:ci=!1,indentWithTab:Ji=!0,basicSetup:Ii=!0,root:Si,initialState:sn}=r,[rn,So]=(0,xe.useState)(),[Oi,kn]=(0,xe.useState)(),[Rs,Bs]=(0,xe.useState)(),xl=ce.tk.theme({"&":{height:ie,minHeight:we,maxHeight:Ue,width:At,minWidth:Xt,maxWidth:ai},"& .cm-scroller":{height:"100% !important"}}),kl=ce.tk.updateListener.of(Ui=>{if(Ui.docChanged&&typeof c=="function"&&!Ui.transactions.some(Fl=>Fl.annotation(en))){var xr=Ui.state.doc,Oo=xr.toString();c(Oo,Ui)}f&&f(Ds(Ui))}),$l=Ms({theme:Z,editable:nn,readOnly:ci,placeholder:zi,indentWithTab:Ji,basicSetup:Ii}),vr=[kl,xl,...$l];return S&&typeof S=="function"&&vr.push(ce.tk.updateListener.of(S)),vr=vr.concat(C),(0,xe.useEffect)(()=>{if(rn&&!Rs){var Ui={doc:i,selection:l,extensions:vr},xr=sn?z.yy.fromJSON(sn.json,Ui,sn.fields):z.yy.create(Ui);if(Bs(xr),!Oi){var Oo=new ce.tk({state:xr,parent:rn,root:Si});kn(Oo),p&&p(Oo,xr)}}return()=>{Oi&&(Bs(void 0),kn(void 0))}},[rn,Rs]),(0,xe.useEffect)(()=>So(r.container),[r.container]),(0,xe.useEffect)(()=>()=>{Oi&&(Oi.destroy(),kn(void 0))},[Oi]),(0,xe.useEffect)(()=>{W&&Oi&&Oi.focus()},[W,Oi]),(0,xe.useEffect)(()=>{Oi&&Oi.dispatch({effects:z.Py.reconfigure.of(vr)})},[Z,C,ie,we,Ue,At,Xt,ai,zi,nn,ci,Ji,Ii,c,S]),(0,xe.useEffect)(()=>{if(i!==void 0){var Ui=Oi?Oi.state.doc.toString():"";Oi&&i!==Ui&&Oi.dispatch({changes:{from:0,to:Ui.length,insert:i||""},annotations:[en.of(!0)]})}},[i,Oi]),{state:Rs,setState:Bs,view:Oi,setView:kn,container:rn,setContainer:So}}var xn=pe(85893),is=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Wi=(0,xe.forwardRef)((r,i)=>{var{className:l,value:c="",selection:f,extensions:p=[],onChange:S,onStatistics:C,onCreateEditor:W,onUpdate:Z,autoFocus:ie,theme:we="light",height:Ue,minHeight:At,maxHeight:Xt,width:ai,minWidth:zi,maxWidth:nn,basicSetup:ci,placeholder:Ji,indentWithTab:Ii,editable:Si,readOnly:sn,root:rn,initialState:So}=r,Oi=(0,ae.Z)(r,is),kn=(0,xe.useRef)(null),{state:Rs,view:Bs,container:xl}=$n({container:kn.current,root:rn,value:c,autoFocus:ie,theme:we,height:Ue,minHeight:At,maxHeight:Xt,width:ai,minWidth:zi,maxWidth:nn,basicSetup:ci,placeholder:Ji,indentWithTab:Ii,editable:Si,readOnly:sn,selection:f,onChange:S,onStatistics:C,onCreateEditor:W,onUpdate:Z,extensions:p,initialState:So});if((0,xe.useImperativeHandle)(i,()=>({editor:kn.current,state:Rs,view:Bs}),[kn,xl,Rs,Bs]),typeof c!="string")throw new Error("value must be typeof string but got "+typeof c);var kl=typeof we=="string"?"cm-theme-"+we:"cm-theme";return(0,xn.jsx)("div",(0,E.Z)({ref:kn,className:""+kl+(l?" "+l:"")},Oi))});Wi.displayName="CodeMirror";var Xi=Wi},86250:function(Di,ti,pe){pe.d(ti,{Z:function(){return at}});var E=pe(67294),ae=pe(93967),xe=pe.n(ae),z=pe(98423),ce=pe(98065),Ke=pe(53124),Re=pe(91945),jt=pe(45503);const it=["wrap","nowrap","wrap-reverse"],nt=["flex-start","flex-end","start","end","center","space-between","space-around","space-evenly","stretch","normal","left","right"],Xe=["center","start","end","flex-start","flex-end","self-start","self-end","baseline","normal","stretch"],lt=(Le,He)=>{const Me=He.wrap===!0?"wrap":He.wrap;return{[`${Le}-wrap-${Me}`]:Me&&it.includes(Me)}},Ee=(Le,He)=>{const Me={};return Xe.forEach(ke=>{Me[`${Le}-align-${ke}`]=He.align===ke}),Me[`${Le}-align-stretch`]=!He.align&&!!He.vertical,Me},ct=(Le,He)=>{const Me={};return nt.forEach(ke=>{Me[`${Le}-justify-${ke}`]=He.justify===ke}),Me};function vt(Le,He){return xe()(Object.assign(Object.assign(Object.assign({},lt(Le,He)),Ee(Le,He)),ct(Le,He)))}var ft=vt;const ue=Le=>{const{componentCls:He}=Le;return{[He]:{display:"flex","&-vertical":{flexDirection:"column"},"&-rtl":{direction:"rtl"},"&:empty":{display:"none"}}}},kt=Le=>{const{componentCls:He}=Le;return{[He]:{"&-gap-small":{gap:Le.flexGapSM},"&-gap-middle":{gap:Le.flexGap},"&-gap-large":{gap:Le.flexGapLG}}}},Ot=Le=>{const{componentCls:He}=Le,Me={};return it.forEach(ke=>{Me[`${He}-wrap-${ke}`]={flexWrap:ke}}),Me},Qt=Le=>{const{componentCls:He}=Le,Me={};return Xe.forEach(ke=>{Me[`${He}-align-${ke}`]={alignItems:ke}}),Me},Ut=Le=>{const{componentCls:He}=Le,Me={};return nt.forEach(ke=>{Me[`${He}-justify-${ke}`]={justifyContent:ke}}),Me},Pt=()=>({});var Dt=(0,Re.I$)("Flex",Le=>{const{paddingXS:He,padding:Me,paddingLG:ke}=Le,Ne=(0,jt.TS)(Le,{flexGapSM:He,flexGap:Me,flexGapLG:ke});return[ue(Ne),kt(Ne),Ot(Ne),Qt(Ne),Ut(Ne)]},Pt,{resetStyle:!1}),Gt=function(Le,He){var Me={};for(var ke in Le)Object.prototype.hasOwnProperty.call(Le,ke)&&He.indexOf(ke)<0&&(Me[ke]=Le[ke]);if(Le!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Ne=0,ke=Object.getOwnPropertySymbols(Le);Ne<ke.length;Ne++)He.indexOf(ke[Ne])<0&&Object.prototype.propertyIsEnumerable.call(Le,ke[Ne])&&(Me[ke[Ne]]=Le[ke[Ne]]);return Me},at=E.forwardRef((Le,He)=>{const{prefixCls:Me,rootClassName:ke,className:Ne,style:K,flex:$e,gap:Fe,children:ee,vertical:ge=!1,component:Ce="div"}=Le,Oe=Gt(Le,["prefixCls","rootClassName","className","style","flex","gap","children","vertical","component"]),{flex:De,direction:dt,getPrefixCls:Ye}=E.useContext(Ke.E_),xt=Ye("flex",Me),[pt,Rt,It]=Dt(xt),Et=ge!=null?ge:De==null?void 0:De.vertical,Mt=xe()(Ne,ke,De==null?void 0:De.className,xt,Rt,It,ft(xt,Le),{[`${xt}-rtl`]:dt==="rtl",[`${xt}-gap-${Fe}`]:(0,ce.n)(Fe),[`${xt}-vertical`]:Et}),ii=Object.assign(Object.assign({},De==null?void 0:De.style),K);return $e&&(ii.flex=$e),Fe&&!(0,ce.n)(Fe)&&(ii.gap=Fe),pt(E.createElement(Ce,Object.assign({ref:He,className:Mt,style:ii},(0,z.Z)(Oe,["justify","wrap","align"])),ee))})},75498:function(Di,ti,pe){pe.d(ti,{Z:function(){return We}});var E=pe(67294),ae=pe(87462),xe=pe(44039),z=pe(93771),ce=function(Pe,ye){return E.createElement(z.Z,(0,ae.Z)({},Pe,{ref:ye,icon:xe.Z}))},Ke=E.forwardRef(ce),Re=Ke,jt=pe(93967),it=pe.n(jt),nt=pe(82225),Xe=pe(42550),lt=pe(66367),Ee=pe(58375),ct=pe(48783),vt=pe(53124);const ft=E.createContext(void 0),{Provider:ue}=ft;var kt=ft,Ot=pe(98423),Qt=pe(40411),Ut=pe(35792),Pt=pe(83062),Dt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},Gt=Dt,$t=function(Pe,ye){return E.createElement(z.Z,(0,ae.Z)({},Pe,{ref:ye,icon:Gt}))},at=E.forwardRef($t),Le=at;const He=_=>{const{icon:Pe,description:ye,prefixCls:Te,className:je}=_,Ve=E.createElement("div",{className:`${Te}-icon`},E.createElement(Le,null));return E.createElement("div",{onClick:_.onClick,onFocus:_.onFocus,onMouseEnter:_.onMouseEnter,onMouseLeave:_.onMouseLeave,className:it()(je,`${Te}-content`)},Pe||ye?E.createElement(E.Fragment,null,Pe&&E.createElement("div",{className:`${Te}-icon`},Pe),ye&&E.createElement("div",{className:`${Te}-description`},ye)):Ve)};var Me=(0,E.memo)(He),ke=pe(6731),Ne=pe(14747),K=pe(16932),$e=pe(93590),Fe=pe(91945),ee=pe(45503),Ce=_=>_===0?0:_-Math.sqrt(Math.pow(_,2)/2);const Oe=_=>{const{componentCls:Pe,floatButtonSize:ye,motionDurationSlow:Te,motionEaseInOutCirc:je}=_,Ve=`${Pe}-group`,ht=new ke.E4("antFloatButtonMoveDownIn",{"0%":{transform:`translate3d(0, ${(0,ke.bf)(ye)}, 0)`,transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),wt=new ke.E4("antFloatButtonMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:`translate3d(0, ${(0,ke.bf)(ye)}, 0)`,transformOrigin:"0 0",opacity:0}});return[{[`${Ve}-wrap`]:Object.assign({},(0,$e.R)(`${Ve}-wrap`,ht,wt,Te,!0))},{[`${Ve}-wrap`]:{[`
          &${Ve}-wrap-enter,
          &${Ve}-wrap-appear
        `]:{opacity:0,animationTimingFunction:je},[`&${Ve}-wrap-leave`]:{animationTimingFunction:je}}}]},De=_=>{const{antCls:Pe,componentCls:ye,floatButtonSize:Te,margin:je,borderRadiusLG:Ve,borderRadiusSM:ht,badgeOffset:wt,floatButtonBodyPadding:gt,calc:Ft}=_,ze=`${ye}-group`;return{[ze]:Object.assign(Object.assign({},(0,Ne.Wf)(_)),{zIndex:99,display:"block",border:"none",position:"fixed",width:Te,height:"auto",boxShadow:"none",minHeight:Te,insetInlineEnd:_.floatButtonInsetInlineEnd,insetBlockEnd:_.floatButtonInsetBlockEnd,borderRadius:Ve,[`${ze}-wrap`]:{zIndex:-1,display:"block",position:"relative",marginBottom:je},[`&${ze}-rtl`]:{direction:"rtl"},[ye]:{position:"static"}}),[`${ze}-circle`]:{[`${ye}-circle:not(:last-child)`]:{marginBottom:_.margin,[`${ye}-body`]:{width:Te,height:Te,borderRadius:"50%"}}},[`${ze}-square`]:{[`${ye}-square`]:{borderRadius:0,padding:0,"&:first-child":{borderStartStartRadius:Ve,borderStartEndRadius:Ve},"&:last-child":{borderEndStartRadius:Ve,borderEndEndRadius:Ve},"&:not(:last-child)":{borderBottom:`${(0,ke.bf)(_.lineWidth)} ${_.lineType} ${_.colorSplit}`},[`${Pe}-badge`]:{[`${Pe}-badge-count`]:{top:Ft(Ft(gt).add(wt)).mul(-1).equal(),insetInlineEnd:Ft(Ft(gt).add(wt)).mul(-1).equal()}}},[`${ze}-wrap`]:{display:"block",borderRadius:Ve,boxShadow:_.boxShadowSecondary,[`${ye}-square`]:{boxShadow:"none",marginTop:0,borderRadius:0,padding:gt,"&:first-child":{borderStartStartRadius:Ve,borderStartEndRadius:Ve},"&:last-child":{borderEndStartRadius:Ve,borderEndEndRadius:Ve},"&:not(:last-child)":{borderBottom:`${(0,ke.bf)(_.lineWidth)} ${_.lineType} ${_.colorSplit}`},[`${ye}-body`]:{width:_.floatButtonBodySize,height:_.floatButtonBodySize}}}},[`${ze}-circle-shadow`]:{boxShadow:"none"},[`${ze}-square-shadow`]:{boxShadow:_.boxShadowSecondary,[`${ye}-square`]:{boxShadow:"none",padding:gt,[`${ye}-body`]:{width:_.floatButtonBodySize,height:_.floatButtonBodySize,borderRadius:ht}}}}},dt=_=>{const{antCls:Pe,componentCls:ye,floatButtonBodyPadding:Te,floatButtonIconSize:je,floatButtonSize:Ve,borderRadiusLG:ht,badgeOffset:wt,dotOffsetInSquare:gt,dotOffsetInCircle:Ft,calc:ze}=_;return{[ye]:Object.assign(Object.assign({},(0,Ne.Wf)(_)),{border:"none",position:"fixed",cursor:"pointer",zIndex:99,display:"block",width:Ve,height:Ve,insetInlineEnd:_.floatButtonInsetInlineEnd,insetBlockEnd:_.floatButtonInsetBlockEnd,boxShadow:_.boxShadowSecondary,"&-pure":{position:"relative",inset:"auto"},"&:empty":{display:"none"},[`${Pe}-badge`]:{width:"100%",height:"100%",[`${Pe}-badge-count`]:{transform:"translate(0, 0)",transformOrigin:"center",top:ze(wt).mul(-1).equal(),insetInlineEnd:ze(wt).mul(-1).equal()}},[`${ye}-body`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",transition:`all ${_.motionDurationMid}`,[`${ye}-content`]:{overflow:"hidden",textAlign:"center",minHeight:Ve,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:`${(0,ke.bf)(ze(Te).div(2).equal())} ${(0,ke.bf)(Te)}`,[`${ye}-icon`]:{textAlign:"center",margin:"auto",width:je,fontSize:je,lineHeight:1}}}}),[`${ye}-rtl`]:{direction:"rtl"},[`${ye}-circle`]:{height:Ve,borderRadius:"50%",[`${Pe}-badge`]:{[`${Pe}-badge-dot`]:{top:Ft,insetInlineEnd:Ft}},[`${ye}-body`]:{borderRadius:"50%"}},[`${ye}-square`]:{height:"auto",minHeight:Ve,borderRadius:ht,[`${Pe}-badge`]:{[`${Pe}-badge-dot`]:{top:gt,insetInlineEnd:gt}},[`${ye}-body`]:{height:"auto",borderRadius:ht}},[`${ye}-default`]:{backgroundColor:_.floatButtonBackgroundColor,transition:`background-color ${_.motionDurationMid}`,[`${ye}-body`]:{backgroundColor:_.floatButtonBackgroundColor,transition:`background-color ${_.motionDurationMid}`,"&:hover":{backgroundColor:_.colorFillContent},[`${ye}-content`]:{[`${ye}-icon`]:{color:_.colorText},[`${ye}-description`]:{display:"flex",alignItems:"center",lineHeight:(0,ke.bf)(_.fontSizeLG),color:_.colorText,fontSize:_.fontSizeSM}}}},[`${ye}-primary`]:{backgroundColor:_.colorPrimary,[`${ye}-body`]:{backgroundColor:_.colorPrimary,transition:`background-color ${_.motionDurationMid}`,"&:hover":{backgroundColor:_.colorPrimaryHover},[`${ye}-content`]:{[`${ye}-icon`]:{color:_.colorTextLightSolid},[`${ye}-description`]:{display:"flex",alignItems:"center",lineHeight:(0,ke.bf)(_.fontSizeLG),color:_.colorTextLightSolid,fontSize:_.fontSizeSM}}}}}},Ye=_=>({dotOffsetInCircle:Ce(_.controlHeightLG/2),dotOffsetInSquare:Ce(_.borderRadiusLG)});var xt=(0,Fe.I$)("FloatButton",_=>{const{colorTextLightSolid:Pe,colorBgElevated:ye,controlHeightLG:Te,marginXXL:je,marginLG:Ve,fontSize:ht,fontSizeIcon:wt,controlItemBgHover:gt,paddingXXS:Ft,calc:ze}=_,Tt=(0,ee.TS)(_,{floatButtonBackgroundColor:ye,floatButtonColor:Pe,floatButtonHoverBackgroundColor:gt,floatButtonFontSize:ht,floatButtonIconSize:ze(wt).mul(1.5).equal(),floatButtonSize:Te,floatButtonInsetBlockEnd:je,floatButtonInsetInlineEnd:Ve,floatButtonBodySize:ze(Te).sub(ze(Ft).mul(2)).equal(),floatButtonBodyPadding:Ft,badgeOffset:ze(Ft).mul(1.5).equal()});return[De(Tt),dt(Tt),(0,K.J$)(_),Oe(Tt)]},Ye),pt=function(_,Pe){var ye={};for(var Te in _)Object.prototype.hasOwnProperty.call(_,Te)&&Pe.indexOf(Te)<0&&(ye[Te]=_[Te]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Te=Object.getOwnPropertySymbols(_);je<Te.length;je++)Pe.indexOf(Te[je])<0&&Object.prototype.propertyIsEnumerable.call(_,Te[je])&&(ye[Te[je]]=_[Te[je]]);return ye};const Rt="float-btn";var Mt=E.forwardRef((_,Pe)=>{const{prefixCls:ye,className:Te,rootClassName:je,type:Ve="default",shape:ht="circle",icon:wt,description:gt,tooltip:Ft,badge:ze={}}=_,Tt=pt(_,["prefixCls","className","rootClassName","type","shape","icon","description","tooltip","badge"]),{getPrefixCls:Qe,direction:Ct}=(0,E.useContext)(vt.E_),Ge=(0,E.useContext)(kt),tt=Qe(Rt,ye),mt=(0,Ut.Z)(tt),[st,zt,Ht]=xt(tt,mt),St=Ge||ht,si=it()(zt,Ht,mt,tt,Te,je,`${tt}-${Ve}`,`${tt}-${St}`,{[`${tt}-rtl`]:Ct==="rtl"}),qt=(0,E.useMemo)(()=>(0,Ot.Z)(ze,["title","children","status","text"]),[ze]),_t=(0,E.useMemo)(()=>({prefixCls:tt,description:gt,icon:wt,type:Ve}),[tt,gt,wt,Ve]);let rt=E.createElement("div",{className:`${tt}-body`},E.createElement(Me,Object.assign({},_t)));return"badge"in _&&(rt=E.createElement(Qt.Z,Object.assign({},qt),rt)),"tooltip"in _&&(rt=E.createElement(Pt.Z,{title:Ft,placement:Ct==="rtl"?"right":"left"},rt)),st(_.href?E.createElement("a",Object.assign({ref:Pe},Tt,{className:si}),rt):E.createElement("button",Object.assign({ref:Pe},Tt,{className:si,type:"button"}),rt))}),ii=function(_,Pe){var ye={};for(var Te in _)Object.prototype.hasOwnProperty.call(_,Te)&&Pe.indexOf(Te)<0&&(ye[Te]=_[Te]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Te=Object.getOwnPropertySymbols(_);je<Te.length;je++)Pe.indexOf(Te[je])<0&&Object.prototype.propertyIsEnumerable.call(_,Te[je])&&(ye[Te[je]]=_[Te[je]]);return ye},oe=E.forwardRef((_,Pe)=>{const{prefixCls:ye,className:Te,type:je="default",shape:Ve="circle",visibilityHeight:ht=400,icon:wt=E.createElement(Re,null),target:gt,onClick:Ft,duration:ze=450}=_,Tt=ii(_,["prefixCls","className","type","shape","visibilityHeight","icon","target","onClick","duration"]),[Qe,Ct]=(0,E.useState)(ht===0),Ge=E.useRef(null);E.useImperativeHandle(Pe,()=>({nativeElement:Ge.current}));const tt=()=>Ge.current&&Ge.current.ownerDocument?Ge.current.ownerDocument:window,mt=(0,ct.Z)(rt=>{const Vt=(0,lt.Z)(rt.target,!0);Ct(Vt>=ht)});(0,E.useEffect)(()=>{const Vt=(gt||tt)();return mt({target:Vt}),Vt==null||Vt.addEventListener("scroll",mt),()=>{mt.cancel(),Vt==null||Vt.removeEventListener("scroll",mt)}},[gt]);const st=rt=>{(0,Ee.Z)(0,{getContainer:gt||tt,duration:ze}),Ft==null||Ft(rt)},{getPrefixCls:zt}=(0,E.useContext)(vt.E_),Ht=zt(Rt,ye),St=zt(),qt=(0,E.useContext)(kt)||Ve,_t=Object.assign({prefixCls:Ht,icon:wt,type:je,shape:qt},Tt);return E.createElement(nt.ZP,{visible:Qe,motionName:`${St}-fade`},(rt,Vt)=>{let{className:Nt}=rt;return E.createElement(Mt,Object.assign({ref:(0,Xe.sQ)(Ge,Vt)},_t,{onClick:st,className:it()(Te,Nt)}))})}),x=pe(62208),M=pe(21770),F=function(_,Pe){var ye={};for(var Te in _)Object.prototype.hasOwnProperty.call(_,Te)&&Pe.indexOf(Te)<0&&(ye[Te]=_[Te]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Te=Object.getOwnPropertySymbols(_);je<Te.length;je++)Pe.indexOf(Te[je])<0&&Object.prototype.propertyIsEnumerable.call(_,Te[je])&&(ye[Te[je]]=_[Te[je]]);return ye};const j=_=>{var Pe;const{prefixCls:ye,className:Te,style:je,shape:Ve="circle",type:ht="default",icon:wt=E.createElement(Le,null),closeIcon:gt,description:Ft,trigger:ze,children:Tt,onOpenChange:Qe,open:Ct}=_,Ge=F(_,["prefixCls","className","style","shape","type","icon","closeIcon","description","trigger","children","onOpenChange","open"]),{direction:tt,getPrefixCls:mt,floatButtonGroup:st}=(0,E.useContext)(vt.E_),zt=(Pe=gt!=null?gt:st==null?void 0:st.closeIcon)!==null&&Pe!==void 0?Pe:E.createElement(x.Z,null),Ht=mt(Rt,ye),St=(0,Ut.Z)(Ht),[si,qt,_t]=xt(Ht,St),rt=`${Ht}-group`,Vt=it()(rt,qt,_t,St,Te,{[`${rt}-rtl`]:tt==="rtl",[`${rt}-${Ve}`]:Ve,[`${rt}-${Ve}-shadow`]:!ze}),Nt=it()(qt,`${rt}-wrap`),[fi,hi]=(0,M.Z)(!1,{value:Ct}),mi=E.useRef(null),I=E.useRef(null),y=E.useMemo(()=>ze==="hover"?{onMouseEnter(){hi(!0),Qe==null||Qe(!0)},onMouseLeave(){hi(!1),Qe==null||Qe(!1)}}:{},[ze]),P=()=>{hi(U=>(Qe==null||Qe(!U),!U))},N=(0,E.useCallback)(U=>{var ne,J;if(!((ne=mi.current)===null||ne===void 0)&&ne.contains(U.target)){!((J=I.current)===null||J===void 0)&&J.contains(U.target)&&P();return}hi(!1),Qe==null||Qe(!1)},[ze]);return(0,E.useEffect)(()=>{if(ze==="click")return document.addEventListener("click",N),()=>{document.removeEventListener("click",N)}},[ze]),si(E.createElement(ue,{value:Ve},E.createElement("div",Object.assign({ref:mi,className:Vt,style:je},y),ze&&["click","hover"].includes(ze)?E.createElement(E.Fragment,null,E.createElement(nt.ZP,{visible:fi,motionName:`${rt}-wrap`},U=>{let{className:ne}=U;return E.createElement("div",{className:it()(ne,Nt)},Tt)}),E.createElement(Mt,Object.assign({ref:I,type:ht,shape:Ve,icon:fi?zt:wt,description:Ft,"aria-label":_["aria-label"]},Ge))):Tt)))};var $=(0,E.memo)(j),se=function(_,Pe){var ye={};for(var Te in _)Object.prototype.hasOwnProperty.call(_,Te)&&Pe.indexOf(Te)<0&&(ye[Te]=_[Te]);if(_!=null&&typeof Object.getOwnPropertySymbols=="function")for(var je=0,Te=Object.getOwnPropertySymbols(_);je<Te.length;je++)Pe.indexOf(Te[je])<0&&Object.prototype.propertyIsEnumerable.call(_,Te[je])&&(ye[Te[je]]=_[Te[je]]);return ye};const le=_=>{var{backTop:Pe}=_,ye=se(_,["backTop"]);return Pe?E.createElement(oe,Object.assign({},ye,{visibilityHeight:0})):E.createElement(Mt,Object.assign({},ye))};var et=_=>{var{className:Pe,items:ye}=_,Te=se(_,["className","items"]);const{prefixCls:je}=Te,{getPrefixCls:Ve}=E.useContext(vt.E_),wt=`${Ve(Rt,je)}-pure`;return ye?E.createElement($,Object.assign({className:it()(Pe,wt)},Te),ye.map((gt,Ft)=>E.createElement(le,Object.assign({key:Ft},gt)))):E.createElement(le,Object.assign({className:it()(Pe,wt)},Te))};Mt.BackTop=oe,Mt.Group=$,Mt._InternalPanelDoNotUseOrYouWillBeFired=et;var We=Mt},55054:function(Di,ti,pe){pe.d(ti,{Z:function(){return He}});var E=pe(67294),ae=pe(57838),xe=pe(96159),z=pe(93967),ce=pe.n(z),Ke=pe(64217),Re=pe(53124),jt=pe(99559),nt=Me=>{const{value:ke,formatter:Ne,precision:K,decimalSeparator:$e,groupSeparator:Fe="",prefixCls:ee}=Me;let ge;if(typeof Ne=="function")ge=Ne(ke);else{const Ce=String(ke),Oe=Ce.match(/^(-?)(\d*)(\.(\d+))?$/);if(!Oe||Ce==="-")ge=Ce;else{const De=Oe[1];let dt=Oe[2]||"0",Ye=Oe[4]||"";dt=dt.replace(/\B(?=(\d{3})+(?!\d))/g,Fe),typeof K=="number"&&(Ye=Ye.padEnd(K,"0").slice(0,K>0?K:0)),Ye&&(Ye=`${$e}${Ye}`),ge=[E.createElement("span",{key:"int",className:`${ee}-content-value-int`},De,dt),Ye&&E.createElement("span",{key:"decimal",className:`${ee}-content-value-decimal`},Ye)]}}return E.createElement("span",{className:`${ee}-content-value`},ge)},Xe=pe(14747),lt=pe(91945),Ee=pe(45503);const ct=Me=>{const{componentCls:ke,marginXXS:Ne,padding:K,colorTextDescription:$e,titleFontSize:Fe,colorTextHeading:ee,contentFontSize:ge,fontFamily:Ce}=Me;return{[`${ke}`]:Object.assign(Object.assign({},(0,Xe.Wf)(Me)),{[`${ke}-title`]:{marginBottom:Ne,color:$e,fontSize:Fe},[`${ke}-skeleton`]:{paddingTop:K},[`${ke}-content`]:{color:ee,fontSize:ge,fontFamily:Ce,[`${ke}-content-value`]:{display:"inline-block",direction:"ltr"},[`${ke}-content-prefix, ${ke}-content-suffix`]:{display:"inline-block"},[`${ke}-content-prefix`]:{marginInlineEnd:Ne},[`${ke}-content-suffix`]:{marginInlineStart:Ne}}})}},vt=Me=>{const{fontSizeHeading3:ke,fontSize:Ne}=Me;return{titleFontSize:Ne,contentFontSize:ke}};var ft=(0,lt.I$)("Statistic",Me=>{const ke=(0,Ee.TS)(Me,{});return[ct(ke)]},vt),ue=function(Me,ke){var Ne={};for(var K in Me)Object.prototype.hasOwnProperty.call(Me,K)&&ke.indexOf(K)<0&&(Ne[K]=Me[K]);if(Me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $e=0,K=Object.getOwnPropertySymbols(Me);$e<K.length;$e++)ke.indexOf(K[$e])<0&&Object.prototype.propertyIsEnumerable.call(Me,K[$e])&&(Ne[K[$e]]=Me[K[$e]]);return Ne},Ot=Me=>{const{prefixCls:ke,className:Ne,rootClassName:K,style:$e,valueStyle:Fe,value:ee=0,title:ge,valueRender:Ce,prefix:Oe,suffix:De,loading:dt=!1,formatter:Ye,precision:xt,decimalSeparator:pt=".",groupSeparator:Rt=",",onMouseEnter:It,onMouseLeave:Et}=Me,Mt=ue(Me,["prefixCls","className","rootClassName","style","valueStyle","value","title","valueRender","prefix","suffix","loading","formatter","precision","decimalSeparator","groupSeparator","onMouseEnter","onMouseLeave"]),{getPrefixCls:ii,direction:oi,statistic:oe}=E.useContext(Re.E_),x=ii("statistic",ke),[M,F,j]=ft(x),$=E.createElement(nt,{decimalSeparator:pt,groupSeparator:Rt,prefixCls:x,formatter:Ye,precision:xt,value:ee}),se=ce()(x,{[`${x}-rtl`]:oi==="rtl"},oe==null?void 0:oe.className,Ne,K,F,j),le=(0,Ke.Z)(Mt,{aria:!0,data:!0});return M(E.createElement("div",Object.assign({},le,{className:se,style:Object.assign(Object.assign({},oe==null?void 0:oe.style),$e),onMouseEnter:It,onMouseLeave:Et}),ge&&E.createElement("div",{className:`${x}-title`},ge),E.createElement(jt.Z,{paragraph:!1,loading:dt,className:`${x}-skeleton`},E.createElement("div",{style:Fe,className:`${x}-content`},Oe&&E.createElement("span",{className:`${x}-content-prefix`},Oe),Ce?Ce($):$,De&&E.createElement("span",{className:`${x}-content-suffix`},De)))))};const Qt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function Ut(Me,ke){let Ne=Me;const K=/\[[^\]]*]/g,$e=(ke.match(K)||[]).map(Ce=>Ce.slice(1,-1)),Fe=ke.replace(K,"[]"),ee=Qt.reduce((Ce,Oe)=>{let[De,dt]=Oe;if(Ce.includes(De)){const Ye=Math.floor(Ne/dt);return Ne-=Ye*dt,Ce.replace(new RegExp(`${De}+`,"g"),xt=>{const pt=xt.length;return Ye.toString().padStart(pt,"0")})}return Ce},Fe);let ge=0;return ee.replace(K,()=>{const Ce=$e[ge];return ge+=1,Ce})}function Pt(Me,ke){const{format:Ne=""}=ke,K=new Date(Me).getTime(),$e=Date.now(),Fe=Math.max(K-$e,0);return Ut(Fe,Ne)}var Dt=function(Me,ke){var Ne={};for(var K in Me)Object.prototype.hasOwnProperty.call(Me,K)&&ke.indexOf(K)<0&&(Ne[K]=Me[K]);if(Me!=null&&typeof Object.getOwnPropertySymbols=="function")for(var $e=0,K=Object.getOwnPropertySymbols(Me);$e<K.length;$e++)ke.indexOf(K[$e])<0&&Object.prototype.propertyIsEnumerable.call(Me,K[$e])&&(Ne[K[$e]]=Me[K[$e]]);return Ne};const Gt=1e3/30;function $t(Me){return new Date(Me).getTime()}const at=Me=>{const{value:ke,format:Ne="HH:mm:ss",onChange:K,onFinish:$e}=Me,Fe=Dt(Me,["value","format","onChange","onFinish"]),ee=(0,ae.Z)(),ge=E.useRef(null),Ce=()=>{$e==null||$e(),ge.current&&(clearInterval(ge.current),ge.current=null)},Oe=()=>{const Ye=$t(ke);Ye>=Date.now()&&(ge.current=setInterval(()=>{ee(),K==null||K(Ye-Date.now()),Ye<Date.now()&&Ce()},Gt))};E.useEffect(()=>(Oe(),()=>{ge.current&&(clearInterval(ge.current),ge.current=null)}),[ke]);const De=(Ye,xt)=>Pt(Ye,Object.assign(Object.assign({},xt),{format:Ne})),dt=Ye=>(0,xe.Tm)(Ye,{title:void 0});return E.createElement(Ot,Object.assign({},Fe,{value:ke,valueRender:dt,formatter:De}))};var Le=E.memo(at);Ot.Countdown=Le;var He=Ot},66309:function(Di,ti,pe){pe.d(ti,{Z:function(){return Ne}});var E=pe(67294),ae=pe(93967),xe=pe.n(ae),z=pe(98423),ce=pe(98787),Ke=pe(69760),Re=pe(96159),jt=pe(45353),it=pe(53124),nt=pe(6731),Xe=pe(10274),lt=pe(14747),Ee=pe(45503),ct=pe(91945);const vt=K=>{const{paddingXXS:$e,lineWidth:Fe,tagPaddingHorizontal:ee,componentCls:ge,calc:Ce}=K,Oe=Ce(ee).sub(Fe).equal(),De=Ce($e).sub(Fe).equal();return{[ge]:Object.assign(Object.assign({},(0,lt.Wf)(K)),{display:"inline-block",height:"auto",marginInlineEnd:K.marginXS,paddingInline:Oe,fontSize:K.tagFontSize,lineHeight:K.tagLineHeight,whiteSpace:"nowrap",background:K.defaultBg,border:`${(0,nt.bf)(K.lineWidth)} ${K.lineType} ${K.colorBorder}`,borderRadius:K.borderRadiusSM,opacity:1,transition:`all ${K.motionDurationMid}`,textAlign:"start",position:"relative",[`&${ge}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:K.defaultColor},[`${ge}-close-icon`]:{marginInlineStart:De,fontSize:K.tagIconSize,color:K.colorTextDescription,cursor:"pointer",transition:`all ${K.motionDurationMid}`,"&:hover":{color:K.colorTextHeading}},[`&${ge}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${K.iconCls}-close, ${K.iconCls}-close:hover`]:{color:K.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${ge}-checkable-checked):hover`]:{color:K.colorPrimary,backgroundColor:K.colorFillSecondary},"&:active, &-checked":{color:K.colorTextLightSolid},"&-checked":{backgroundColor:K.colorPrimary,"&:hover":{backgroundColor:K.colorPrimaryHover}},"&:active":{backgroundColor:K.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${K.iconCls} + span, > span + ${K.iconCls}`]:{marginInlineStart:Oe}}),[`${ge}-borderless`]:{borderColor:"transparent",background:K.tagBorderlessBg}}},ft=K=>{const{lineWidth:$e,fontSizeIcon:Fe,calc:ee}=K,ge=K.fontSizeSM;return(0,Ee.TS)(K,{tagFontSize:ge,tagLineHeight:(0,nt.bf)(ee(K.lineHeightSM).mul(ge).equal()),tagIconSize:ee(Fe).sub(ee($e).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:K.defaultBg})},ue=K=>({defaultBg:new Xe.C(K.colorFillQuaternary).onBackground(K.colorBgContainer).toHexString(),defaultColor:K.colorText});var kt=(0,ct.I$)("Tag",K=>{const $e=ft(K);return vt($e)},ue),Ot=function(K,$e){var Fe={};for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&$e.indexOf(ee)<0&&(Fe[ee]=K[ee]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,ee=Object.getOwnPropertySymbols(K);ge<ee.length;ge++)$e.indexOf(ee[ge])<0&&Object.prototype.propertyIsEnumerable.call(K,ee[ge])&&(Fe[ee[ge]]=K[ee[ge]]);return Fe},Ut=E.forwardRef((K,$e)=>{const{prefixCls:Fe,style:ee,className:ge,checked:Ce,onChange:Oe,onClick:De}=K,dt=Ot(K,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:Ye,tag:xt}=E.useContext(it.E_),pt=oi=>{Oe==null||Oe(!Ce),De==null||De(oi)},Rt=Ye("tag",Fe),[It,Et,Mt]=kt(Rt),ii=xe()(Rt,`${Rt}-checkable`,{[`${Rt}-checkable-checked`]:Ce},xt==null?void 0:xt.className,ge,Et,Mt);return It(E.createElement("span",Object.assign({},dt,{ref:$e,style:Object.assign(Object.assign({},ee),xt==null?void 0:xt.style),className:ii,onClick:pt})))}),Pt=pe(98719);const Dt=K=>(0,Pt.Z)(K,($e,Fe)=>{let{textColor:ee,lightBorderColor:ge,lightColor:Ce,darkColor:Oe}=Fe;return{[`${K.componentCls}${K.componentCls}-${$e}`]:{color:ee,background:Ce,borderColor:ge,"&-inverse":{color:K.colorTextLightSolid,background:Oe,borderColor:Oe},[`&${K.componentCls}-borderless`]:{borderColor:"transparent"}}}});var Gt=(0,ct.bk)(["Tag","preset"],K=>{const $e=ft(K);return Dt($e)},ue);function $t(K){return typeof K!="string"?K:K.charAt(0).toUpperCase()+K.slice(1)}const at=(K,$e,Fe)=>{const ee=$t(Fe);return{[`${K.componentCls}${K.componentCls}-${$e}`]:{color:K[`color${Fe}`],background:K[`color${ee}Bg`],borderColor:K[`color${ee}Border`],[`&${K.componentCls}-borderless`]:{borderColor:"transparent"}}}};var Le=(0,ct.bk)(["Tag","status"],K=>{const $e=ft(K);return[at($e,"success","Success"),at($e,"processing","Info"),at($e,"error","Error"),at($e,"warning","Warning")]},ue),He=function(K,$e){var Fe={};for(var ee in K)Object.prototype.hasOwnProperty.call(K,ee)&&$e.indexOf(ee)<0&&(Fe[ee]=K[ee]);if(K!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ge=0,ee=Object.getOwnPropertySymbols(K);ge<ee.length;ge++)$e.indexOf(ee[ge])<0&&Object.prototype.propertyIsEnumerable.call(K,ee[ge])&&(Fe[ee[ge]]=K[ee[ge]]);return Fe};const ke=E.forwardRef((K,$e)=>{const{prefixCls:Fe,className:ee,rootClassName:ge,style:Ce,children:Oe,icon:De,color:dt,onClose:Ye,bordered:xt=!0,visible:pt}=K,Rt=He(K,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:It,direction:Et,tag:Mt}=E.useContext(it.E_),[ii,oi]=E.useState(!0),oe=(0,z.Z)(Rt,["closeIcon","closable"]);E.useEffect(()=>{pt!==void 0&&oi(pt)},[pt]);const x=(0,ce.o2)(dt),M=(0,ce.yT)(dt),F=x||M,j=Object.assign(Object.assign({backgroundColor:dt&&!F?dt:void 0},Mt==null?void 0:Mt.style),Ce),$=It("tag",Fe),[se,le,Be]=kt($),et=xe()($,Mt==null?void 0:Mt.className,{[`${$}-${dt}`]:F,[`${$}-has-color`]:dt&&!F,[`${$}-hidden`]:!ii,[`${$}-rtl`]:Et==="rtl",[`${$}-borderless`]:!xt},ee,ge,le,Be),We=Ve=>{Ve.stopPropagation(),Ye==null||Ye(Ve),!Ve.defaultPrevented&&oi(!1)},[,_]=(0,Ke.Z)((0,Ke.w)(K),(0,Ke.w)(Mt),{closable:!1,closeIconRender:Ve=>{const ht=E.createElement("span",{className:`${$}-close-icon`,onClick:We},Ve);return(0,Re.wm)(Ve,ht,wt=>({onClick:gt=>{var Ft;(Ft=wt==null?void 0:wt.onClick)===null||Ft===void 0||Ft.call(wt,gt),We(gt)},className:xe()(wt==null?void 0:wt.className,`${$}-close-icon`)}))}}),Pe=typeof Rt.onClick=="function"||Oe&&Oe.type==="a",ye=De||null,Te=ye?E.createElement(E.Fragment,null,ye,Oe&&E.createElement("span",null,Oe)):Oe,je=E.createElement("span",Object.assign({},oe,{ref:$e,className:et,style:j}),Te,_,x&&E.createElement(Gt,{key:"preset",prefixCls:$}),M&&E.createElement(Le,{key:"status",prefixCls:$}));return se(Pe?E.createElement(jt.Z,{component:"Tag"},je):je)});ke.CheckableTag=Ut;var Ne=ke},53464:function(Di,ti,pe){pe.d(ti,{rV:function(){return fi}});var E=pe(41113),ae=pe(34155);class xe{constructor(y,P,N,U,ne,J,he,Je,Ze,Kt=0,D){this.p=y,this.stack=P,this.state=N,this.reducePos=U,this.pos=ne,this.score=J,this.buffer=he,this.bufferBase=Je,this.curContext=Ze,this.lookAhead=Kt,this.parent=D}toString(){return`[${this.stack.filter((y,P)=>P%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(y,P,N=0){let U=y.parser.context;return new xe(y,[],P,N,N,0,[],0,U?new z(U,U.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(y,P){this.stack.push(this.state,P,this.bufferBase+this.buffer.length),this.state=y}reduce(y){var P;let N=y>>19,U=y&65535,{parser:ne}=this.p;this.reducePos<this.pos-25&&this.setLookAhead(this.pos);let J=ne.dynamicPrecedence(U);if(J&&(this.score+=J),N==0){this.pushState(ne.getGoto(this.state,U,!0),this.reducePos),U<ne.minRepeatTerm&&this.storeNode(U,this.reducePos,this.reducePos,4,!0),this.reduceContext(U,this.reducePos);return}let he=this.stack.length-(N-1)*3-(y&262144?6:0),Je=he?this.stack[he-2]:this.p.ranges[0].from,Ze=this.reducePos-Je;Ze>=2e3&&!(!((P=this.p.parser.nodeSet.types[U])===null||P===void 0)&&P.isAnonymous)&&(Je==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=Ze):this.p.lastBigReductionSize<Ze&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=Je,this.p.lastBigReductionSize=Ze));let Kt=he?this.stack[he-1]:0,D=this.bufferBase+this.buffer.length-Kt;if(U<ne.minRepeatTerm||y&131072){let a=ne.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(U,Je,a,D+4,!0)}if(y&262144)this.state=this.stack[he];else{let a=this.stack[he-3];this.state=ne.getGoto(a,U,!0)}for(;this.stack.length>he;)this.stack.pop();this.reduceContext(U,Je)}storeNode(y,P,N,U=4,ne=!1){if(y==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let J=this,he=this.buffer.length;if(he==0&&J.parent&&(he=J.bufferBase-J.parent.bufferBase,J=J.parent),he>0&&J.buffer[he-4]==0&&J.buffer[he-1]>-1){if(P==N)return;if(J.buffer[he-2]>=P){J.buffer[he-2]=N;return}}}if(!ne||this.pos==N)this.buffer.push(y,P,N,U);else{let J=this.buffer.length;if(J>0&&this.buffer[J-4]!=0)for(;J>0&&this.buffer[J-2]>N;)this.buffer[J]=this.buffer[J-4],this.buffer[J+1]=this.buffer[J-3],this.buffer[J+2]=this.buffer[J-2],this.buffer[J+3]=this.buffer[J-1],J-=4,U>4&&(U-=4);this.buffer[J]=y,this.buffer[J+1]=P,this.buffer[J+2]=N,this.buffer[J+3]=U}}shift(y,P,N,U){if(y&131072)this.pushState(y&65535,this.pos);else if(y&262144)this.pos=U,this.shiftContext(P,N),P<=this.p.parser.maxNode&&this.buffer.push(P,N,U,4);else{let ne=y,{parser:J}=this.p;(U>this.pos||P<=J.maxNode)&&(this.pos=U,J.stateFlag(ne,1)||(this.reducePos=U)),this.pushState(ne,N),this.shiftContext(P,N),P<=J.maxNode&&this.buffer.push(P,N,U,4)}}apply(y,P,N,U){y&65536?this.reduce(y):this.shift(y,P,N,U)}useNode(y,P){let N=this.p.reused.length-1;(N<0||this.p.reused[N]!=y)&&(this.p.reused.push(y),N++);let U=this.pos;this.reducePos=this.pos=U+y.length,this.pushState(P,U),this.buffer.push(N,U,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,y,this,this.p.stream.reset(this.pos-y.length)))}split(){let y=this,P=y.buffer.length;for(;P>0&&y.buffer[P-2]>y.reducePos;)P-=4;let N=y.buffer.slice(P),U=y.bufferBase+P;for(;y&&U==y.bufferBase;)y=y.parent;return new xe(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,N,U,this.curContext,this.lookAhead,y)}recoverByDelete(y,P){let N=y<=this.p.parser.maxNode;N&&this.storeNode(y,this.pos,P,4),this.storeNode(0,this.pos,P,N?8:4),this.pos=this.reducePos=P,this.score-=190}canShift(y){for(let P=new ce(this);;){let N=this.p.parser.stateSlot(P.state,4)||this.p.parser.hasAction(P.state,y);if(N==0)return!1;if(!(N&65536))return!0;P.reduce(N)}}recoverByInsert(y){if(this.stack.length>=300)return[];let P=this.p.parser.nextStates(this.state);if(P.length>8||this.stack.length>=120){let U=[];for(let ne=0,J;ne<P.length;ne+=2)(J=P[ne+1])!=this.state&&this.p.parser.hasAction(J,y)&&U.push(P[ne],J);if(this.stack.length<120)for(let ne=0;U.length<8&&ne<P.length;ne+=2){let J=P[ne+1];U.some((he,Je)=>Je&1&&he==J)||U.push(P[ne],J)}P=U}let N=[];for(let U=0;U<P.length&&N.length<4;U+=2){let ne=P[U+1];if(ne==this.state)continue;let J=this.split();J.pushState(ne,this.pos),J.storeNode(0,J.pos,J.pos,4,!0),J.shiftContext(P[U],this.pos),J.reducePos=this.pos,J.score-=200,N.push(J)}return N}forceReduce(){let{parser:y}=this.p,P=y.stateSlot(this.state,5);if(!(P&65536))return!1;if(!y.validAction(this.state,P)){let N=P>>19,U=P&65535,ne=this.stack.length-N*3;if(ne<0||y.getGoto(this.stack[ne],U,!1)<0){let J=this.findForcedReduction();if(J==null)return!1;P=J}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(P),!0}findForcedReduction(){let{parser:y}=this.p,P=[],N=(U,ne)=>{if(!P.includes(U))return P.push(U),y.allActions(U,J=>{if(!(J&393216))if(J&65536){let he=(J>>19)-ne;if(he>1){let Je=J&65535,Ze=this.stack.length-he*3;if(Ze>=0&&y.getGoto(this.stack[Ze],Je,!1)>=0)return he<<19|65536|Je}}else{let he=N(J,ne+1);if(he!=null)return he}})};return N(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:y}=this.p;return y.data[y.stateSlot(this.state,1)]==65535&&!y.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(y){if(this.state!=y.state||this.stack.length!=y.stack.length)return!1;for(let P=0;P<this.stack.length;P+=3)if(this.stack[P]!=y.stack[P])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(y){return this.p.parser.dialect.flags[y]}shiftContext(y,P){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,y,this,this.p.stream.reset(P)))}reduceContext(y,P){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,y,this,this.p.stream.reset(P)))}emitContext(){let y=this.buffer.length-1;(y<0||this.buffer[y]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let y=this.buffer.length-1;(y<0||this.buffer[y]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(y){if(y!=this.curContext.context){let P=new z(this.curContext.tracker,y);P.hash!=this.curContext.hash&&this.emitContext(),this.curContext=P}}setLookAhead(y){y>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=y)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class z{constructor(y,P){this.tracker=y,this.context=P,this.hash=y.strict?y.hash(P):0}}class ce{constructor(y){this.start=y,this.state=y.state,this.stack=y.stack,this.base=this.stack.length}reduce(y){let P=y&65535,N=y>>19;N==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(N-1)*3;let U=this.start.p.parser.getGoto(this.stack[this.base-3],P,!0);this.state=U}}class Ke{constructor(y,P,N){this.stack=y,this.pos=P,this.index=N,this.buffer=y.buffer,this.index==0&&this.maybeNext()}static create(y,P=y.bufferBase+y.buffer.length){return new Ke(y,P,P-y.bufferBase)}maybeNext(){let y=this.stack.parent;y!=null&&(this.index=this.stack.bufferBase-y.bufferBase,this.stack=y,this.buffer=y.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Ke(this.stack,this.pos,this.index)}}function Re(I,y=Uint16Array){if(typeof I!="string")return I;let P=null;for(let N=0,U=0;N<I.length;){let ne=0;for(;;){let J=I.charCodeAt(N++),he=!1;if(J==126){ne=65535;break}J>=92&&J--,J>=34&&J--;let Je=J-32;if(Je>=46&&(Je-=46,he=!0),ne+=Je,he)break;ne*=46}P?P[U++]=ne:P=new y(ne)}return P}class jt{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const it=new jt;class nt{constructor(y,P){this.input=y,this.ranges=P,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=it,this.rangeIndex=0,this.pos=this.chunkPos=P[0].from,this.range=P[0],this.end=P[P.length-1].to,this.readNext()}resolveOffset(y,P){let N=this.range,U=this.rangeIndex,ne=this.pos+y;for(;ne<N.from;){if(!U)return null;let J=this.ranges[--U];ne-=N.from-J.to,N=J}for(;P<0?ne>N.to:ne>=N.to;){if(U==this.ranges.length-1)return null;let J=this.ranges[++U];ne+=J.from-N.to,N=J}return ne}clipPos(y){if(y>=this.range.from&&y<this.range.to)return y;for(let P of this.ranges)if(P.to>y)return Math.max(y,P.from);return this.end}peek(y){let P=this.chunkOff+y,N,U;if(P>=0&&P<this.chunk.length)N=this.pos+y,U=this.chunk.charCodeAt(P);else{let ne=this.resolveOffset(y,1);if(ne==null)return-1;if(N=ne,N>=this.chunk2Pos&&N<this.chunk2Pos+this.chunk2.length)U=this.chunk2.charCodeAt(N-this.chunk2Pos);else{let J=this.rangeIndex,he=this.range;for(;he.to<=N;)he=this.ranges[++J];this.chunk2=this.input.chunk(this.chunk2Pos=N),N+this.chunk2.length>he.to&&(this.chunk2=this.chunk2.slice(0,he.to-N)),U=this.chunk2.charCodeAt(0)}}return N>=this.token.lookAhead&&(this.token.lookAhead=N+1),U}acceptToken(y,P=0){let N=P?this.resolveOffset(P,-1):this.pos;if(N==null||N<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=y,this.token.end=N}acceptTokenTo(y,P){this.token.value=y,this.token.end=P}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:y,chunkPos:P}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=y,this.chunk2Pos=P,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let y=this.input.chunk(this.pos),P=this.pos+y.length;this.chunk=P>this.range.to?y.slice(0,this.range.to-this.pos):y,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(y=1){for(this.chunkOff+=y;this.pos+y>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();y-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=y,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(y,P){if(P?(this.token=P,P.start=y,P.lookAhead=y+1,P.value=P.extended=-1):this.token=it,this.pos!=y){if(this.pos=y,y==this.end)return this.setDone(),this;for(;y<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;y>=this.range.to;)this.range=this.ranges[++this.rangeIndex];y>=this.chunkPos&&y<this.chunkPos+this.chunk.length?this.chunkOff=y-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(y,P){if(y>=this.chunkPos&&P<=this.chunkPos+this.chunk.length)return this.chunk.slice(y-this.chunkPos,P-this.chunkPos);if(y>=this.chunk2Pos&&P<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(y-this.chunk2Pos,P-this.chunk2Pos);if(y>=this.range.from&&P<=this.range.to)return this.input.read(y,P);let N="";for(let U of this.ranges){if(U.from>=P)break;U.to>y&&(N+=this.input.read(Math.max(U.from,y),Math.min(U.to,P)))}return N}}class Xe{constructor(y,P){this.data=y,this.id=P}token(y,P){let{parser:N}=P.p;ct(this.data,y,P,this.id,N.data,N.tokenPrecTable)}}Xe.prototype.contextual=Xe.prototype.fallback=Xe.prototype.extend=!1;class lt{constructor(y,P,N){this.precTable=P,this.elseToken=N,this.data=typeof y=="string"?Re(y):y}token(y,P){let N=y.pos,U=0;for(;;){let ne=y.next<0,J=y.resolveOffset(1,1);if(ct(this.data,y,P,0,this.data,this.precTable),y.token.value>-1)break;if(this.elseToken==null)return;if(ne||U++,J==null)break;y.reset(J,y.token)}U&&(y.reset(N,y.token),y.acceptToken(this.elseToken,U))}}lt.prototype.contextual=Xe.prototype.fallback=Xe.prototype.extend=!1;class Ee{constructor(y,P={}){this.token=y,this.contextual=!!P.contextual,this.fallback=!!P.fallback,this.extend=!!P.extend}}function ct(I,y,P,N,U,ne){let J=0,he=1<<N,{dialect:Je}=P.p.parser;e:for(;he&I[J];){let Ze=I[J+1];for(let d=J+3;d<Ze;d+=2)if((I[d+1]&he)>0){let m=I[d];if(Je.allows(m)&&(y.token.value==-1||y.token.value==m||ft(m,y.token.value,U,ne))){y.acceptToken(m);break}}let Kt=y.next,D=0,a=I[J+2];if(y.next<0&&a>D&&I[Ze+a*3-3]==65535){J=I[Ze+a*3-1];continue e}for(;D<a;){let d=D+a>>1,m=Ze+d+(d<<1),k=I[m],R=I[m+1]||65536;if(Kt<k)a=d;else if(Kt>=R)D=d+1;else{J=I[m+2],y.advance();continue e}}break}}function vt(I,y,P){for(let N=y,U;(U=I[N])!=65535;N++)if(U==P)return N-y;return-1}function ft(I,y,P,N){let U=vt(P,N,y);return U<0||vt(P,N,I)<U}const ue=typeof ae!="undefined"&&{NODE_ENV:"production",PUBLIC_PATH:"/"}&&/\bparse\b/.test({NODE_ENV:"production",PUBLIC_PATH:"/"}.LOG);let kt=null;function Ot(I,y,P){let N=I.cursor(E.vj.IncludeAnonymous);for(N.moveTo(y);;)if(!(P<0?N.childBefore(y):N.childAfter(y)))for(;;){if((P<0?N.to<y:N.from>y)&&!N.type.isError)return P<0?Math.max(0,Math.min(N.to-1,y-25)):Math.min(I.length,Math.max(N.from+1,y+25));if(P<0?N.prevSibling():N.nextSibling())break;if(!N.parent())return P<0?0:I.length}}class Qt{constructor(y,P){this.fragments=y,this.nodeSet=P,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let y=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(y){for(this.safeFrom=y.openStart?Ot(y.tree,y.from+y.offset,1)-y.offset:y.from,this.safeTo=y.openEnd?Ot(y.tree,y.to+y.offset,-1)-y.offset:y.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(y.tree),this.start.push(-y.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(y){if(y<this.nextStart)return null;for(;this.fragment&&this.safeTo<=y;)this.nextFragment();if(!this.fragment)return null;for(;;){let P=this.trees.length-1;if(P<0)return this.nextFragment(),null;let N=this.trees[P],U=this.index[P];if(U==N.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let ne=N.children[U],J=this.start[P]+N.positions[U];if(J>y)return this.nextStart=J,null;if(ne instanceof E.mp){if(J==y){if(J<this.safeFrom)return null;let he=J+ne.length;if(he<=this.safeTo){let Je=ne.prop(E.md.lookAhead);if(!Je||he+Je<this.fragment.to)return ne}}this.index[P]++,J+ne.length>=Math.max(this.safeFrom,y)&&(this.trees.push(ne),this.start.push(J),this.index.push(0))}else this.index[P]++,this.nextStart=J+ne.length}}}class Ut{constructor(y,P){this.stream=P,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=y.tokenizers.map(N=>new jt)}getActions(y){let P=0,N=null,{parser:U}=y.p,{tokenizers:ne}=U,J=U.stateSlot(y.state,3),he=y.curContext?y.curContext.hash:0,Je=0;for(let Ze=0;Ze<ne.length;Ze++){if(!(1<<Ze&J))continue;let Kt=ne[Ze],D=this.tokens[Ze];if(!(N&&!Kt.fallback)&&((Kt.contextual||D.start!=y.pos||D.mask!=J||D.context!=he)&&(this.updateCachedToken(D,Kt,y),D.mask=J,D.context=he),D.lookAhead>D.end+25&&(Je=Math.max(D.lookAhead,Je)),D.value!=0)){let a=P;if(D.extended>-1&&(P=this.addActions(y,D.extended,D.end,P)),P=this.addActions(y,D.value,D.end,P),!Kt.extend&&(N=D,P>a))break}}for(;this.actions.length>P;)this.actions.pop();return Je&&y.setLookAhead(Je),!N&&y.pos==this.stream.end&&(N=new jt,N.value=y.p.parser.eofTerm,N.start=N.end=y.pos,P=this.addActions(y,N.value,N.end,P)),this.mainToken=N,this.actions}getMainToken(y){if(this.mainToken)return this.mainToken;let P=new jt,{pos:N,p:U}=y;return P.start=N,P.end=Math.min(N+1,U.stream.end),P.value=N==U.stream.end?U.parser.eofTerm:0,P}updateCachedToken(y,P,N){let U=this.stream.clipPos(N.pos);if(P.token(this.stream.reset(U,y),N),y.value>-1){let{parser:ne}=N.p;for(let J=0;J<ne.specialized.length;J++)if(ne.specialized[J]==y.value){let he=ne.specializers[J](this.stream.read(y.start,y.end),N);if(he>=0&&N.p.parser.dialect.allows(he>>1)){he&1?y.extended=he>>1:y.value=he>>1;break}}}else y.value=0,y.end=this.stream.clipPos(U+1)}putAction(y,P,N,U){for(let ne=0;ne<U;ne+=3)if(this.actions[ne]==y)return U;return this.actions[U++]=y,this.actions[U++]=P,this.actions[U++]=N,U}addActions(y,P,N,U){let{state:ne}=y,{parser:J}=y.p,{data:he}=J;for(let Je=0;Je<2;Je++)for(let Ze=J.stateSlot(ne,Je?2:1);;Ze+=3){if(he[Ze]==65535)if(he[Ze+1]==1)Ze=He(he,Ze+2);else{U==0&&he[Ze+1]==2&&(U=this.putAction(He(he,Ze+2),P,N,U));break}he[Ze]==P&&(U=this.putAction(He(he,Ze+1),P,N,U))}return U}}class Pt{constructor(y,P,N,U){this.parser=y,this.input=P,this.ranges=U,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new nt(P,U),this.tokens=new Ut(y,this.stream),this.topTerm=y.top[1];let{from:ne}=U[0];this.stacks=[xe.start(this,y.top[0],ne)],this.fragments=N.length&&this.stream.end-ne>y.bufferLength*4?new Qt(N,y.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let y=this.stacks,P=this.minStackPos,N=this.stacks=[],U,ne;if(this.bigReductionCount>300&&y.length==1){let[J]=y;for(;J.forceReduce()&&J.stack.length&&J.stack[J.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let J=0;J<y.length;J++){let he=y[J];for(;;){if(this.tokens.mainToken=null,he.pos>P)N.push(he);else{if(this.advanceStack(he,N,y))continue;{U||(U=[],ne=[]),U.push(he);let Je=this.tokens.getMainToken(he);ne.push(Je.value,Je.end)}}break}}if(!N.length){let J=U&&Me(U);if(J)return ue&&console.log("Finish with "+this.stackID(J)),this.stackToTree(J);if(this.parser.strict)throw ue&&U&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+P);this.recovering||(this.recovering=5)}if(this.recovering&&U){let J=this.stoppedAt!=null&&U[0].pos>this.stoppedAt?U[0]:this.runRecovery(U,ne,N);if(J)return ue&&console.log("Force-finish "+this.stackID(J)),this.stackToTree(J.forceAll())}if(this.recovering){let J=this.recovering==1?1:this.recovering*3;if(N.length>J)for(N.sort((he,Je)=>Je.score-he.score);N.length>J;)N.pop();N.some(he=>he.reducePos>P)&&this.recovering--}else if(N.length>1){e:for(let J=0;J<N.length-1;J++){let he=N[J];for(let Je=J+1;Je<N.length;Je++){let Ze=N[Je];if(he.sameState(Ze)||he.buffer.length>500&&Ze.buffer.length>500)if((he.score-Ze.score||he.buffer.length-Ze.buffer.length)>0)N.splice(Je--,1);else{N.splice(J--,1);continue e}}}N.length>12&&N.splice(12,N.length-12)}this.minStackPos=N[0].pos;for(let J=1;J<N.length;J++)N[J].pos<this.minStackPos&&(this.minStackPos=N[J].pos);return null}stopAt(y){if(this.stoppedAt!=null&&this.stoppedAt<y)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=y}advanceStack(y,P,N){let U=y.pos,{parser:ne}=this,J=ue?this.stackID(y)+" -> ":"";if(this.stoppedAt!=null&&U>this.stoppedAt)return y.forceReduce()?y:null;if(this.fragments){let Ze=y.curContext&&y.curContext.tracker.strict,Kt=Ze?y.curContext.hash:0;for(let D=this.fragments.nodeAt(U);D;){let a=this.parser.nodeSet.types[D.type.id]==D.type?ne.getGoto(y.state,D.type.id):-1;if(a>-1&&D.length&&(!Ze||(D.prop(E.md.contextHash)||0)==Kt))return y.useNode(D,a),ue&&console.log(J+this.stackID(y)+` (via reuse of ${ne.getName(D.type.id)})`),!0;if(!(D instanceof E.mp)||D.children.length==0||D.positions[0]>0)break;let d=D.children[0];if(d instanceof E.mp&&D.positions[0]==0)D=d;else break}}let he=ne.stateSlot(y.state,4);if(he>0)return y.reduce(he),ue&&console.log(J+this.stackID(y)+` (via always-reduce ${ne.getName(he&65535)})`),!0;if(y.stack.length>=8400)for(;y.stack.length>6e3&&y.forceReduce(););let Je=this.tokens.getActions(y);for(let Ze=0;Ze<Je.length;){let Kt=Je[Ze++],D=Je[Ze++],a=Je[Ze++],d=Ze==Je.length||!N,m=d?y:y.split(),k=this.tokens.mainToken;if(m.apply(Kt,D,k?k.start:m.pos,a),ue&&console.log(J+this.stackID(m)+` (via ${Kt&65536?`reduce of ${ne.getName(Kt&65535)}`:"shift"} for ${ne.getName(D)} @ ${U}${m==y?"":", split"})`),d)return!0;m.pos>U?P.push(m):N.push(m)}return!1}advanceFully(y,P){let N=y.pos;for(;;){if(!this.advanceStack(y,null,null))return!1;if(y.pos>N)return Dt(y,P),!0}}runRecovery(y,P,N){let U=null,ne=!1;for(let J=0;J<y.length;J++){let he=y[J],Je=P[J<<1],Ze=P[(J<<1)+1],Kt=ue?this.stackID(he)+" -> ":"";if(he.deadEnd&&(ne||(ne=!0,he.restart(),ue&&console.log(Kt+this.stackID(he)+" (restarted)"),this.advanceFully(he,N))))continue;let D=he.split(),a=Kt;for(let d=0;D.forceReduce()&&d<10&&(ue&&console.log(a+this.stackID(D)+" (via force-reduce)"),!this.advanceFully(D,N));d++)ue&&(a=this.stackID(D)+" -> ");for(let d of he.recoverByInsert(Je))ue&&console.log(Kt+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,N);this.stream.end>he.pos?(Ze==he.pos&&(Ze++,Je=0),he.recoverByDelete(Je,Ze),ue&&console.log(Kt+this.stackID(he)+` (via recover-delete ${this.parser.getName(Je)})`),Dt(he,N)):(!U||U.score<he.score)&&(U=he)}return U}stackToTree(y){return y.close(),E.mp.build({buffer:Ke.create(y),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:y.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(y){let P=(kt||(kt=new WeakMap)).get(y);return P||kt.set(y,P=String.fromCodePoint(this.nextStackID++)),P+y}}function Dt(I,y){for(let P=0;P<y.length;P++){let N=y[P];if(N.pos==I.pos&&N.sameState(I)){y[P].score<I.score&&(y[P]=I);return}}y.push(I)}class Gt{constructor(y,P,N){this.source=y,this.flags=P,this.disabled=N}allows(y){return!this.disabled||this.disabled[y]==0}}const $t=I=>I;class at{constructor(y){this.start=y.start,this.shift=y.shift||$t,this.reduce=y.reduce||$t,this.reuse=y.reuse||$t,this.hash=y.hash||(()=>0),this.strict=y.strict!==!1}}class Le extends E._b{constructor(y){if(super(),this.wrappers=[],y.version!=14)throw new RangeError(`Parser version (${y.version}) doesn't match runtime version (14)`);let P=y.nodeNames.split(" ");this.minRepeatTerm=P.length;for(let he=0;he<y.repeatNodeCount;he++)P.push("");let N=Object.keys(y.topRules).map(he=>y.topRules[he][1]),U=[];for(let he=0;he<P.length;he++)U.push([]);function ne(he,Je,Ze){U[he].push([Je,Je.deserialize(String(Ze))])}if(y.nodeProps)for(let he of y.nodeProps){let Je=he[0];typeof Je=="string"&&(Je=E.md[Je]);for(let Ze=1;Ze<he.length;){let Kt=he[Ze++];if(Kt>=0)ne(Kt,Je,he[Ze++]);else{let D=he[Ze+-Kt];for(let a=-Kt;a>0;a--)ne(he[Ze++],Je,D);Ze++}}}this.nodeSet=new E.Lj(P.map((he,Je)=>E.Jq.define({name:Je>=this.minRepeatTerm?void 0:he,id:Je,props:U[Je],top:N.indexOf(Je)>-1,error:Je==0,skipped:y.skippedNodes&&y.skippedNodes.indexOf(Je)>-1}))),y.propSources&&(this.nodeSet=this.nodeSet.extend(...y.propSources)),this.strict=!1,this.bufferLength=E.L3;let J=Re(y.tokenData);this.context=y.context,this.specializerSpecs=y.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let he=0;he<this.specializerSpecs.length;he++)this.specialized[he]=this.specializerSpecs[he].term;this.specializers=this.specializerSpecs.map(ke),this.states=Re(y.states,Uint32Array),this.data=Re(y.stateData),this.goto=Re(y.goto),this.maxTerm=y.maxTerm,this.tokenizers=y.tokenizers.map(he=>typeof he=="number"?new Xe(J,he):he),this.topRules=y.topRules,this.dialects=y.dialects||{},this.dynamicPrecedences=y.dynamicPrecedences||null,this.tokenPrecTable=y.tokenPrec,this.termNames=y.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(y,P,N){let U=new Pt(this,y,P,N);for(let ne of this.wrappers)U=ne(U,y,P,N);return U}getGoto(y,P,N=!1){let U=this.goto;if(P>=U[0])return-1;for(let ne=U[P+1];;){let J=U[ne++],he=J&1,Je=U[ne++];if(he&&N)return Je;for(let Ze=ne+(J>>1);ne<Ze;ne++)if(U[ne]==y)return Je;if(he)return-1}}hasAction(y,P){let N=this.data;for(let U=0;U<2;U++)for(let ne=this.stateSlot(y,U?2:1),J;;ne+=3){if((J=N[ne])==65535)if(N[ne+1]==1)J=N[ne=He(N,ne+2)];else{if(N[ne+1]==2)return He(N,ne+2);break}if(J==P||J==0)return He(N,ne+1)}return 0}stateSlot(y,P){return this.states[y*6+P]}stateFlag(y,P){return(this.stateSlot(y,0)&P)>0}validAction(y,P){return!!this.allActions(y,N=>N==P?!0:null)}allActions(y,P){let N=this.stateSlot(y,4),U=N?P(N):void 0;for(let ne=this.stateSlot(y,1);U==null;ne+=3){if(this.data[ne]==65535)if(this.data[ne+1]==1)ne=He(this.data,ne+2);else break;U=P(He(this.data,ne+1))}return U}nextStates(y){let P=[];for(let N=this.stateSlot(y,1);;N+=3){if(this.data[N]==65535)if(this.data[N+1]==1)N=He(this.data,N+2);else break;if(!(this.data[N+2]&1)){let U=this.data[N+1];P.some((ne,J)=>J&1&&ne==U)||P.push(this.data[N],U)}}return P}configure(y){let P=Object.assign(Object.create(Le.prototype),this);if(y.props&&(P.nodeSet=this.nodeSet.extend(...y.props)),y.top){let N=this.topRules[y.top];if(!N)throw new RangeError(`Invalid top rule name ${y.top}`);P.top=N}return y.tokenizers&&(P.tokenizers=this.tokenizers.map(N=>{let U=y.tokenizers.find(ne=>ne.from==N);return U?U.to:N})),y.specializers&&(P.specializers=this.specializers.slice(),P.specializerSpecs=this.specializerSpecs.map((N,U)=>{let ne=y.specializers.find(he=>he.from==N.external);if(!ne)return N;let J=Object.assign(Object.assign({},N),{external:ne.to});return P.specializers[U]=ke(J),J})),y.contextTracker&&(P.context=y.contextTracker),y.dialect&&(P.dialect=this.parseDialect(y.dialect)),y.strict!=null&&(P.strict=y.strict),y.wrap&&(P.wrappers=P.wrappers.concat(y.wrap)),y.bufferLength!=null&&(P.bufferLength=y.bufferLength),P}hasWrappers(){return this.wrappers.length>0}getName(y){return this.termNames?this.termNames[y]:String(y<=this.maxNode&&this.nodeSet.types[y].name||y)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(y){let P=this.dynamicPrecedences;return P==null?0:P[y]||0}parseDialect(y){let P=Object.keys(this.dialects),N=P.map(()=>!1);if(y)for(let ne of y.split(" ")){let J=P.indexOf(ne);J>=0&&(N[J]=!0)}let U=null;for(let ne=0;ne<P.length;ne++)if(!N[ne])for(let J=this.dialects[P[ne]],he;(he=this.data[J++])!=65535;)(U||(U=new Uint8Array(this.maxTerm+1)))[he]=1;return new Gt(y,N,U)}static deserialize(y){return new Le(y)}}function He(I,y){return I[y]|I[y+1]<<16}function Me(I){let y=null;for(let P of I){let N=P.p.stoppedAt;(P.pos==P.p.stream.end||N!=null&&P.pos>N)&&P.p.parser.stateFlag(P.state,2)&&(!y||y.score<P.score)&&(y=P)}return y}function ke(I){if(I.external){let y=I.extend?1:0;return(P,N)=>I.external(P,N)<<1|y}return I.get}var Ne=pe(35524);const K=63,$e=64,Fe=1,ee=2,ge=3,Ce=4,Oe=5,De=6,dt=7,Ye=65,xt=66,pt=8,Rt=9,It=10,Et=11,Mt=12,ii=13,oi=19,oe=20,x=29,M=33,F=34,j=47,$=0,se=1,le=2,Be=3,et=4;class We{constructor(y,P,N){this.parent=y,this.depth=P,this.type=N,this.hash=(y?y.hash+y.hash<<8:0)+P+(P<<4)+N}}We.top=new We(null,-1,$);function _(I,y){for(let P=0,N=y-I.pos-1;;N--,P++){let U=I.peek(N);if(ye(U)||U==-1)return P}}function Pe(I){return I==32||I==9}function ye(I){return I==10||I==13}function Te(I){return Pe(I)||ye(I)}function je(I){return I<0||Te(I)}const Ve=new at({start:We.top,reduce(I,y){return I.type==Be&&(y==oe||y==F)?I.parent:I},shift(I,y,P,N){if(y==ge)return new We(I,_(N,N.pos),se);if(y==Ye||y==Oe)return new We(I,_(N,N.pos),le);if(y==K)return I.parent;if(y==oi||y==M)return new We(I,0,Be);if(y==ii&&I.type==et)return I.parent;if(y==j){let U=/[1-9]/.exec(N.read(N.pos,P.pos));if(U)return new We(I,I.depth+ +U[0],et)}return I},hash(I){return I.hash}});function ht(I,y,P=0){return I.peek(P)==y&&I.peek(P+1)==y&&I.peek(P+2)==y&&je(I.peek(P+3))}const wt=new Ee((I,y)=>{if(I.next==-1&&y.canShift($e))return I.acceptToken($e);let P=I.peek(-1);if((ye(P)||P<0)&&y.context.type!=Be){if(ht(I,45))if(y.canShift(K))I.acceptToken(K);else return I.acceptToken(Fe,3);if(ht(I,46))if(y.canShift(K))I.acceptToken(K);else return I.acceptToken(ee,3);let N=0;for(;I.next==32;)N++,I.advance();(N<y.context.depth||N==y.context.depth&&y.context.type==se&&(I.next!=45||!je(I.peek(1))))&&I.next!=-1&&!ye(I.next)&&I.next!=35&&I.acceptToken(K,-N)}},{contextual:!0}),gt=new Ee((I,y)=>{if(y.context.type==Be){I.next==63&&(I.advance(),je(I.next)&&I.acceptToken(dt));return}if(I.next==45)I.advance(),je(I.next)&&I.acceptToken(y.context.type==se&&y.context.depth==_(I,I.pos-1)?Ce:ge);else if(I.next==63)I.advance(),je(I.next)&&I.acceptToken(y.context.type==le&&y.context.depth==_(I,I.pos-1)?De:Oe);else{let P=I.pos;for(;;)if(Pe(I.next)){if(I.pos==P)return;I.advance()}else if(I.next==33)Qe(I);else if(I.next==38)Ct(I);else if(I.next==42){Ct(I);break}else if(I.next==39||I.next==34){if(Ge(I,!0))break;return}else if(I.next==91||I.next==123){if(!tt(I))return;break}else{Ht(I,!0,!1,0);break}for(;Pe(I.next);)I.advance();if(I.next==58){if(I.pos==P&&y.canShift(x))return;let N=I.peek(1);je(N)&&I.acceptTokenTo(y.context.type==le&&y.context.depth==_(I,P)?xt:Ye,P)}}},{contextual:!0});function Ft(I){return I>32&&I<127&&I!=34&&I!=37&&I!=44&&I!=60&&I!=62&&I!=92&&I!=94&&I!=96&&I!=123&&I!=124&&I!=125}function ze(I){return I>=48&&I<=57||I>=97&&I<=102||I>=65&&I<=70}function Tt(I,y){return I.next==37?(I.advance(),ze(I.next)&&I.advance(),ze(I.next)&&I.advance(),!0):Ft(I.next)||y&&I.next==44?(I.advance(),!0):!1}function Qe(I){if(I.advance(),I.next==60){for(I.advance();;)if(!Tt(I,!0)){I.next==62&&I.advance();break}}else for(;Tt(I,!1););}function Ct(I){for(I.advance();!je(I.next)&&st(I.tag)!="f";)I.advance()}function Ge(I,y){let P=I.next,N=!1,U=I.pos;for(I.advance();;){let ne=I.next;if(ne<0)break;if(I.advance(),ne==P)if(ne==39)if(I.next==39)I.advance();else break;else break;else if(ne==92&&P==34)I.next>=0&&I.advance();else if(ye(ne)){if(y)return!1;N=!0}else if(y&&I.pos>=U+1024)return!1}return!N}function tt(I){for(let y=[],P=I.pos+1024;;)if(I.next==91||I.next==123)y.push(I.next),I.advance();else if(I.next==39||I.next==34){if(!Ge(I,!0))return!1}else if(I.next==93||I.next==125){if(y[y.length-1]!=I.next-2)return!1;if(y.pop(),I.advance(),!y.length)return!0}else{if(I.next<0||I.pos>P||ye(I.next))return!1;I.advance()}}const mt="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function st(I){return I<33?"u":I>125?"s":mt[I-33]}function zt(I,y){let P=st(I);return P!="u"&&!(y&&P=="f")}function Ht(I,y,P,N){if(st(I.next)=="s"||(I.next==63||I.next==58||I.next==45)&&zt(I.peek(1),P))I.advance();else return!1;let U=I.pos;for(;;){let ne=I.next,J=0,he=N+1;for(;Te(ne);){if(ye(ne)){if(y)return!1;he=0}else he++;ne=I.peek(++J)}if(!(ne>=0&&(ne==58?zt(I.peek(J+1),P):ne==35?I.peek(J-1)!=32:zt(ne,P)))||!P&&he<=N||he==0&&!P&&(ht(I,45,J)||ht(I,46,J)))break;if(y&&st(ne)=="f")return!1;for(let Ze=J;Ze>=0;Ze--)I.advance();if(y&&I.pos>U+1024)return!1}return!0}const St=new Ee((I,y)=>{if(I.next==33)Qe(I),I.acceptToken(Mt);else if(I.next==38||I.next==42){let P=I.next==38?It:Et;Ct(I),I.acceptToken(P)}else I.next==39||I.next==34?(Ge(I,!1),I.acceptToken(Rt)):Ht(I,!1,y.context.type==Be,y.context.depth)&&I.acceptToken(pt)}),si=new Ee((I,y)=>{let P=y.context.type==et?y.context.depth:-1,N=I.pos;e:for(;;){let U=0,ne=I.next;for(;ne==32;)ne=I.peek(++U);if(!U&&(ht(I,45,U)||ht(I,46,U))||!ye(ne)&&(P<0&&(P=Math.max(y.context.depth+1,U)),U<P))break;for(;;){if(I.next<0)break e;let J=ye(I.next);if(I.advance(),J)continue e;N=I.pos}}I.acceptTokenTo(ii,N)}),qt=(0,Ne.Gv)({DirectiveName:Ne.pJ.keyword,DirectiveContent:Ne.pJ.attributeValue,"DirectiveEnd DocEnd":Ne.pJ.meta,QuotedLiteral:Ne.pJ.string,BlockLiteralHeader:Ne.pJ.special(Ne.pJ.string),BlockLiteralContent:Ne.pJ.content,Literal:Ne.pJ.content,"Key/Literal Key/QuotedLiteral":Ne.pJ.definition(Ne.pJ.propertyName),"Anchor Alias":Ne.pJ.labelName,Tag:Ne.pJ.typeName,Comment:Ne.pJ.lineComment,": , -":Ne.pJ.separator,"?":Ne.pJ.punctuation,"[ ]":Ne.pJ.squareBracket,"{ }":Ne.pJ.brace}),_t=Le.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:"\u26A0 DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:Ve,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[qt],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[wt,gt,St,si,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var rt=pe(59119);const Vt=Le.deserialize({version:14,states:"!vOQOPOOO]OPO'#C_OhOPO'#C^OOOO'#Cc'#CcOpOPO'#CaQOOOOOO{OPOOOOOO'#Cb'#CbO!WOPO'#C`O!`OPO,58xOOOO-E6a-E6aOOOO-E6`-E6`OOOO'#C_'#C_OOOO1G.d1G.d",stateData:"!h~OXPOYROWTP~OWVXXRXYRX~OYVOXSP~OXROYROWTX~OXROYROWTP~OYVOXSX~OX[O~OXY~",goto:"vWPPX[beioRUOQQOR]XRXQTTOUQWQRZWSSOURYS",nodeNames:"\u26A0 Document Frontmatter DashLine FrontmatterContent Body",maxTerm:10,skippedNodes:[0],repeatNodeCount:2,tokenData:"$z~RXOYnYZ!^Z]n]^!^^}n}!O!i!O;'Sn;'S;=`!c<%lOn~qXOYnYZ!^Z]n]^!^^;'Sn;'S;=`!c<%l~n~On~~!^~!cOY~~!fP;=`<%ln~!lZOYnYZ!^Z]n]^!^^}n}!O#_!O;'Sn;'S;=`!c<%l~n~On~~!^~#bZOYnYZ!^Z]n]^!^^}n}!O$T!O;'Sn;'S;=`!c<%l~n~On~~!^~$WXOYnYZ$sZ]n]^$s^;'Sn;'S;=`!c<%l~n~On~~$s~$zOX~Y~",tokenizers:[0],topRules:{Document:[0,1]},tokenPrec:67}),Nt=rt.qp.define({name:"yaml",parser:_t.configure({props:[rt.uj.add({Stream:I=>{for(let y=I.node.resolve(I.pos,-1);y&&y.to>=I.pos;y=y.parent){if(y.name=="BlockLiteralContent"&&y.from<y.to)return I.baseIndentFor(y);if(y.name=="BlockLiteral")return I.baseIndentFor(y)+I.unit;if(y.name=="BlockSequence"||y.name=="BlockMapping")return I.column(y.from,1);if(y.name=="QuotedLiteral")return null;if(y.name=="Literal"){let P=I.column(y.from,1);if(P==I.lineIndent(y.from,1))return P;if(y.to>I.pos)return null}}return null},FlowMapping:(0,rt.vw)({closing:"}"}),FlowSequence:(0,rt.vw)({closing:"]"})}),rt.x0.add({"FlowMapping FlowSequence":rt.Dv,"BlockSequence Pair BlockLiteral":(I,y)=>({from:y.doc.lineAt(I.from).to,to:I.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function fi(){return new rt.ri(Nt)}const hi=rt.qp.define({name:"yaml-frontmatter",parser:Vt.configure({props:[(0,Ne.Gv)({DashLine:Ne.pJ.meta})]})});function mi(I){let{language:y,support:P}=I.content instanceof LanguageSupport?I.content:{language:I.content,support:[]};return new LanguageSupport(hi.configure({wrap:parseMixed(N=>N.name=="FrontmatterContent"?{parser:Nt.parser}:N.name=="Body"?{parser:y.parser}:null)}),P)}},59119:function(Di,ti,pe){pe.d(ti,{Dv:function(){return F},Gn:function(){return ee},K0:function(){return $e},Qf:function(){return _t},R_:function(){return y},SS:function(){return K},Um:function(){return k},c:function(){return ke},e7:function(){return Qe},mi:function(){return si},n$:function(){return D},nF:function(){return fi},nY:function(){return oe},qp:function(){return lt},qz:function(){return Ee},ri:function(){return Le},uj:function(){return ge},vw:function(){return It},x0:function(){return M},y1:function(){return Ne}});var E=pe(41113),ae=pe(78120),xe=pe(75533),z=pe(35524),ce=pe(28699),Ke;const Re=new E.md;function jt(T){return ae.r$.define({combine:T?g=>g.concat(T):void 0})}const it=new E.md;class nt{constructor(g,w,L=[],H=""){this.data=g,this.name=H,ae.yy.prototype.hasOwnProperty("tree")||Object.defineProperty(ae.yy.prototype,"tree",{get(){return Ee(this)}}),this.parser=w,this.extension=[at.of(this),ae.yy.languageData.of((G,Y,be)=>{let ve=Xe(G,Y,be),qe=ve.type.prop(Re);if(!qe)return[];let yt=G.facet(qe),Yt=ve.type.prop(it);if(Yt){let yi=ve.resolve(Y-ve.from,be);for(let bi of Yt)if(bi.test(yi,G)){let Ei=G.facet(bi.facet);return bi.type=="replace"?Ei:Ei.concat(yt)}}return yt})].concat(L)}isActiveAt(g,w,L=-1){return Xe(g,w,L).type.prop(Re)==this.data}findRegions(g){let w=g.facet(at);if((w==null?void 0:w.data)==this.data)return[{from:0,to:g.doc.length}];if(!w||!w.allowsNesting)return[];let L=[],H=(G,Y)=>{if(G.prop(Re)==this.data){L.push({from:Y,to:Y+G.length});return}let be=G.prop(E.md.mounted);if(be){if(be.tree.prop(Re)==this.data){if(be.overlay)for(let ve of be.overlay)L.push({from:ve.from+Y,to:ve.to+Y});else L.push({from:Y,to:Y+G.length});return}else if(be.overlay){let ve=L.length;if(H(be.tree,be.overlay[0].from+Y),L.length>ve)return}}for(let ve=0;ve<G.children.length;ve++){let qe=G.children[ve];qe instanceof E.mp&&H(qe,G.positions[ve]+Y)}};return H(Ee(g),0),L}get allowsNesting(){return!0}}nt.setState=ae.Py.define();function Xe(T,g,w){let L=T.facet(at),H=Ee(T).topNode;if(!L||L.allowsNesting)for(let G=H;G;G=G.enter(g,w,E.vj.ExcludeBuffers))G.type.isTop&&(H=G);return H}class lt extends nt{constructor(g,w,L){super(g,w,[],L),this.parser=w}static define(g){let w=jt(g.languageData);return new lt(w,g.parser.configure({props:[Re.add(L=>L.isTop?w:void 0)]}),g.name)}configure(g,w){return new lt(this.data,this.parser.configure(g),w||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Ee(T){let g=T.field(nt.state,!1);return g?g.tree:E.mp.empty}function ct(T,g,w=50){var L;let H=(L=T.field(nt.state,!1))===null||L===void 0?void 0:L.context;if(!H)return null;let G=H.viewport;H.updateViewport({from:0,to:g});let Y=H.isDone(g)||H.work(w,g)?H.tree:null;return H.updateViewport(G),Y}function vt(T,g=T.doc.length){var w;return((w=T.field(nt.state,!1))===null||w===void 0?void 0:w.context.isDone(g))||!1}function ft(T,g=T.viewport.to,w=100){let L=ct(T.state,g,w);return L!=Ee(T.state)&&T.dispatch({}),!!L}function ue(T){var g;return((g=T.plugin($t))===null||g===void 0?void 0:g.isWorking())||!1}class kt{constructor(g){this.doc=g,this.cursorPos=0,this.string="",this.cursor=g.iter()}get length(){return this.doc.length}syncTo(g){return this.string=this.cursor.next(g-this.cursorPos).value,this.cursorPos=g+this.string.length,this.cursorPos-this.string.length}chunk(g){return this.syncTo(g),this.string}get lineChunks(){return!0}read(g,w){let L=this.cursorPos-this.string.length;return g<L||w>=this.cursorPos?this.doc.sliceString(g,w):this.string.slice(g-L,w-L)}}let Ot=null;class Qt{constructor(g,w,L=[],H,G,Y,be,ve){this.parser=g,this.state=w,this.fragments=L,this.tree=H,this.treeLen=G,this.viewport=Y,this.skipped=be,this.scheduleOn=ve,this.parse=null,this.tempSkipped=[]}static create(g,w,L){return new Qt(g,w,[],E.mp.empty,0,L,[],null)}startParse(){return this.parser.startParse(new kt(this.state.doc),this.fragments)}work(g,w){return w!=null&&w>=this.state.doc.length&&(w=void 0),this.tree!=E.mp.empty&&this.isDone(w!=null?w:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var L;if(typeof g=="number"){let H=Date.now()+g;g=()=>Date.now()>H}for(this.parse||(this.parse=this.startParse()),w!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>w)&&w<this.state.doc.length&&this.parse.stopAt(w);;){let H=this.parse.advance();if(H)if(this.fragments=this.withoutTempSkipped(E.i9.addTree(H,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(L=this.parse.stoppedAt)!==null&&L!==void 0?L:this.state.doc.length,this.tree=H,this.parse=null,this.treeLen<(w!=null?w:this.state.doc.length))this.parse=this.startParse();else return!0;if(g())return!1}})}takeTree(){let g,w;this.parse&&(g=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>g)&&this.parse.stopAt(g),this.withContext(()=>{for(;!(w=this.parse.advance()););}),this.treeLen=g,this.tree=w,this.fragments=this.withoutTempSkipped(E.i9.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(g){let w=Ot;Ot=this;try{return g()}finally{Ot=w}}withoutTempSkipped(g){for(let w;w=this.tempSkipped.pop();)g=Ut(g,w.from,w.to);return g}changes(g,w){let{fragments:L,tree:H,treeLen:G,viewport:Y,skipped:be}=this;if(this.takeTree(),!g.empty){let ve=[];if(g.iterChangedRanges((qe,yt,Yt,yi)=>ve.push({fromA:qe,toA:yt,fromB:Yt,toB:yi})),L=E.i9.applyChanges(L,ve),H=E.mp.empty,G=0,Y={from:g.mapPos(Y.from,-1),to:g.mapPos(Y.to,1)},this.skipped.length){be=[];for(let qe of this.skipped){let yt=g.mapPos(qe.from,1),Yt=g.mapPos(qe.to,-1);yt<Yt&&be.push({from:yt,to:Yt})}}}return new Qt(this.parser,w,L,H,G,Y,be,this.scheduleOn)}updateViewport(g){if(this.viewport.from==g.from&&this.viewport.to==g.to)return!1;this.viewport=g;let w=this.skipped.length;for(let L=0;L<this.skipped.length;L++){let{from:H,to:G}=this.skipped[L];H<g.to&&G>g.from&&(this.fragments=Ut(this.fragments,H,G),this.skipped.splice(L--,1))}return this.skipped.length>=w?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(g,w){this.skipped.push({from:g,to:w})}static getSkippingParser(g){return new class extends E._b{createParse(w,L,H){let G=H[0].from,Y=H[H.length-1].to;return{parsedPos:G,advance(){let ve=Ot;if(ve){for(let qe of H)ve.tempSkipped.push(qe);g&&(ve.scheduleOn=ve.scheduleOn?Promise.all([ve.scheduleOn,g]):g)}return this.parsedPos=Y,new E.mp(E.Jq.none,[],[],Y-G)},stoppedAt:null,stopAt(){}}}}}isDone(g){g=Math.min(g,this.state.doc.length);let w=this.fragments;return this.treeLen>=g&&w.length&&w[0].from==0&&w[0].to>=g}static get(){return Ot}}function Ut(T,g,w){return E.i9.applyChanges(T,[{fromA:g,toA:w,fromB:g,toB:w}])}class Pt{constructor(g){this.context=g,this.tree=g.tree}apply(g){if(!g.docChanged&&this.tree==this.context.tree)return this;let w=this.context.changes(g.changes,g.state),L=this.context.treeLen==g.startState.doc.length?void 0:Math.max(g.changes.mapPos(this.context.treeLen),w.viewport.to);return w.work(20,L)||w.takeTree(),new Pt(w)}static init(g){let w=Math.min(3e3,g.doc.length),L=Qt.create(g.facet(at).parser,g,{from:0,to:w});return L.work(20,w)||L.takeTree(),new Pt(L)}}nt.state=ae.QQ.define({create:Pt.init,update(T,g){for(let w of g.effects)if(w.is(nt.setState))return w.value;return g.startState.facet(at)!=g.state.facet(at)?Pt.init(g.state):T.apply(g)}});let Dt=T=>{let g=setTimeout(()=>T(),500);return()=>clearTimeout(g)};typeof requestIdleCallback!="undefined"&&(Dt=T=>{let g=-1,w=setTimeout(()=>{g=requestIdleCallback(T,{timeout:400})},100);return()=>g<0?clearTimeout(w):cancelIdleCallback(g)});const Gt=typeof navigator!="undefined"&&(!((Ke=navigator.scheduling)===null||Ke===void 0)&&Ke.isInputPending)?()=>navigator.scheduling.isInputPending():null,$t=xe.lg.fromClass(class{constructor(g){this.view=g,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(g){let w=this.view.state.field(nt.state).context;(w.updateViewport(g.view.viewport)||this.view.viewport.to>w.treeLen)&&this.scheduleWork(),(g.docChanged||g.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(w)}scheduleWork(){if(this.working)return;let{state:g}=this.view,w=g.field(nt.state);(w.tree!=w.context.tree||!w.context.isDone(g.doc.length))&&(this.working=Dt(this.work))}work(g){this.working=null;let w=Date.now();if(this.chunkEnd<w&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=w+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:L,viewport:{to:H}}=this.view,G=L.field(nt.state);if(G.tree==G.context.tree&&G.context.isDone(H+1e5))return;let Y=Date.now()+Math.min(this.chunkBudget,100,g&&!Gt?Math.max(25,g.timeRemaining()-5):1e9),be=G.context.treeLen<H&&L.doc.length>H+1e3,ve=G.context.work(()=>Gt&&Gt()||Date.now()>Y,H+(be?0:1e5));this.chunkBudget-=Date.now()-w,(ve||this.chunkBudget<=0)&&(G.context.takeTree(),this.view.dispatch({effects:nt.setState.of(new Pt(G.context))})),this.chunkBudget>0&&!(ve&&!be)&&this.scheduleWork(),this.checkAsyncSchedule(G.context)}checkAsyncSchedule(g){g.scheduleOn&&(this.workScheduled++,g.scheduleOn.then(()=>this.scheduleWork()).catch(w=>(0,xe.OO)(this.view.state,w)).then(()=>this.workScheduled--),g.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),at=ae.r$.define({combine(T){return T.length?T[0]:null},enables:T=>[nt.state,$t,xe.tk.contentAttributes.compute([T],g=>{let w=g.facet(T);return w&&w.name?{"data-language":w.name}:{}})]});class Le{constructor(g,w=[]){this.language=g,this.support=w,this.extension=[g,w]}}class He{constructor(g,w,L,H,G,Y=void 0){this.name=g,this.alias=w,this.extensions=L,this.filename=H,this.loadFunc=G,this.support=Y,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(g=>this.support=g,g=>{throw this.loading=null,g}))}static of(g){let{load:w,support:L}=g;if(!w){if(!L)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");w=()=>Promise.resolve(L)}return new He(g.name,(g.alias||[]).concat(g.name).map(H=>H.toLowerCase()),g.extensions||[],g.filename,w,L)}static matchFilename(g,w){for(let H of g)if(H.filename&&H.filename.test(w))return H;let L=/\.([^.]+)$/.exec(w);if(L){for(let H of g)if(H.extensions.indexOf(L[1])>-1)return H}return null}static matchLanguageName(g,w,L=!0){w=w.toLowerCase();for(let H of g)if(H.alias.some(G=>G==w))return H;if(L)for(let H of g)for(let G of H.alias){let Y=w.indexOf(G);if(Y>-1&&(G.length>2||!/\w/.test(w[Y-1])&&!/\w/.test(w[Y+G.length])))return H}return null}}const Me=ae.r$.define(),ke=ae.r$.define({combine:T=>{if(!T.length)return"  ";let g=T[0];if(!g||/\S/.test(g)||Array.from(g).some(w=>w!=g[0]))throw new Error("Invalid indent unit: "+JSON.stringify(T[0]));return g}});function Ne(T){let g=T.facet(ke);return g.charCodeAt(0)==9?T.tabSize*g.length:g.length}function K(T,g){let w="",L=T.tabSize,H=T.facet(ke)[0];if(H=="	"){for(;g>=L;)w+="	",g-=L;H=" "}for(let G=0;G<g;G++)w+=H;return w}function $e(T,g){T instanceof ae.yy&&(T=new ee(T));for(let L of T.state.facet(Me)){let H=L(T,g);if(H!==void 0)return H}let w=Ee(T.state);return w.length>=g?Ce(T,w,g):null}function Fe(T,g,w){let L=Object.create(null),H=new ee(T,{overrideIndentation:Y=>{var be;return(be=L[Y])!==null&&be!==void 0?be:-1}}),G=[];for(let Y=g;Y<=w;){let be=T.doc.lineAt(Y);Y=be.to+1;let ve=$e(H,be.from);if(ve==null)continue;/\S/.test(be.text)||(ve=0);let qe=/^\s*/.exec(be.text)[0],yt=K(T,ve);qe!=yt&&(L[be.from]=ve,G.push({from:be.from,to:be.from+qe.length,insert:yt}))}return T.changes(G)}class ee{constructor(g,w={}){this.state=g,this.options=w,this.unit=Ne(g)}lineAt(g,w=1){let L=this.state.doc.lineAt(g),{simulateBreak:H,simulateDoubleBreak:G}=this.options;return H!=null&&H>=L.from&&H<=L.to?G&&H==g?{text:"",from:g}:(w<0?H<g:H<=g)?{text:L.text.slice(H-L.from),from:H}:{text:L.text.slice(0,H-L.from),from:L.from}:L}textAfterPos(g,w=1){if(this.options.simulateDoubleBreak&&g==this.options.simulateBreak)return"";let{text:L,from:H}=this.lineAt(g,w);return L.slice(g-H,Math.min(L.length,g+100-H))}column(g,w=1){let{text:L,from:H}=this.lineAt(g,w),G=this.countColumn(L,g-H),Y=this.options.overrideIndentation?this.options.overrideIndentation(H):-1;return Y>-1&&(G+=Y-this.countColumn(L,L.search(/\S|$/))),G}countColumn(g,w=g.length){return(0,ae.IS)(g,this.state.tabSize,w)}lineIndent(g,w=1){let{text:L,from:H}=this.lineAt(g,w),G=this.options.overrideIndentation;if(G){let Y=G(H);if(Y>-1)return Y}return this.countColumn(L,L.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const ge=new E.md;function Ce(T,g,w){let L=g.resolveStack(w),H=L.node.enterUnfinishedNodesBefore(w);if(H!=L.node){let G=[];for(let Y=H;Y!=L.node;Y=Y.parent)G.push(Y);for(let Y=G.length-1;Y>=0;Y--)L={node:G[Y],next:L}}return Oe(L,T,w)}function Oe(T,g,w){for(let L=T;L;L=L.next){let H=dt(L.node);if(H)return H(xt.create(g,w,L))}return 0}function De(T){return T.pos==T.options.simulateBreak&&T.options.simulateDoubleBreak}function dt(T){let g=T.type.prop(ge);if(g)return g;let w=T.firstChild,L;if(w&&(L=w.type.prop(E.md.closedBy))){let H=T.lastChild,G=H&&L.indexOf(H.name)>-1;return Y=>Et(Y,!0,1,void 0,G&&!De(Y)?H.from:void 0)}return T.parent==null?Ye:null}function Ye(){return 0}class xt extends ee{constructor(g,w,L){super(g.state,g.options),this.base=g,this.pos=w,this.context=L}get node(){return this.context.node}static create(g,w,L){return new xt(g,w,L)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(g){let w=this.state.doc.lineAt(g.from);for(;;){let L=g.resolve(w.from);for(;L.parent&&L.parent.from==L.from;)L=L.parent;if(pt(L,g))break;w=this.state.doc.lineAt(L.from)}return this.lineIndent(w.from)}continue(){return Oe(this.context.next,this.base,this.pos)}}function pt(T,g){for(let w=g;w;w=w.parent)if(T==w)return!0;return!1}function Rt(T){let g=T.node,w=g.childAfter(g.from),L=g.lastChild;if(!w)return null;let H=T.options.simulateBreak,G=T.state.doc.lineAt(w.from),Y=H==null||H<=G.from?G.to:Math.min(G.to,H);for(let be=w.to;;){let ve=g.childAfter(be);if(!ve||ve==L)return null;if(!ve.type.isSkipped)return ve.from<Y?w:null;be=ve.to}}function It({closing:T,align:g=!0,units:w=1}){return L=>Et(L,g,w,T)}function Et(T,g,w,L,H){let G=T.textAfter,Y=G.match(/^\s*/)[0].length,be=L&&G.slice(Y,Y+L.length)==L||H==T.pos+Y,ve=g?Rt(T):null;return ve?be?T.column(ve.from):T.column(ve.to):T.baseIndent+(be?0:T.unit*w)}const Mt=T=>T.baseIndent;function ii({except:T,units:g=1}={}){return w=>{let L=T&&T.test(w.textAfter);return w.baseIndent+(L?0:g*w.unit)}}const oi=200;function oe(){return ae.yy.transactionFilter.of(T=>{if(!T.docChanged||!T.isUserEvent("input.type")&&!T.isUserEvent("input.complete"))return T;let g=T.startState.languageDataAt("indentOnInput",T.startState.selection.main.head);if(!g.length)return T;let w=T.newDoc,{head:L}=T.newSelection.main,H=w.lineAt(L);if(L>H.from+oi)return T;let G=w.sliceString(H.from,L);if(!g.some(qe=>qe.test(G)))return T;let{state:Y}=T,be=-1,ve=[];for(let{head:qe}of Y.selection.ranges){let yt=Y.doc.lineAt(qe);if(yt.from==be)continue;be=yt.from;let Yt=$e(Y,yt.from);if(Yt==null)continue;let yi=/^\s*/.exec(yt.text)[0],bi=K(Y,Yt);yi!=bi&&ve.push({from:yt.from,to:yt.from+yi.length,insert:bi})}return ve.length?[T,{changes:ve,sequential:!0}]:T})}const x=ae.r$.define(),M=new E.md;function F(T){let g=T.firstChild,w=T.lastChild;return g&&g.to<w.from?{from:g.to,to:w.type.isError?T.to:w.from}:null}function j(T,g,w){let L=Ee(T);if(L.length<w)return null;let H=L.resolveStack(w,1),G=null;for(let Y=H;Y;Y=Y.next){let be=Y.node;if(be.to<=w||be.from>w)continue;if(G&&be.from<g)break;let ve=be.type.prop(M);if(ve&&(be.to<L.length-50||L.length==T.doc.length||!$(be))){let qe=ve(be,T);qe&&qe.from<=w&&qe.from>=g&&qe.to>w&&(G=qe)}}return G}function $(T){let g=T.lastChild;return g&&g.to==T.to&&g.type.isError}function se(T,g,w){for(let L of T.facet(x)){let H=L(T,g,w);if(H)return H}return j(T,g,w)}function le(T,g){let w=g.mapPos(T.from,1),L=g.mapPos(T.to,-1);return w>=L?void 0:{from:w,to:L}}const Be=ae.Py.define({map:le}),et=ae.Py.define({map:le});function We(T){let g=[];for(let{head:w}of T.state.selection.ranges)g.some(L=>L.from<=w&&L.to>=w)||g.push(T.lineBlockAt(w));return g}const _=ae.QQ.define({create(){return xe.p.none},update(T,g){T=T.map(g.changes);for(let w of g.effects)if(w.is(Be)&&!Te(T,w.value.from,w.value.to)){let{preparePlaceholder:L}=g.state.facet(Ge),H=L?xe.p.replace({widget:new zt(L(g.state,w.value))}):st;T=T.update({add:[H.range(w.value.from,w.value.to)]})}else w.is(et)&&(T=T.update({filter:(L,H)=>w.value.from!=L||w.value.to!=H,filterFrom:w.value.from,filterTo:w.value.to}));if(g.selection){let w=!1,{head:L}=g.selection.main;T.between(L,L,(H,G)=>{H<L&&G>L&&(w=!0)}),w&&(T=T.update({filterFrom:L,filterTo:L,filter:(H,G)=>G<=L||H>=L}))}return T},provide:T=>xe.tk.decorations.from(T),toJSON(T,g){let w=[];return T.between(0,g.doc.length,(L,H)=>{w.push(L,H)}),w},fromJSON(T){if(!Array.isArray(T)||T.length%2)throw new RangeError("Invalid JSON for fold state");let g=[];for(let w=0;w<T.length;){let L=T[w++],H=T[w++];if(typeof L!="number"||typeof H!="number")throw new RangeError("Invalid JSON for fold state");g.push(st.range(L,H))}return xe.p.set(g,!0)}});function Pe(T){return T.field(_,!1)||RangeSet.empty}function ye(T,g,w){var L;let H=null;return(L=T.field(_,!1))===null||L===void 0||L.between(g,w,(G,Y)=>{(!H||H.from>G)&&(H={from:G,to:Y})}),H}function Te(T,g,w){let L=!1;return T.between(g,g,(H,G)=>{H==g&&G==w&&(L=!0)}),L}function je(T,g){return T.field(_,!1)?g:g.concat(ae.Py.appendConfig.of(tt()))}const Ve=T=>{for(let g of We(T)){let w=se(T.state,g.from,g.to);if(w)return T.dispatch({effects:je(T.state,[Be.of(w),wt(T,w)])}),!0}return!1},ht=T=>{if(!T.state.field(_,!1))return!1;let g=[];for(let w of We(T)){let L=ye(T.state,w.from,w.to);L&&g.push(et.of(L),wt(T,L,!1))}return g.length&&T.dispatch({effects:g}),g.length>0};function wt(T,g,w=!0){let L=T.state.doc.lineAt(g.from).number,H=T.state.doc.lineAt(g.to).number;return xe.tk.announce.of(`${T.state.phrase(w?"Folded lines":"Unfolded lines")} ${L} ${T.state.phrase("to")} ${H}.`)}const gt=T=>{let{state:g}=T,w=[];for(let L=0;L<g.doc.length;){let H=T.lineBlockAt(L),G=se(g,H.from,H.to);G&&w.push(Be.of(G)),L=(G?T.lineBlockAt(G.to):H).to+1}return w.length&&T.dispatch({effects:je(T.state,w)}),!!w.length},Ft=T=>{let g=T.state.field(_,!1);if(!g||!g.size)return!1;let w=[];return g.between(0,T.state.doc.length,(L,H)=>{w.push(et.of({from:L,to:H}))}),T.dispatch({effects:w}),!0};function ze(T,g){for(let w=g;;){let L=se(T.state,w.from,w.to);if(L&&L.to>g.from)return L;if(!w.from)return null;w=T.lineBlockAt(w.from-1)}}const Tt=T=>{let g=[];for(let w of We(T)){let L=ye(T.state,w.from,w.to);if(L)g.push(et.of(L),wt(T,L,!1));else{let H=ze(T,w);H&&g.push(Be.of(H),wt(T,H))}}return g.length>0&&T.dispatch({effects:je(T.state,g)}),!!g.length},Qe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Ve},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ht},{key:"Ctrl-Alt-[",run:gt},{key:"Ctrl-Alt-]",run:Ft}],Ct={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},Ge=ae.r$.define({combine(T){return(0,ae.BO)(T,Ct)}});function tt(T){let g=[_,qt];return T&&g.push(Ge.of(T)),g}function mt(T,g){let{state:w}=T,L=w.facet(Ge),H=Y=>{let be=T.lineBlockAt(T.posAtDOM(Y.target)),ve=ye(T.state,be.from,be.to);ve&&T.dispatch({effects:et.of(ve)}),Y.preventDefault()};if(L.placeholderDOM)return L.placeholderDOM(T,H,g);let G=document.createElement("span");return G.textContent=L.placeholderText,G.setAttribute("aria-label",w.phrase("folded code")),G.title=w.phrase("unfold"),G.className="cm-foldPlaceholder",G.onclick=H,G}const st=xe.p.replace({widget:new class extends xe.l9{toDOM(T){return mt(T,null)}}});class zt extends xe.l9{constructor(g){super(),this.value=g}eq(g){return this.value==g.value}toDOM(g){return mt(g,this.value)}}const Ht={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class St extends xe.SJ{constructor(g,w){super(),this.config=g,this.open=w}eq(g){return this.config==g.config&&this.open==g.open}toDOM(g){if(this.config.markerDOM)return this.config.markerDOM(this.open);let w=document.createElement("span");return w.textContent=this.open?this.config.openText:this.config.closedText,w.title=g.state.phrase(this.open?"Fold line":"Unfold line"),w}}function si(T={}){let g=Object.assign(Object.assign({},Ht),T),w=new St(g,!0),L=new St(g,!1),H=xe.lg.fromClass(class{constructor(Y){this.from=Y.viewport.from,this.markers=this.buildMarkers(Y)}update(Y){(Y.docChanged||Y.viewportChanged||Y.startState.facet(at)!=Y.state.facet(at)||Y.startState.field(_,!1)!=Y.state.field(_,!1)||Ee(Y.startState)!=Ee(Y.state)||g.foldingChanged(Y))&&(this.markers=this.buildMarkers(Y.view))}buildMarkers(Y){let be=new ae.f_;for(let ve of Y.viewportLineBlocks){let qe=ye(Y.state,ve.from,ve.to)?L:se(Y.state,ve.from,ve.to)?w:null;qe&&be.add(ve.from,ve.from,qe)}return be.finish()}}),{domEventHandlers:G}=g;return[H,(0,xe.v5)({class:"cm-foldGutter",markers(Y){var be;return((be=Y.plugin(H))===null||be===void 0?void 0:be.markers)||ae.Xs.empty},initialSpacer(){return new St(g,!1)},domEventHandlers:Object.assign(Object.assign({},G),{click:(Y,be,ve)=>{if(G.click&&G.click(Y,be,ve))return!0;let qe=ye(Y.state,be.from,be.to);if(qe)return Y.dispatch({effects:et.of(qe)}),!0;let yt=se(Y.state,be.from,be.to);return yt?(Y.dispatch({effects:Be.of(yt)}),!0):!1}})}),tt()]}const qt=xe.tk.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class _t{constructor(g,w){this.specs=g;let L;function H(be){let ve=ce.V.newName();return(L||(L=Object.create(null)))["."+ve]=be,ve}const G=typeof w.all=="string"?w.all:w.all?H(w.all):void 0,Y=w.scope;this.scope=Y instanceof nt?be=>be.prop(Re)==Y.data:Y?be=>be==Y:void 0,this.style=(0,z.QR)(g.map(be=>({tag:be.tag,class:be.class||H(Object.assign({},be,{tag:null}))})),{all:G}).style,this.module=L?new ce.V(L):null,this.themeType=w.themeType}static define(g,w){return new _t(g,w||{})}}const rt=ae.r$.define(),Vt=ae.r$.define({combine(T){return T.length?[T[0]]:null}});function Nt(T){let g=T.facet(rt);return g.length?g:T.facet(Vt)}function fi(T,g){let w=[I],L;return T instanceof _t&&(T.module&&w.push(xe.tk.styleModule.of(T.module)),L=T.themeType),g!=null&&g.fallback?w.push(Vt.of(T)):L?w.push(rt.computeN([xe.tk.darkTheme],H=>H.facet(xe.tk.darkTheme)==(L=="dark")?[T]:[])):w.push(rt.of(T)),w}function hi(T,g,w){let L=Nt(T),H=null;if(L){for(let G of L)if(!G.scope||w&&G.scope(w)){let Y=G.style(g);Y&&(H=H?H+" "+Y:Y)}}return H}class mi{constructor(g){this.markCache=Object.create(null),this.tree=Ee(g.state),this.decorations=this.buildDeco(g,Nt(g.state)),this.decoratedTo=g.viewport.to}update(g){let w=Ee(g.state),L=Nt(g.state),H=L!=Nt(g.startState),{viewport:G}=g.view,Y=g.changes.mapPos(this.decoratedTo,1);w.length<G.to&&!H&&w.type==this.tree.type&&Y>=G.to?(this.decorations=this.decorations.map(g.changes),this.decoratedTo=Y):(w!=this.tree||g.viewportChanged||H)&&(this.tree=w,this.decorations=this.buildDeco(g.view,L),this.decoratedTo=G.to)}buildDeco(g,w){if(!w||!this.tree.length)return xe.p.none;let L=new ae.f_;for(let{from:H,to:G}of g.visibleRanges)(0,z.bW)(this.tree,w,(Y,be,ve)=>{L.add(Y,be,this.markCache[ve]||(this.markCache[ve]=xe.p.mark({class:ve})))},H,G);return L.finish()}}const I=ae.Wl.high(xe.lg.fromClass(mi,{decorations:T=>T.decorations})),y=_t.define([{tag:z.pJ.meta,color:"#404740"},{tag:z.pJ.link,textDecoration:"underline"},{tag:z.pJ.heading,textDecoration:"underline",fontWeight:"bold"},{tag:z.pJ.emphasis,fontStyle:"italic"},{tag:z.pJ.strong,fontWeight:"bold"},{tag:z.pJ.strikethrough,textDecoration:"line-through"},{tag:z.pJ.keyword,color:"#708"},{tag:[z.pJ.atom,z.pJ.bool,z.pJ.url,z.pJ.contentSeparator,z.pJ.labelName],color:"#219"},{tag:[z.pJ.literal,z.pJ.inserted],color:"#164"},{tag:[z.pJ.string,z.pJ.deleted],color:"#a11"},{tag:[z.pJ.regexp,z.pJ.escape,z.pJ.special(z.pJ.string)],color:"#e40"},{tag:z.pJ.definition(z.pJ.variableName),color:"#00f"},{tag:z.pJ.local(z.pJ.variableName),color:"#30a"},{tag:[z.pJ.typeName,z.pJ.namespace],color:"#085"},{tag:z.pJ.className,color:"#167"},{tag:[z.pJ.special(z.pJ.variableName),z.pJ.macroName],color:"#256"},{tag:z.pJ.definition(z.pJ.propertyName),color:"#00c"},{tag:z.pJ.comment,color:"#940"},{tag:z.pJ.invalid,color:"#f00"}]),P=xe.tk.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),N=1e4,U="()[]{}",ne=ae.r$.define({combine(T){return(0,ae.BO)(T,{afterCursor:!0,brackets:U,maxScanDistance:N,renderMatch:Je})}}),J=xe.p.mark({class:"cm-matchingBracket"}),he=xe.p.mark({class:"cm-nonmatchingBracket"});function Je(T){let g=[],w=T.matched?J:he;return g.push(w.range(T.start.from,T.start.to)),T.end&&g.push(w.range(T.end.from,T.end.to)),g}const Kt=[ae.QQ.define({create(){return xe.p.none},update(T,g){if(!g.docChanged&&!g.selection)return T;let w=[],L=g.state.facet(ne);for(let H of g.state.selection.ranges){if(!H.empty)continue;let G=k(g.state,H.head,-1,L)||H.head>0&&k(g.state,H.head-1,1,L)||L.afterCursor&&(k(g.state,H.head,1,L)||H.head<g.state.doc.length&&k(g.state,H.head+1,-1,L));G&&(w=w.concat(L.renderMatch(G,g.state)))}return xe.p.set(w,!0)},provide:T=>xe.tk.decorations.from(T)}),P];function D(T={}){return[ne.of(T),Kt]}const a=new E.md;function d(T,g,w){let L=T.prop(g<0?E.md.openedBy:E.md.closedBy);if(L)return L;if(T.name.length==1){let H=w.indexOf(T.name);if(H>-1&&H%2==(g<0?1:0))return[w[H+g]]}return null}function m(T){let g=T.type.prop(a);return g?g(T.node):T}function k(T,g,w,L={}){let H=L.maxScanDistance||N,G=L.brackets||U,Y=Ee(T),be=Y.resolveInner(g,w);for(let ve=be;ve;ve=ve.parent){let qe=d(ve.type,w,G);if(qe&&ve.from<ve.to){let yt=m(ve);if(yt&&(w>0?g>=yt.from&&g<yt.to:g>yt.from&&g<=yt.to))return R(T,g,w,ve,yt,qe,G)}}return B(T,g,w,Y,be.type,H,G)}function R(T,g,w,L,H,G,Y){let be=L.parent,ve={from:H.from,to:H.to},qe=0,yt=be==null?void 0:be.cursor();if(yt&&(w<0?yt.childBefore(L.from):yt.childAfter(L.to)))do if(w<0?yt.to<=L.from:yt.from>=L.to){if(qe==0&&G.indexOf(yt.type.name)>-1&&yt.from<yt.to){let Yt=m(yt);return{start:ve,end:Yt?{from:Yt.from,to:Yt.to}:void 0,matched:!0}}else if(d(yt.type,w,Y))qe++;else if(d(yt.type,-w,Y)){if(qe==0){let Yt=m(yt);return{start:ve,end:Yt&&Yt.from<Yt.to?{from:Yt.from,to:Yt.to}:void 0,matched:!1}}qe--}}while(w<0?yt.prevSibling():yt.nextSibling());return{start:ve,matched:!1}}function B(T,g,w,L,H,G,Y){let be=w<0?T.sliceDoc(g-1,g):T.sliceDoc(g,g+1),ve=Y.indexOf(be);if(ve<0||ve%2==0!=w>0)return null;let qe={from:w<0?g-1:g,to:w>0?g+1:g},yt=T.doc.iterRange(g,w>0?T.doc.length:0),Yt=0;for(let yi=0;!yt.next().done&&yi<=G;){let bi=yt.value;w<0&&(yi+=bi.length);let Ei=g+yi*w;for(let ji=w>0?0:bi.length-1,rs=w>0?bi.length:-1;ji!=rs;ji+=w){let On=Y.indexOf(bi[ji]);if(!(On<0||L.resolveInner(Ei+ji,1).type!=H))if(On%2==0==w>0)Yt++;else{if(Yt==1)return{start:qe,end:{from:Ei+ji,to:Ei+ji+1},matched:On>>1==ve>>1};Yt--}}w>0&&(yi+=bi.length)}return yt.done?{start:qe,matched:!1}:null}function Q(T,g,w,L=0,H=0){g==null&&(g=T.search(/[^\s\u00a0]/),g==-1&&(g=T.length));let G=H;for(let Y=L;Y<g;Y++)T.charCodeAt(Y)==9?G+=w-G%w:G++;return G}class q{constructor(g,w,L,H){this.string=g,this.tabSize=w,this.indentUnit=L,this.overrideIndent=H,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(g){let w=this.string.charAt(this.pos),L;if(typeof g=="string"?L=w==g:L=w&&(g instanceof RegExp?g.test(w):g(w)),L)return++this.pos,w}eatWhile(g){let w=this.pos;for(;this.eat(g););return this.pos>w}eatSpace(){let g=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>g}skipToEnd(){this.pos=this.string.length}skipTo(g){let w=this.string.indexOf(g,this.pos);if(w>-1)return this.pos=w,!0}backUp(g){this.pos-=g}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Q(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var g;return(g=this.overrideIndent)!==null&&g!==void 0?g:Q(this.string,null,this.tabSize)}match(g,w,L){if(typeof g=="string"){let H=Y=>L?Y.toLowerCase():Y,G=this.string.substr(this.pos,g.length);return H(G)==H(g)?(w!==!1&&(this.pos+=g.length),!0):null}else{let H=this.string.slice(this.pos).match(g);return H&&H.index>0?null:(H&&w!==!1&&(this.pos+=H[0].length),H)}}current(){return this.string.slice(this.start,this.pos)}}function de(T){return{name:T.name||"",token:T.token,blankLine:T.blankLine||(()=>{}),startState:T.startState||(()=>!0),copyState:T.copyState||Se,indent:T.indent||(()=>null),languageData:T.languageData||{},tokenTable:T.tokenTable||Ai}}function Se(T){if(typeof T!="object")return T;let g={};for(let w in T){let L=T[w];g[w]=L instanceof Array?L.slice():L}return g}const Ie=new WeakMap;class ot extends null{constructor(g){let w=jt(g.languageData),L=de(g),H,G=new class extends Parser{createParse(Y,be,ve){return new ni(H,Y,be,ve)}};super(w,G,[Me.of((Y,be)=>this.getIndent(Y,be))],g.name),this.topNode=Gi(w),H=this,this.streamParser=L,this.stateAfter=new NodeProp({perNode:!0}),this.tokenTable=g.tokenTable?new Fn(L.tokenTable):Sn}static define(g){return new ot(g)}getIndent(g,w){let L=Ee(g.state),H=L.resolve(w);for(;H&&H.type!=this.topNode;)H=H.parent;if(!H)return null;let G,{overrideIndentation:Y}=g.options;Y&&(G=Ie.get(g.state),G!=null&&G<w-1e4&&(G=void 0));let be=_e(this,L,0,H.from,G!=null?G:w),ve,qe;if(be?(qe=be.state,ve=be.pos+1):(qe=this.streamParser.startState(g.unit),ve=0),w-ve>1e4)return null;for(;ve<w;){let Yt=g.state.doc.lineAt(ve),yi=Math.min(w,Yt.to);if(Yt.length){let bi=Y?Y(Yt.from):-1,Ei=new q(Yt.text,g.state.tabSize,g.unit,bi<0?void 0:bi);for(;Ei.pos<yi-Yt.from;)Ni(this.streamParser.token,Ei,qe)}else this.streamParser.blankLine(qe,g.unit);if(yi==w)break;ve=Yt.to+1}let yt=g.lineAt(w);return Y&&G==null&&Ie.set(g.state,yt.from),this.streamParser.indent(qe,/^\s*(.*)/.exec(yt.text)[1],g)}get allowsNesting(){return!1}}function _e(T,g,w,L,H){let G=w>=L&&w+g.length<=H&&g.prop(T.stateAfter);if(G)return{state:T.streamParser.copyState(G),pos:w+g.length};for(let Y=g.children.length-1;Y>=0;Y--){let be=g.children[Y],ve=w+g.positions[Y],qe=be instanceof Tree&&ve<H&&_e(T,be,ve,L,H);if(qe)return qe}return null}function ei(T,g,w,L,H){if(H&&w<=0&&L>=g.length)return g;!H&&g.type==T.topNode&&(H=!0);for(let G=g.children.length-1;G>=0;G--){let Y=g.positions[G],be=g.children[G],ve;if(Y<L&&be instanceof Tree){if(!(ve=ei(T,be,w-Y,L-Y,H)))break;return H?new Tree(g.type,g.children.slice(0,G).concat(ve),g.positions.slice(0,G+1),Y+ve.length):ve}}return null}function Ci(T,g,w,L){for(let H of g){let G=H.from+(H.openStart?25:0),Y=H.to-(H.openEnd?25:0),be=G<=w&&Y>w&&_e(T,H.tree,0-H.offset,w,Y),ve;if(be&&(ve=ei(T,H.tree,w+H.offset,be.pos+H.offset,!1)))return{state:be.state,tree:ve}}return{state:T.streamParser.startState(L?Ne(L):4),tree:Tree.empty}}class ni{constructor(g,w,L,H){this.lang=g,this.input=w,this.fragments=L,this.ranges=H,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=H[H.length-1].to;let G=Qt.get(),Y=H[0].from,{state:be,tree:ve}=Ci(g,L,Y,G==null?void 0:G.state);this.state=be,this.parsedPos=this.chunkStart=Y+ve.length;for(let qe=0;qe<ve.children.length;qe++)this.chunks.push(ve.children[qe]),this.chunkPos.push(ve.positions[qe]);G&&this.parsedPos<G.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(Ne(G.state)),G.skipUntilInView(this.parsedPos,G.viewport.from),this.parsedPos=G.viewport.from),this.moveRangeIndex()}advance(){let g=Qt.get(),w=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),L=Math.min(w,this.chunkStart+2048);for(g&&(L=Math.min(L,g.viewport.to));this.parsedPos<L;)this.parseLine(g);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=w?this.finish():g&&this.parsedPos>=g.viewport.to?(g.skipUntilInView(this.parsedPos,w),this.finish()):null}stopAt(g){this.stoppedAt=g}lineAfter(g){let w=this.input.chunk(g);if(this.input.lineChunks)w==`
`&&(w="");else{let L=w.indexOf(`
`);L>-1&&(w=w.slice(0,L))}return g+w.length<=this.to?w:w.slice(0,this.to-g)}nextLine(){let g=this.parsedPos,w=this.lineAfter(g),L=g+w.length;for(let H=this.rangeIndex;;){let G=this.ranges[H].to;if(G>=L||(w=w.slice(0,G-(L-w.length)),H++,H==this.ranges.length))break;let Y=this.ranges[H].from,be=this.lineAfter(Y);w+=be,L=Y+be.length}return{line:w,end:L}}skipGapsTo(g,w,L){for(;;){let H=this.ranges[this.rangeIndex].to,G=g+w;if(L>0?H>G:H>=G)break;let Y=this.ranges[++this.rangeIndex].from;w+=Y-H}return w}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(g,w,L,H,G){if(this.ranges.length>1){G=this.skipGapsTo(w,G,1),w+=G;let Y=this.chunk.length;G=this.skipGapsTo(L,G,-1),L+=G,H+=this.chunk.length-Y}return this.chunk.push(g,w,L,H),G}parseLine(g){let{line:w,end:L}=this.nextLine(),H=0,{streamParser:G}=this.lang,Y=new q(w,g?g.state.tabSize:4,g?Ne(g.state):2);if(Y.eol())G.blankLine(this.state,Y.indentUnit);else for(;!Y.eol();){let be=Ni(G.token,Y,this.state);if(be&&(H=this.emitToken(this.lang.tokenTable.resolve(be),this.parsedPos+Y.start,this.parsedPos+Y.pos,4,H)),Y.start>1e4)break}this.parsedPos=L,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let g=Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:ns,topID:0,maxBufferLength:2048,reused:this.chunkReused});g=new Tree(g.type,g.children,g.positions,g.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(g),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Ni(T,g,w){g.start=g.pos;for(let L=0;L<10;L++){let H=T(g,w);if(g.pos>g.start)return H}throw new Error("Stream parser failed to advance stream.")}const Ai=Object.create(null),$i=[E.Jq.none],ns=new E.Lj($i),Hi=[],di=Object.create(null),wn=Object.create(null);for(let[T,g]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])wn[T]=Fi(Ai,g);class Fn{constructor(g){this.extra=g,this.table=Object.assign(Object.create(null),wn)}resolve(g){return g?this.table[g]||(this.table[g]=Fi(this.extra,g)):0}}const Sn=new Fn(Ai);function Vi(T,g){Hi.indexOf(T)>-1||(Hi.push(T),console.warn(g))}function Fi(T,g){let w=[];for(let be of g.split(" ")){let ve=[];for(let qe of be.split(".")){let yt=T[qe]||z.pJ[qe];yt?typeof yt=="function"?ve.length?ve=ve.map(yt):Vi(qe,`Modifier ${qe} used at start of tag`):ve.length?Vi(qe,`Tag ${qe} used as modifier`):ve=Array.isArray(yt)?yt:[yt]:Vi(qe,`Unknown highlighting tag ${qe}`)}for(let qe of ve)w.push(qe)}if(!w.length)return 0;let L=g.replace(/ /g,"_"),H=L+" "+w.map(be=>be.id),G=di[H];if(G)return G.id;let Y=di[H]=E.Jq.define({id:$i.length,name:L,props:[(0,z.Gv)({[L]:w})]});return $i.push(Y),Y.id}function Gi(T){let g=NodeType.define({id:$i.length,name:"Document",props:[Re.add(()=>T)],top:!0});return $i.push(g),g}function on(T){return T.length<=4096&&/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/.test(T)}function ln(T){for(let g=T.iter();!g.next().done;)if(on(g.value))return!0;return!1}function Es(T){let g=!1;return T.iterChanges((w,L,H,G,Y)=>{!g&&ln(Y)&&(g=!0)}),g}const an=ae.r$.define({combine:T=>T.some(g=>g)});function hn(T={}){let g=[wi];return T.alwaysIsolate&&g.push(an.of(!0)),g}const wi=xe.lg.fromClass(class{constructor(T){this.always=T.state.facet(an)||T.textDirection!=xe.Nm.LTR||T.state.facet(xe.tk.perLineTextDirection),this.hasRTL=!this.always&&ln(T.state.doc),this.tree=Ee(T.state),this.decorations=this.always||this.hasRTL?cn(T,this.tree,this.always):xe.p.none}update(T){let g=T.state.facet(an)||T.view.textDirection!=xe.Nm.LTR||T.state.facet(xe.tk.perLineTextDirection);if(!g&&!this.hasRTL&&Es(T.changes)&&(this.hasRTL=!0),!g&&!this.hasRTL)return;let w=Ee(T.state);(g!=this.always||w!=this.tree||T.docChanged||T.viewportChanged)&&(this.tree=w,this.always=g,this.decorations=cn(T.view,w,g))}},{provide:T=>{function g(w){var L,H;return(H=(L=w.plugin(T))===null||L===void 0?void 0:L.decorations)!==null&&H!==void 0?H:xe.p.none}return[xe.tk.outerDecorations.of(g),ae.Wl.lowest(xe.tk.bidiIsolatedRanges.of(g))]}});function cn(T,g,w){let L=new ae.f_,H=T.visibleRanges;w||(H=ss(H,T.state.doc));for(let{from:G,to:Y}of H)g.iterate({enter:be=>{let ve=be.type.prop(E.md.isolate);ve&&L.add(be.from,be.to,kr[ve])},from:G,to:Y});return L.finish()}function ss(T,g){let w=g.iter(),L=0,H=[],G=null;for(let{from:Y,to:be}of T)for(Y!=L&&(L<Y&&w.next(Y-L),L=Y);;){let ve=L,qe=L+w.value.length;if(!w.lineBreak&&on(w.value)&&(G&&G.to>ve-10?G.to=Math.min(be,qe):H.push(G={from:ve,to:Math.min(be,qe)})),L>=be)break;L=qe,w.next()}return H}const kr={rtl:xe.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:xe.Nm.RTL}),ltr:xe.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:xe.Nm.LTR}),auto:xe.p.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})}},78120:function(Di,ti,pe){pe.d(ti,{BO:function(){return si},D0:function(){return tt},Gz:function(){return Kt},IS:function(){return Ze},Py:function(){return Ve},QQ:function(){return It},Wl:function(){return ii},Xs:function(){return Nt},YW:function(){return ht},as:function(){return Le},bg:function(){return Pt},cp:function(){return ft},f_:function(){return hi},gc:function(){return $t},gm:function(){return Ut},jT:function(){return ee},n0:function(){return at},nZ:function(){return Dt},q6:function(){return ye},r$:function(){return Oe},uU:function(){return qt},xv:function(){return E},yy:function(){return St}});class E{lineAt(a){if(a<0||a>this.length)throw new RangeError(`Invalid position ${a} in document of length ${this.length}`);return this.lineInner(a,!1,1,0)}line(a){if(a<1||a>this.lines)throw new RangeError(`Invalid line number ${a} in ${this.lines}-line document`);return this.lineInner(a,!0,1,0)}replace(a,d,m){[a,d]=Xe(this,a,d);let k=[];return this.decompose(0,a,k,2),m.length&&m.decompose(0,m.length,k,3),this.decompose(d,this.length,k,1),xe.from(k,this.length-(d-a)+m.length)}append(a){return this.replace(this.length,this.length,a)}slice(a,d=this.length){[a,d]=Xe(this,a,d);let m=[];return this.decompose(a,d,m,0),xe.from(m,d-a)}eq(a){if(a==this)return!0;if(a.length!=this.length||a.lines!=this.lines)return!1;let d=this.scanIdentical(a,1),m=this.length-this.scanIdentical(a,-1),k=new Re(this),R=new Re(a);for(let B=d,Q=d;;){if(k.next(B),R.next(B),B=0,k.lineBreak!=R.lineBreak||k.done!=R.done||k.value!=R.value)return!1;if(Q+=k.value.length,k.done||Q>=m)return!0}}iter(a=1){return new Re(this,a)}iterRange(a,d=this.length){return new jt(this,a,d)}iterLines(a,d){let m;if(a==null)m=this.iter();else{d==null&&(d=this.lines+1);let k=this.line(a).from;m=this.iterRange(k,Math.max(k,d==this.lines+1?this.length:d<=1?0:this.line(d-1).to))}return new it(m)}toString(){return this.sliceString(0)}toJSON(){let a=[];return this.flatten(a),a}constructor(){}static of(a){if(a.length==0)throw new RangeError("A document must have at least one line");return a.length==1&&!a[0]?E.empty:a.length<=32?new ae(a):xe.from(ae.split(a,[]))}}class ae extends E{constructor(a,d=z(a)){super(),this.text=a,this.length=d}get lines(){return this.text.length}get children(){return null}lineInner(a,d,m,k){for(let R=0;;R++){let B=this.text[R],Q=k+B.length;if((d?m:Q)>=a)return new nt(k,Q,m,B);k=Q+1,m++}}decompose(a,d,m,k){let R=a<=0&&d>=this.length?this:new ae(Ke(this.text,a,d),Math.min(d,this.length)-Math.max(0,a));if(k&1){let B=m.pop(),Q=ce(R.text,B.text.slice(),0,R.length);if(Q.length<=32)m.push(new ae(Q,B.length+R.length));else{let q=Q.length>>1;m.push(new ae(Q.slice(0,q)),new ae(Q.slice(q)))}}else m.push(R)}replace(a,d,m){if(!(m instanceof ae))return super.replace(a,d,m);[a,d]=Xe(this,a,d);let k=ce(this.text,ce(m.text,Ke(this.text,0,a)),d),R=this.length+m.length-(d-a);return k.length<=32?new ae(k,R):xe.from(ae.split(k,[]),R)}sliceString(a,d=this.length,m=`
`){[a,d]=Xe(this,a,d);let k="";for(let R=0,B=0;R<=d&&B<this.text.length;B++){let Q=this.text[B],q=R+Q.length;R>a&&B&&(k+=m),a<q&&d>R&&(k+=Q.slice(Math.max(0,a-R),d-R)),R=q+1}return k}flatten(a){for(let d of this.text)a.push(d)}scanIdentical(){return 0}static split(a,d){let m=[],k=-1;for(let R of a)m.push(R),k+=R.length+1,m.length==32&&(d.push(new ae(m,k)),m=[],k=-1);return k>-1&&d.push(new ae(m,k)),d}}class xe extends E{constructor(a,d){super(),this.children=a,this.length=d,this.lines=0;for(let m of a)this.lines+=m.lines}lineInner(a,d,m,k){for(let R=0;;R++){let B=this.children[R],Q=k+B.length,q=m+B.lines-1;if((d?q:Q)>=a)return B.lineInner(a,d,m,k);k=Q+1,m=q+1}}decompose(a,d,m,k){for(let R=0,B=0;B<=d&&R<this.children.length;R++){let Q=this.children[R],q=B+Q.length;if(a<=q&&d>=B){let de=k&((B<=a?1:0)|(q>=d?2:0));B>=a&&q<=d&&!de?m.push(Q):Q.decompose(a-B,d-B,m,de)}B=q+1}}replace(a,d,m){if([a,d]=Xe(this,a,d),m.lines<this.lines)for(let k=0,R=0;k<this.children.length;k++){let B=this.children[k],Q=R+B.length;if(a>=R&&d<=Q){let q=B.replace(a-R,d-R,m),de=this.lines-B.lines+q.lines;if(q.lines<de>>4&&q.lines>de>>6){let Se=this.children.slice();return Se[k]=q,new xe(Se,this.length-(d-a)+m.length)}return super.replace(R,Q,q)}R=Q+1}return super.replace(a,d,m)}sliceString(a,d=this.length,m=`
`){[a,d]=Xe(this,a,d);let k="";for(let R=0,B=0;R<this.children.length&&B<=d;R++){let Q=this.children[R],q=B+Q.length;B>a&&R&&(k+=m),a<q&&d>B&&(k+=Q.sliceString(a-B,d-B,m)),B=q+1}return k}flatten(a){for(let d of this.children)d.flatten(a)}scanIdentical(a,d){if(!(a instanceof xe))return 0;let m=0,[k,R,B,Q]=d>0?[0,0,this.children.length,a.children.length]:[this.children.length-1,a.children.length-1,-1,-1];for(;;k+=d,R+=d){if(k==B||R==Q)return m;let q=this.children[k],de=a.children[R];if(q!=de)return m+q.scanIdentical(de,d);m+=q.length+1}}static from(a,d=a.reduce((m,k)=>m+k.length+1,-1)){let m=0;for(let _e of a)m+=_e.lines;if(m<32){let _e=[];for(let ei of a)ei.flatten(_e);return new ae(_e,d)}let k=Math.max(32,m>>5),R=k<<1,B=k>>1,Q=[],q=0,de=-1,Se=[];function Ie(_e){let ei;if(_e.lines>R&&_e instanceof xe)for(let Ci of _e.children)Ie(Ci);else _e.lines>B&&(q>B||!q)?(ot(),Q.push(_e)):_e instanceof ae&&q&&(ei=Se[Se.length-1])instanceof ae&&_e.lines+ei.lines<=32?(q+=_e.lines,de+=_e.length+1,Se[Se.length-1]=new ae(ei.text.concat(_e.text),ei.length+1+_e.length)):(q+_e.lines>k&&ot(),q+=_e.lines,de+=_e.length+1,Se.push(_e))}function ot(){q!=0&&(Q.push(Se.length==1?Se[0]:xe.from(Se,de)),de=-1,q=Se.length=0)}for(let _e of a)Ie(_e);return ot(),Q.length==1?Q[0]:new xe(Q,d)}}E.empty=new ae([""],0);function z(D){let a=-1;for(let d of D)a+=d.length+1;return a}function ce(D,a,d=0,m=1e9){for(let k=0,R=0,B=!0;R<D.length&&k<=m;R++){let Q=D[R],q=k+Q.length;q>=d&&(q>m&&(Q=Q.slice(0,m-k)),k<d&&(Q=Q.slice(d-k)),B?(a[a.length-1]+=Q,B=!1):a.push(Q)),k=q+1}return a}function Ke(D,a,d){return ce(D,[""],a,d)}class Re{constructor(a,d=1){this.dir=d,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[a],this.offsets=[d>0?1:(a instanceof ae?a.text.length:a.children.length)<<1]}nextInner(a,d){for(this.done=this.lineBreak=!1;;){let m=this.nodes.length-1,k=this.nodes[m],R=this.offsets[m],B=R>>1,Q=k instanceof ae?k.text.length:k.children.length;if(B==(d>0?Q:0)){if(m==0)return this.done=!0,this.value="",this;d>0&&this.offsets[m-1]++,this.nodes.pop(),this.offsets.pop()}else if((R&1)==(d>0?0:1)){if(this.offsets[m]+=d,a==0)return this.lineBreak=!0,this.value=`
`,this;a--}else if(k instanceof ae){let q=k.text[B+(d<0?-1:0)];if(this.offsets[m]+=d,q.length>Math.max(0,a))return this.value=a==0?q:d>0?q.slice(a):q.slice(0,q.length-a),this;a-=q.length}else{let q=k.children[B+(d<0?-1:0)];a>q.length?(a-=q.length,this.offsets[m]+=d):(d<0&&this.offsets[m]--,this.nodes.push(q),this.offsets.push(d>0?1:(q instanceof ae?q.text.length:q.children.length)<<1))}}}next(a=0){return a<0&&(this.nextInner(-a,-this.dir),a=this.value.length),this.nextInner(a,this.dir)}}class jt{constructor(a,d,m){this.value="",this.done=!1,this.cursor=new Re(a,d>m?-1:1),this.pos=d>m?a.length:0,this.from=Math.min(d,m),this.to=Math.max(d,m)}nextInner(a,d){if(d<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;a+=Math.max(0,d<0?this.pos-this.to:this.from-this.pos);let m=d<0?this.pos-this.from:this.to-this.pos;a>m&&(a=m),m-=a;let{value:k}=this.cursor.next(a);return this.pos+=(k.length+a)*d,this.value=k.length<=m?k:d<0?k.slice(k.length-m):k.slice(0,m),this.done=!this.value,this}next(a=0){return a<0?a=Math.max(a,this.from-this.pos):a>0&&(a=Math.min(a,this.to-this.pos)),this.nextInner(a,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class it{constructor(a){this.inner=a,this.afterBreak=!0,this.value="",this.done=!1}next(a=0){let{done:d,lineBreak:m,value:k}=this.inner.next(a);return d&&this.afterBreak?(this.value="",this.afterBreak=!1):d?(this.done=!0,this.value=""):m?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=k,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(E.prototype[Symbol.iterator]=function(){return this.iter()},Re.prototype[Symbol.iterator]=jt.prototype[Symbol.iterator]=it.prototype[Symbol.iterator]=function(){return this});class nt{constructor(a,d,m,k){this.from=a,this.to=d,this.number=m,this.text=k}get length(){return this.to-this.from}}function Xe(D,a,d){return a=Math.max(0,Math.min(D.length,a)),[a,Math.max(a,Math.min(D.length,d))]}let lt="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(D=>D?parseInt(D,36):1);for(let D=1;D<lt.length;D++)lt[D]+=lt[D-1];function Ee(D){for(let a=1;a<lt.length;a+=2)if(lt[a]>D)return lt[a-1]<=D;return!1}function ct(D){return D>=127462&&D<=127487}const vt=8205;function ft(D,a,d=!0,m=!0){return(d?ue:kt)(D,a,m)}function ue(D,a,d){if(a==D.length)return a;a&&Ot(D.charCodeAt(a))&&Qt(D.charCodeAt(a-1))&&a--;let m=Ut(D,a);for(a+=Dt(m);a<D.length;){let k=Ut(D,a);if(m==vt||k==vt||d&&Ee(k))a+=Dt(k),m=k;else if(ct(k)){let R=0,B=a-2;for(;B>=0&&ct(Ut(D,B));)R++,B-=2;if(R%2==0)break;a+=2}else break}return a}function kt(D,a,d){for(;a>0;){let m=ue(D,a-2,d);if(m<a)return m;a--}return 0}function Ot(D){return D>=56320&&D<57344}function Qt(D){return D>=55296&&D<56320}function Ut(D,a){let d=D.charCodeAt(a);if(!Qt(d)||a+1==D.length)return d;let m=D.charCodeAt(a+1);return Ot(m)?(d-55296<<10)+(m-56320)+65536:d}function Pt(D){return D<=65535?String.fromCharCode(D):(D-=65536,String.fromCharCode((D>>10)+55296,(D&1023)+56320))}function Dt(D){return D<65536?1:2}const Gt=/\r\n?|\n/;var $t=function(D){return D[D.Simple=0]="Simple",D[D.TrackDel=1]="TrackDel",D[D.TrackBefore=2]="TrackBefore",D[D.TrackAfter=3]="TrackAfter",D}($t||($t={}));class at{constructor(a){this.sections=a}get length(){let a=0;for(let d=0;d<this.sections.length;d+=2)a+=this.sections[d];return a}get newLength(){let a=0;for(let d=0;d<this.sections.length;d+=2){let m=this.sections[d+1];a+=m<0?this.sections[d]:m}return a}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(a){for(let d=0,m=0,k=0;d<this.sections.length;){let R=this.sections[d++],B=this.sections[d++];B<0?(a(m,k,R),k+=R):k+=B,m+=R}}iterChangedRanges(a,d=!1){ke(this,a,d)}get invertedDesc(){let a=[];for(let d=0;d<this.sections.length;){let m=this.sections[d++],k=this.sections[d++];k<0?a.push(m,k):a.push(k,m)}return new at(a)}composeDesc(a){return this.empty?a:a.empty?this:K(this,a)}mapDesc(a,d=!1){return a.empty?this:Ne(this,a,d)}mapPos(a,d=-1,m=$t.Simple){let k=0,R=0;for(let B=0;B<this.sections.length;){let Q=this.sections[B++],q=this.sections[B++],de=k+Q;if(q<0){if(de>a)return R+(a-k);R+=Q}else{if(m!=$t.Simple&&de>=a&&(m==$t.TrackDel&&k<a&&de>a||m==$t.TrackBefore&&k<a||m==$t.TrackAfter&&de>a))return null;if(de>a||de==a&&d<0&&!Q)return a==k||d<0?R:R+q;R+=q}k=de}if(a>k)throw new RangeError(`Position ${a} is out of range for changeset of length ${k}`);return R}touchesRange(a,d=a){for(let m=0,k=0;m<this.sections.length&&k<=d;){let R=this.sections[m++],B=this.sections[m++],Q=k+R;if(B>=0&&k<=d&&Q>=a)return k<a&&Q>d?"cover":!0;k=Q}return!1}toString(){let a="";for(let d=0;d<this.sections.length;){let m=this.sections[d++],k=this.sections[d++];a+=(a?" ":"")+m+(k>=0?":"+k:"")}return a}toJSON(){return this.sections}static fromJSON(a){if(!Array.isArray(a)||a.length%2||a.some(d=>typeof d!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new at(a)}static create(a){return new at(a)}}class Le extends at{constructor(a,d){super(a),this.inserted=d}apply(a){if(this.length!=a.length)throw new RangeError("Applying change set to a document with the wrong length");return ke(this,(d,m,k,R,B)=>a=a.replace(k,k+(m-d),B),!1),a}mapDesc(a,d=!1){return Ne(this,a,d,!0)}invert(a){let d=this.sections.slice(),m=[];for(let k=0,R=0;k<d.length;k+=2){let B=d[k],Q=d[k+1];if(Q>=0){d[k]=Q,d[k+1]=B;let q=k>>1;for(;m.length<q;)m.push(E.empty);m.push(B?a.slice(R,R+B):E.empty)}R+=B}return new Le(d,m)}compose(a){return this.empty?a:a.empty?this:K(this,a,!0)}map(a,d=!1){return a.empty?this:Ne(this,a,d,!0)}iterChanges(a,d=!1){ke(this,a,d)}get desc(){return at.create(this.sections)}filter(a){let d=[],m=[],k=[],R=new $e(this);e:for(let B=0,Q=0;;){let q=B==a.length?1e9:a[B++];for(;Q<q||Q==q&&R.len==0;){if(R.done)break e;let Se=Math.min(R.len,q-Q);He(k,Se,-1);let Ie=R.ins==-1?-1:R.off==0?R.ins:0;He(d,Se,Ie),Ie>0&&Me(m,d,R.text),R.forward(Se),Q+=Se}let de=a[B++];for(;Q<de;){if(R.done)break e;let Se=Math.min(R.len,de-Q);He(d,Se,-1),He(k,Se,R.ins==-1?-1:R.off==0?R.ins:0),R.forward(Se),Q+=Se}}return{changes:new Le(d,m),filtered:at.create(k)}}toJSON(){let a=[];for(let d=0;d<this.sections.length;d+=2){let m=this.sections[d],k=this.sections[d+1];k<0?a.push(m):k==0?a.push([m]):a.push([m].concat(this.inserted[d>>1].toJSON()))}return a}static of(a,d,m){let k=[],R=[],B=0,Q=null;function q(Se=!1){if(!Se&&!k.length)return;B<d&&He(k,d-B,-1);let Ie=new Le(k,R);Q=Q?Q.compose(Ie.map(Q)):Ie,k=[],R=[],B=0}function de(Se){if(Array.isArray(Se))for(let Ie of Se)de(Ie);else if(Se instanceof Le){if(Se.length!=d)throw new RangeError(`Mismatched change set length (got ${Se.length}, expected ${d})`);q(),Q=Q?Q.compose(Se.map(Q)):Se}else{let{from:Ie,to:ot=Ie,insert:_e}=Se;if(Ie>ot||Ie<0||ot>d)throw new RangeError(`Invalid change range ${Ie} to ${ot} (in doc of length ${d})`);let ei=_e?typeof _e=="string"?E.of(_e.split(m||Gt)):_e:E.empty,Ci=ei.length;if(Ie==ot&&Ci==0)return;Ie<B&&q(),Ie>B&&He(k,Ie-B,-1),He(k,ot-Ie,Ci),Me(R,k,ei),B=ot}}return de(a),q(!Q),Q}static empty(a){return new Le(a?[a,-1]:[],[])}static fromJSON(a){if(!Array.isArray(a))throw new RangeError("Invalid JSON representation of ChangeSet");let d=[],m=[];for(let k=0;k<a.length;k++){let R=a[k];if(typeof R=="number")d.push(R,-1);else{if(!Array.isArray(R)||typeof R[0]!="number"||R.some((B,Q)=>Q&&typeof B!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(R.length==1)d.push(R[0],0);else{for(;m.length<k;)m.push(E.empty);m[k]=E.of(R.slice(1)),d.push(R[0],m[k].length)}}}return new Le(d,m)}static createSet(a,d){return new Le(a,d)}}function He(D,a,d,m=!1){if(a==0&&d<=0)return;let k=D.length-2;k>=0&&d<=0&&d==D[k+1]?D[k]+=a:a==0&&D[k]==0?D[k+1]+=d:m?(D[k]+=a,D[k+1]+=d):D.push(a,d)}function Me(D,a,d){if(d.length==0)return;let m=a.length-2>>1;if(m<D.length)D[D.length-1]=D[D.length-1].append(d);else{for(;D.length<m;)D.push(E.empty);D.push(d)}}function ke(D,a,d){let m=D.inserted;for(let k=0,R=0,B=0;B<D.sections.length;){let Q=D.sections[B++],q=D.sections[B++];if(q<0)k+=Q,R+=Q;else{let de=k,Se=R,Ie=E.empty;for(;de+=Q,Se+=q,q&&m&&(Ie=Ie.append(m[B-2>>1])),!(d||B==D.sections.length||D.sections[B+1]<0);)Q=D.sections[B++],q=D.sections[B++];a(k,de,R,Se,Ie),k=de,R=Se}}}function Ne(D,a,d,m=!1){let k=[],R=m?[]:null,B=new $e(D),Q=new $e(a);for(let q=-1;;)if(B.ins==-1&&Q.ins==-1){let de=Math.min(B.len,Q.len);He(k,de,-1),B.forward(de),Q.forward(de)}else if(Q.ins>=0&&(B.ins<0||q==B.i||B.off==0&&(Q.len<B.len||Q.len==B.len&&!d))){let de=Q.len;for(He(k,Q.ins,-1);de;){let Se=Math.min(B.len,de);B.ins>=0&&q<B.i&&B.len<=Se&&(He(k,0,B.ins),R&&Me(R,k,B.text),q=B.i),B.forward(Se),de-=Se}Q.next()}else if(B.ins>=0){let de=0,Se=B.len;for(;Se;)if(Q.ins==-1){let Ie=Math.min(Se,Q.len);de+=Ie,Se-=Ie,Q.forward(Ie)}else if(Q.ins==0&&Q.len<Se)Se-=Q.len,Q.next();else break;He(k,de,q<B.i?B.ins:0),R&&q<B.i&&Me(R,k,B.text),q=B.i,B.forward(B.len-Se)}else{if(B.done&&Q.done)return R?Le.createSet(k,R):at.create(k);throw new Error("Mismatched change set lengths")}}function K(D,a,d=!1){let m=[],k=d?[]:null,R=new $e(D),B=new $e(a);for(let Q=!1;;){if(R.done&&B.done)return k?Le.createSet(m,k):at.create(m);if(R.ins==0)He(m,R.len,0,Q),R.next();else if(B.len==0&&!B.done)He(m,0,B.ins,Q),k&&Me(k,m,B.text),B.next();else{if(R.done||B.done)throw new Error("Mismatched change set lengths");{let q=Math.min(R.len2,B.len),de=m.length;if(R.ins==-1){let Se=B.ins==-1?-1:B.off?0:B.ins;He(m,q,Se,Q),k&&Se&&Me(k,m,B.text)}else B.ins==-1?(He(m,R.off?0:R.len,q,Q),k&&Me(k,m,R.textBit(q))):(He(m,R.off?0:R.len,B.off?0:B.ins,Q),k&&!B.off&&Me(k,m,B.text));Q=(R.ins>q||B.ins>=0&&B.len>q)&&(Q||m.length>de),R.forward2(q),B.forward(q)}}}}class $e{constructor(a){this.set=a,this.i=0,this.next()}next(){let{sections:a}=this.set;this.i<a.length?(this.len=a[this.i++],this.ins=a[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:a}=this.set,d=this.i-2>>1;return d>=a.length?E.empty:a[d]}textBit(a){let{inserted:d}=this.set,m=this.i-2>>1;return m>=d.length&&!a?E.empty:d[m].slice(this.off,a==null?void 0:this.off+a)}forward(a){a==this.len?this.next():(this.len-=a,this.off+=a)}forward2(a){this.ins==-1?this.forward(a):a==this.ins?this.next():(this.ins-=a,this.off+=a)}}class Fe{constructor(a,d,m){this.from=a,this.to=d,this.flags=m}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let a=this.flags&7;return a==7?null:a}get goalColumn(){let a=this.flags>>6;return a==16777215?void 0:a}map(a,d=-1){let m,k;return this.empty?m=k=a.mapPos(this.from,d):(m=a.mapPos(this.from,1),k=a.mapPos(this.to,-1)),m==this.from&&k==this.to?this:new Fe(m,k,this.flags)}extend(a,d=a){if(a<=this.anchor&&d>=this.anchor)return ee.range(a,d);let m=Math.abs(a-this.anchor)>Math.abs(d-this.anchor)?a:d;return ee.range(this.anchor,m)}eq(a,d=!1){return this.anchor==a.anchor&&this.head==a.head&&(!d||!this.empty||this.assoc==a.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(a){if(!a||typeof a.anchor!="number"||typeof a.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ee.range(a.anchor,a.head)}static create(a,d,m){return new Fe(a,d,m)}}class ee{constructor(a,d){this.ranges=a,this.mainIndex=d}map(a,d=-1){return a.empty?this:ee.create(this.ranges.map(m=>m.map(a,d)),this.mainIndex)}eq(a,d=!1){if(this.ranges.length!=a.ranges.length||this.mainIndex!=a.mainIndex)return!1;for(let m=0;m<this.ranges.length;m++)if(!this.ranges[m].eq(a.ranges[m],d))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ee([this.main],0)}addRange(a,d=!0){return ee.create([a].concat(this.ranges),d?0:this.mainIndex+1)}replaceRange(a,d=this.mainIndex){let m=this.ranges.slice();return m[d]=a,ee.create(m,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(a=>a.toJSON()),main:this.mainIndex}}static fromJSON(a){if(!a||!Array.isArray(a.ranges)||typeof a.main!="number"||a.main>=a.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ee(a.ranges.map(d=>Fe.fromJSON(d)),a.main)}static single(a,d=a){return new ee([ee.range(a,d)],0)}static create(a,d=0){if(a.length==0)throw new RangeError("A selection needs at least one range");for(let m=0,k=0;k<a.length;k++){let R=a[k];if(R.empty?R.from<=m:R.from<m)return ee.normalized(a.slice(),d);m=R.to}return new ee(a,d)}static cursor(a,d=0,m,k){return Fe.create(a,a,(d==0?0:d<0?8:16)|(m==null?7:Math.min(6,m))|(k!=null?k:16777215)<<6)}static range(a,d,m,k){let R=(m!=null?m:16777215)<<6|(k==null?7:Math.min(6,k));return d<a?Fe.create(d,a,48|R):Fe.create(a,d,(d>a?8:0)|R)}static normalized(a,d=0){let m=a[d];a.sort((k,R)=>k.from-R.from),d=a.indexOf(m);for(let k=1;k<a.length;k++){let R=a[k],B=a[k-1];if(R.empty?R.from<=B.to:R.from<B.to){let Q=B.from,q=Math.max(R.to,B.to);k<=d&&d--,a.splice(--k,2,R.anchor>R.head?ee.range(q,Q):ee.range(Q,q))}}return new ee(a,d)}}function ge(D,a){for(let d of D.ranges)if(d.to>a)throw new RangeError("Selection points outside of document")}let Ce=0;class Oe{constructor(a,d,m,k,R){this.combine=a,this.compareInput=d,this.compare=m,this.isStatic=k,this.id=Ce++,this.default=a([]),this.extensions=typeof R=="function"?R(this):R}get reader(){return this}static define(a={}){return new Oe(a.combine||(d=>d),a.compareInput||((d,m)=>d===m),a.compare||(a.combine?(d,m)=>d===m:De),!!a.static,a.enables)}of(a){return new dt([],this,0,a)}compute(a,d){if(this.isStatic)throw new Error("Can't compute a static facet");return new dt(a,this,1,d)}computeN(a,d){if(this.isStatic)throw new Error("Can't compute a static facet");return new dt(a,this,2,d)}from(a,d){return d||(d=m=>m),this.compute([a],m=>d(m.field(a)))}}function De(D,a){return D==a||D.length==a.length&&D.every((d,m)=>d===a[m])}class dt{constructor(a,d,m,k){this.dependencies=a,this.facet=d,this.type=m,this.value=k,this.id=Ce++}dynamicSlot(a){var d;let m=this.value,k=this.facet.compareInput,R=this.id,B=a[R]>>1,Q=this.type==2,q=!1,de=!1,Se=[];for(let Ie of this.dependencies)Ie=="doc"?q=!0:Ie=="selection"?de=!0:((d=a[Ie.id])!==null&&d!==void 0?d:1)&1||Se.push(a[Ie.id]);return{create(Ie){return Ie.values[B]=m(Ie),1},update(Ie,ot){if(q&&ot.docChanged||de&&(ot.docChanged||ot.selection)||xt(Ie,Se)){let _e=m(Ie);if(Q?!Ye(_e,Ie.values[B],k):!k(_e,Ie.values[B]))return Ie.values[B]=_e,1}return 0},reconfigure:(Ie,ot)=>{let _e,ei=ot.config.address[R];if(ei!=null){let Ci=$(ot,ei);if(this.dependencies.every(ni=>ni instanceof Oe?ot.facet(ni)===Ie.facet(ni):ni instanceof It?ot.field(ni,!1)==Ie.field(ni,!1):!0)||(Q?Ye(_e=m(Ie),Ci,k):k(_e=m(Ie),Ci)))return Ie.values[B]=Ci,0}else _e=m(Ie);return Ie.values[B]=_e,1}}}}function Ye(D,a,d){if(D.length!=a.length)return!1;for(let m=0;m<D.length;m++)if(!d(D[m],a[m]))return!1;return!0}function xt(D,a){let d=!1;for(let m of a)j(D,m)&1&&(d=!0);return d}function pt(D,a,d){let m=d.map(q=>D[q.id]),k=d.map(q=>q.type),R=m.filter(q=>!(q&1)),B=D[a.id]>>1;function Q(q){let de=[];for(let Se=0;Se<m.length;Se++){let Ie=$(q,m[Se]);if(k[Se]==2)for(let ot of Ie)de.push(ot);else de.push(Ie)}return a.combine(de)}return{create(q){for(let de of m)j(q,de);return q.values[B]=Q(q),1},update(q,de){if(!xt(q,R))return 0;let Se=Q(q);return a.compare(Se,q.values[B])?0:(q.values[B]=Se,1)},reconfigure(q,de){let Se=xt(q,m),Ie=de.config.facets[a.id],ot=de.facet(a);if(Ie&&!Se&&De(d,Ie))return q.values[B]=ot,0;let _e=Q(q);return a.compare(_e,ot)?(q.values[B]=ot,0):(q.values[B]=_e,1)}}}const Rt=Oe.define({static:!0});class It{constructor(a,d,m,k,R){this.id=a,this.createF=d,this.updateF=m,this.compareF=k,this.spec=R,this.provides=void 0}static define(a){let d=new It(Ce++,a.create,a.update,a.compare||((m,k)=>m===k),a);return a.provide&&(d.provides=a.provide(d)),d}create(a){let d=a.facet(Rt).find(m=>m.field==this);return((d==null?void 0:d.create)||this.createF)(a)}slot(a){let d=a[this.id]>>1;return{create:m=>(m.values[d]=this.create(m),1),update:(m,k)=>{let R=m.values[d],B=this.updateF(R,k);return this.compareF(R,B)?0:(m.values[d]=B,1)},reconfigure:(m,k)=>k.config.address[this.id]!=null?(m.values[d]=k.field(this),0):(m.values[d]=this.create(m),1)}}init(a){return[this,Rt.of({field:this,create:a})]}get extension(){return this}}const Et={lowest:4,low:3,default:2,high:1,highest:0};function Mt(D){return a=>new oi(a,D)}const ii={highest:Mt(Et.highest),high:Mt(Et.high),default:Mt(Et.default),low:Mt(Et.low),lowest:Mt(Et.lowest)};class oi{constructor(a,d){this.inner=a,this.prec=d}}class oe{of(a){return new x(this,a)}reconfigure(a){return oe.reconfigure.of({compartment:this,extension:a})}get(a){return a.config.compartments.get(this)}}class x{constructor(a,d){this.compartment=a,this.inner=d}}class M{constructor(a,d,m,k,R,B){for(this.base=a,this.compartments=d,this.dynamicSlots=m,this.address=k,this.staticValues=R,this.facets=B,this.statusTemplate=[];this.statusTemplate.length<m.length;)this.statusTemplate.push(0)}staticFacet(a){let d=this.address[a.id];return d==null?a.default:this.staticValues[d>>1]}static resolve(a,d,m){let k=[],R=Object.create(null),B=new Map;for(let ot of F(a,d,B))ot instanceof It?k.push(ot):(R[ot.facet.id]||(R[ot.facet.id]=[])).push(ot);let Q=Object.create(null),q=[],de=[];for(let ot of k)Q[ot.id]=de.length<<1,de.push(_e=>ot.slot(_e));let Se=m==null?void 0:m.config.facets;for(let ot in R){let _e=R[ot],ei=_e[0].facet,Ci=Se&&Se[ot]||[];if(_e.every(ni=>ni.type==0))if(Q[ei.id]=q.length<<1|1,De(Ci,_e))q.push(m.facet(ei));else{let ni=ei.combine(_e.map(Ni=>Ni.value));q.push(m&&ei.compare(ni,m.facet(ei))?m.facet(ei):ni)}else{for(let ni of _e)ni.type==0?(Q[ni.id]=q.length<<1|1,q.push(ni.value)):(Q[ni.id]=de.length<<1,de.push(Ni=>ni.dynamicSlot(Ni)));Q[ei.id]=de.length<<1,de.push(ni=>pt(ni,ei,_e))}}let Ie=de.map(ot=>ot(Q));return new M(a,B,Ie,Q,q,R)}}function F(D,a,d){let m=[[],[],[],[],[]],k=new Map;function R(B,Q){let q=k.get(B);if(q!=null){if(q<=Q)return;let de=m[q].indexOf(B);de>-1&&m[q].splice(de,1),B instanceof x&&d.delete(B.compartment)}if(k.set(B,Q),Array.isArray(B))for(let de of B)R(de,Q);else if(B instanceof x){if(d.has(B.compartment))throw new RangeError("Duplicate use of compartment in extensions");let de=a.get(B.compartment)||B.inner;d.set(B.compartment,de),R(de,Q)}else if(B instanceof oi)R(B.inner,B.prec);else if(B instanceof It)m[Q].push(B),B.provides&&R(B.provides,Q);else if(B instanceof dt)m[Q].push(B),B.facet.extensions&&R(B.facet.extensions,Et.default);else{let de=B.extension;if(!de)throw new Error(`Unrecognized extension value in extension set (${B}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);R(de,Q)}}return R(D,Et.default),m.reduce((B,Q)=>B.concat(Q))}function j(D,a){if(a&1)return 2;let d=a>>1,m=D.status[d];if(m==4)throw new Error("Cyclic dependency between fields and/or facets");if(m&2)return m;D.status[d]=4;let k=D.computeSlot(D,D.config.dynamicSlots[d]);return D.status[d]=2|k}function $(D,a){return a&1?D.config.staticValues[a>>1]:D.values[a>>1]}const se=Oe.define(),le=Oe.define({combine:D=>D.some(a=>a),static:!0}),Be=Oe.define({combine:D=>D.length?D[0]:void 0,static:!0}),et=Oe.define(),We=Oe.define(),_=Oe.define(),Pe=Oe.define({combine:D=>D.length?D[0]:!1});class ye{constructor(a,d){this.type=a,this.value=d}static define(){return new Te}}class Te{of(a){return new ye(this,a)}}class je{constructor(a){this.map=a}of(a){return new Ve(this,a)}}class Ve{constructor(a,d){this.type=a,this.value=d}map(a){let d=this.type.map(this.value,a);return d===void 0?void 0:d==this.value?this:new Ve(this.type,d)}is(a){return this.type==a}static define(a={}){return new je(a.map||(d=>d))}static mapEffects(a,d){if(!a.length)return a;let m=[];for(let k of a){let R=k.map(d);R&&m.push(R)}return m}}Ve.reconfigure=Ve.define(),Ve.appendConfig=Ve.define();class ht{constructor(a,d,m,k,R,B){this.startState=a,this.changes=d,this.selection=m,this.effects=k,this.annotations=R,this.scrollIntoView=B,this._doc=null,this._state=null,m&&ge(m,d.newLength),R.some(Q=>Q.type==ht.time)||(this.annotations=R.concat(ht.time.of(Date.now())))}static create(a,d,m,k,R,B){return new ht(a,d,m,k,R,B)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(a){for(let d of this.annotations)if(d.type==a)return d.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(a){let d=this.annotation(ht.userEvent);return!!(d&&(d==a||d.length>a.length&&d.slice(0,a.length)==a&&d[a.length]=="."))}}ht.time=ye.define(),ht.userEvent=ye.define(),ht.addToHistory=ye.define(),ht.remote=ye.define();function wt(D,a){let d=[];for(let m=0,k=0;;){let R,B;if(m<D.length&&(k==a.length||a[k]>=D[m]))R=D[m++],B=D[m++];else if(k<a.length)R=a[k++],B=a[k++];else return d;!d.length||d[d.length-1]<R?d.push(R,B):d[d.length-1]<B&&(d[d.length-1]=B)}}function gt(D,a,d){var m;let k,R,B;return d?(k=a.changes,R=Le.empty(a.changes.length),B=D.changes.compose(a.changes)):(k=a.changes.map(D.changes),R=D.changes.mapDesc(a.changes,!0),B=D.changes.compose(k)),{changes:B,selection:a.selection?a.selection.map(R):(m=D.selection)===null||m===void 0?void 0:m.map(k),effects:Ve.mapEffects(D.effects,k).concat(Ve.mapEffects(a.effects,R)),annotations:D.annotations.length?D.annotations.concat(a.annotations):a.annotations,scrollIntoView:D.scrollIntoView||a.scrollIntoView}}function Ft(D,a,d){let m=a.selection,k=Ge(a.annotations);return a.userEvent&&(k=k.concat(ht.userEvent.of(a.userEvent))),{changes:a.changes instanceof Le?a.changes:Le.of(a.changes||[],d,D.facet(Be)),selection:m&&(m instanceof ee?m:ee.single(m.anchor,m.head)),effects:Ge(a.effects),annotations:k,scrollIntoView:!!a.scrollIntoView}}function ze(D,a,d){let m=Ft(D,a.length?a[0]:{},D.doc.length);a.length&&a[0].filter===!1&&(d=!1);for(let R=1;R<a.length;R++){a[R].filter===!1&&(d=!1);let B=!!a[R].sequential;m=gt(m,Ft(D,a[R],B?m.changes.newLength:D.doc.length),B)}let k=ht.create(D,m.changes,m.selection,m.effects,m.annotations,m.scrollIntoView);return Qe(d?Tt(k):k)}function Tt(D){let a=D.startState,d=!0;for(let k of a.facet(et)){let R=k(D);if(R===!1){d=!1;break}Array.isArray(R)&&(d=d===!0?R:wt(d,R))}if(d!==!0){let k,R;if(d===!1)R=D.changes.invertedDesc,k=Le.empty(a.doc.length);else{let B=D.changes.filter(d);k=B.changes,R=B.filtered.mapDesc(B.changes).invertedDesc}D=ht.create(a,k,D.selection&&D.selection.map(R),Ve.mapEffects(D.effects,R),D.annotations,D.scrollIntoView)}let m=a.facet(We);for(let k=m.length-1;k>=0;k--){let R=m[k](D);R instanceof ht?D=R:Array.isArray(R)&&R.length==1&&R[0]instanceof ht?D=R[0]:D=ze(a,Ge(R),!1)}return D}function Qe(D){let a=D.startState,d=a.facet(_),m=D;for(let k=d.length-1;k>=0;k--){let R=d[k](D);R&&Object.keys(R).length&&(m=gt(m,Ft(a,R,D.changes.newLength),!0))}return m==D?D:ht.create(a,D.changes,D.selection,m.effects,m.annotations,m.scrollIntoView)}const Ct=[];function Ge(D){return D==null?Ct:Array.isArray(D)?D:[D]}var tt=function(D){return D[D.Word=0]="Word",D[D.Space=1]="Space",D[D.Other=2]="Other",D}(tt||(tt={}));const mt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let st;try{st=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(D){}function zt(D){if(st)return st.test(D);for(let a=0;a<D.length;a++){let d=D[a];if(/\w/.test(d)||d>"\x80"&&(d.toUpperCase()!=d.toLowerCase()||mt.test(d)))return!0}return!1}function Ht(D){return a=>{if(!/\S/.test(a))return tt.Space;if(zt(a))return tt.Word;for(let d=0;d<D.length;d++)if(a.indexOf(D[d])>-1)return tt.Word;return tt.Other}}class St{constructor(a,d,m,k,R,B){this.config=a,this.doc=d,this.selection=m,this.values=k,this.status=a.statusTemplate.slice(),this.computeSlot=R,B&&(B._state=this);for(let Q=0;Q<this.config.dynamicSlots.length;Q++)j(this,Q<<1);this.computeSlot=null}field(a,d=!0){let m=this.config.address[a.id];if(m==null){if(d)throw new RangeError("Field is not present in this state");return}return j(this,m),$(this,m)}update(...a){return ze(this,a,!0)}applyTransaction(a){let d=this.config,{base:m,compartments:k}=d;for(let Q of a.effects)Q.is(oe.reconfigure)?(d&&(k=new Map,d.compartments.forEach((q,de)=>k.set(de,q)),d=null),k.set(Q.value.compartment,Q.value.extension)):Q.is(Ve.reconfigure)?(d=null,m=Q.value):Q.is(Ve.appendConfig)&&(d=null,m=Ge(m).concat(Q.value));let R;d?R=a.startState.values.slice():(d=M.resolve(m,k,this),R=new St(d,this.doc,this.selection,d.dynamicSlots.map(()=>null),(q,de)=>de.reconfigure(q,this),null).values);let B=a.startState.facet(le)?a.newSelection:a.newSelection.asSingle();new St(d,a.newDoc,B,R,(Q,q)=>q.update(Q,a),a)}replaceSelection(a){return typeof a=="string"&&(a=this.toText(a)),this.changeByRange(d=>({changes:{from:d.from,to:d.to,insert:a},range:ee.cursor(d.from+a.length)}))}changeByRange(a){let d=this.selection,m=a(d.ranges[0]),k=this.changes(m.changes),R=[m.range],B=Ge(m.effects);for(let Q=1;Q<d.ranges.length;Q++){let q=a(d.ranges[Q]),de=this.changes(q.changes),Se=de.map(k);for(let ot=0;ot<Q;ot++)R[ot]=R[ot].map(Se);let Ie=k.mapDesc(de,!0);R.push(q.range.map(Ie)),k=k.compose(Se),B=Ve.mapEffects(B,Se).concat(Ve.mapEffects(Ge(q.effects),Ie))}return{changes:k,selection:ee.create(R,d.mainIndex),effects:B}}changes(a=[]){return a instanceof Le?a:Le.of(a,this.doc.length,this.facet(St.lineSeparator))}toText(a){return E.of(a.split(this.facet(St.lineSeparator)||Gt))}sliceDoc(a=0,d=this.doc.length){return this.doc.sliceString(a,d,this.lineBreak)}facet(a){let d=this.config.address[a.id];return d==null?a.default:(j(this,d),$(this,d))}toJSON(a){let d={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(a)for(let m in a){let k=a[m];k instanceof It&&this.config.address[k.id]!=null&&(d[m]=k.spec.toJSON(this.field(a[m]),this))}return d}static fromJSON(a,d={},m){if(!a||typeof a.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let k=[];if(m){for(let R in m)if(Object.prototype.hasOwnProperty.call(a,R)){let B=m[R],Q=a[R];k.push(B.init(q=>B.spec.fromJSON(Q,q)))}}return St.create({doc:a.doc,selection:ee.fromJSON(a.selection),extensions:d.extensions?k.concat([d.extensions]):k})}static create(a={}){let d=M.resolve(a.extensions||[],new Map),m=a.doc instanceof E?a.doc:E.of((a.doc||"").split(d.staticFacet(St.lineSeparator)||Gt)),k=a.selection?a.selection instanceof ee?a.selection:ee.single(a.selection.anchor,a.selection.head):ee.single(0);return ge(k,m.length),d.staticFacet(le)||(k=k.asSingle()),new St(d,m,k,d.dynamicSlots.map(()=>null),(R,B)=>B.create(R),null)}get tabSize(){return this.facet(St.tabSize)}get lineBreak(){return this.facet(St.lineSeparator)||`
`}get readOnly(){return this.facet(Pe)}phrase(a,...d){for(let m of this.facet(St.phrases))if(Object.prototype.hasOwnProperty.call(m,a)){a=m[a];break}return d.length&&(a=a.replace(/\$(\$|\d*)/g,(m,k)=>{if(k=="$")return"$";let R=+(k||1);return!R||R>d.length?m:d[R-1]})),a}languageDataAt(a,d,m=-1){let k=[];for(let R of this.facet(se))for(let B of R(this,d,m))Object.prototype.hasOwnProperty.call(B,a)&&k.push(B[a]);return k}charCategorizer(a){return Ht(this.languageDataAt("wordChars",a).join(""))}wordAt(a){let{text:d,from:m,length:k}=this.doc.lineAt(a),R=this.charCategorizer(a),B=a-m,Q=a-m;for(;B>0;){let q=ft(d,B,!1);if(R(d.slice(q,B))!=tt.Word)break;B=q}for(;Q<k;){let q=ft(d,Q);if(R(d.slice(Q,q))!=tt.Word)break;Q=q}return B==Q?null:ee.range(B+m,Q+m)}}St.allowMultipleSelections=le,St.tabSize=Oe.define({combine:D=>D.length?D[0]:4}),St.lineSeparator=Be,St.readOnly=Pe,St.phrases=Oe.define({compare(D,a){let d=Object.keys(D),m=Object.keys(a);return d.length==m.length&&d.every(k=>D[k]==a[k])}}),St.languageData=se,St.changeFilter=et,St.transactionFilter=We,St.transactionExtender=_,oe.reconfigure=Ve.define();function si(D,a,d={}){let m={};for(let k of D)for(let R of Object.keys(k)){let B=k[R],Q=m[R];if(Q===void 0)m[R]=B;else if(!(Q===B||B===void 0))if(Object.hasOwnProperty.call(d,R))m[R]=d[R](Q,B);else throw new Error("Config merge conflict for field "+R)}for(let k in a)m[k]===void 0&&(m[k]=a[k]);return m}class qt{eq(a){return this==a}range(a,d=a){return _t.create(a,d,this)}}qt.prototype.startSide=qt.prototype.endSide=0,qt.prototype.point=!1,qt.prototype.mapMode=$t.TrackDel;class _t{constructor(a,d,m){this.from=a,this.to=d,this.value=m}static create(a,d,m){return new _t(a,d,m)}}function rt(D,a){return D.from-a.from||D.value.startSide-a.value.startSide}class Vt{constructor(a,d,m,k){this.from=a,this.to=d,this.value=m,this.maxPoint=k}get length(){return this.to[this.to.length-1]}findIndex(a,d,m,k=0){let R=m?this.to:this.from;for(let B=k,Q=R.length;;){if(B==Q)return B;let q=B+Q>>1,de=R[q]-a||(m?this.value[q].endSide:this.value[q].startSide)-d;if(q==B)return de>=0?B:Q;de>=0?Q=q:B=q+1}}between(a,d,m,k){for(let R=this.findIndex(d,-1e9,!0),B=this.findIndex(m,1e9,!1,R);R<B;R++)if(k(this.from[R]+a,this.to[R]+a,this.value[R])===!1)return!1}map(a,d){let m=[],k=[],R=[],B=-1,Q=-1;for(let q=0;q<this.value.length;q++){let de=this.value[q],Se=this.from[q]+a,Ie=this.to[q]+a,ot,_e;if(Se==Ie){let ei=d.mapPos(Se,de.startSide,de.mapMode);if(ei==null||(ot=_e=ei,de.startSide!=de.endSide&&(_e=d.mapPos(Se,de.endSide),_e<ot)))continue}else if(ot=d.mapPos(Se,de.startSide),_e=d.mapPos(Ie,de.endSide),ot>_e||ot==_e&&de.startSide>0&&de.endSide<=0)continue;(_e-ot||de.endSide-de.startSide)<0||(B<0&&(B=ot),de.point&&(Q=Math.max(Q,_e-ot)),m.push(de),k.push(ot-B),R.push(_e-B))}return{mapped:m.length?new Vt(k,R,m,Q):null,pos:B}}}class Nt{constructor(a,d,m,k){this.chunkPos=a,this.chunk=d,this.nextLayer=m,this.maxPoint=k}static create(a,d,m,k){return new Nt(a,d,m,k)}get length(){let a=this.chunk.length-1;return a<0?0:Math.max(this.chunkEnd(a),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let a=this.nextLayer.size;for(let d of this.chunk)a+=d.value.length;return a}chunkEnd(a){return this.chunkPos[a]+this.chunk[a].length}update(a){let{add:d=[],sort:m=!1,filterFrom:k=0,filterTo:R=this.length}=a,B=a.filter;if(d.length==0&&!B)return this;if(m&&(d=d.slice().sort(rt)),this.isEmpty)return d.length?Nt.of(d):this;let Q=new I(this,null,-1).goto(0),q=0,de=[],Se=new hi;for(;Q.value||q<d.length;)if(q<d.length&&(Q.from-d[q].from||Q.startSide-d[q].value.startSide)>=0){let Ie=d[q++];Se.addInner(Ie.from,Ie.to,Ie.value)||de.push(Ie)}else Q.rangeIndex==1&&Q.chunkIndex<this.chunk.length&&(q==d.length||this.chunkEnd(Q.chunkIndex)<d[q].from)&&(!B||k>this.chunkEnd(Q.chunkIndex)||R<this.chunkPos[Q.chunkIndex])&&Se.addChunk(this.chunkPos[Q.chunkIndex],this.chunk[Q.chunkIndex])?Q.nextChunk():((!B||k>Q.to||R<Q.from||B(Q.from,Q.to,Q.value))&&(Se.addInner(Q.from,Q.to,Q.value)||de.push(_t.create(Q.from,Q.to,Q.value))),Q.next());return Se.finishInner(this.nextLayer.isEmpty&&!de.length?Nt.empty:this.nextLayer.update({add:de,filter:B,filterFrom:k,filterTo:R}))}map(a){if(a.empty||this.isEmpty)return this;let d=[],m=[],k=-1;for(let B=0;B<this.chunk.length;B++){let Q=this.chunkPos[B],q=this.chunk[B],de=a.touchesRange(Q,Q+q.length);if(de===!1)k=Math.max(k,q.maxPoint),d.push(q),m.push(a.mapPos(Q));else if(de===!0){let{mapped:Se,pos:Ie}=q.map(Q,a);Se&&(k=Math.max(k,Se.maxPoint),d.push(Se),m.push(Ie))}}let R=this.nextLayer.map(a);return d.length==0?R:new Nt(m,d,R||Nt.empty,k)}between(a,d,m){if(!this.isEmpty){for(let k=0;k<this.chunk.length;k++){let R=this.chunkPos[k],B=this.chunk[k];if(d>=R&&a<=R+B.length&&B.between(R,a-R,d-R,m)===!1)return}this.nextLayer.between(a,d,m)}}iter(a=0){return y.from([this]).goto(a)}get isEmpty(){return this.nextLayer==this}static iter(a,d=0){return y.from(a).goto(d)}static compare(a,d,m,k,R=-1){let B=a.filter(Ie=>Ie.maxPoint>0||!Ie.isEmpty&&Ie.maxPoint>=R),Q=d.filter(Ie=>Ie.maxPoint>0||!Ie.isEmpty&&Ie.maxPoint>=R),q=mi(B,Q,m),de=new N(B,q,R),Se=new N(Q,q,R);m.iterGaps((Ie,ot,_e)=>U(de,Ie,Se,ot,_e,k)),m.empty&&m.length==0&&U(de,0,Se,0,0,k)}static eq(a,d,m=0,k){k==null&&(k=999999999);let R=a.filter(Se=>!Se.isEmpty&&d.indexOf(Se)<0),B=d.filter(Se=>!Se.isEmpty&&a.indexOf(Se)<0);if(R.length!=B.length)return!1;if(!R.length)return!0;let Q=mi(R,B),q=new N(R,Q,0).goto(m),de=new N(B,Q,0).goto(m);for(;;){if(q.to!=de.to||!ne(q.active,de.active)||q.point&&(!de.point||!q.point.eq(de.point)))return!1;if(q.to>k)return!0;q.next(),de.next()}}static spans(a,d,m,k,R=-1){let B=new N(a,null,R).goto(d),Q=d,q=B.openStart;for(;;){let de=Math.min(B.to,m);if(B.point){let Se=B.activeForPoint(B.to),Ie=B.pointFrom<d?Se.length+1:B.point.startSide<0?Se.length:Math.min(Se.length,q);k.point(Q,de,B.point,Se,Ie,B.pointRank),q=Math.min(B.openEnd(de),Se.length)}else de>Q&&(k.span(Q,de,B.active,q),q=B.openEnd(de));if(B.to>m)return q+(B.point&&B.to>m?1:0);Q=B.to,B.next()}}static of(a,d=!1){let m=new hi;for(let k of a instanceof _t?[a]:d?fi(a):a)m.add(k.from,k.to,k.value);return m.finish()}static join(a){if(!a.length)return Nt.empty;let d=a[a.length-1];for(let m=a.length-2;m>=0;m--)for(let k=a[m];k!=Nt.empty;k=k.nextLayer)d=new Nt(k.chunkPos,k.chunk,d,Math.max(k.maxPoint,d.maxPoint));return d}}Nt.empty=new Nt([],[],null,-1);function fi(D){if(D.length>1)for(let a=D[0],d=1;d<D.length;d++){let m=D[d];if(rt(a,m)>0)return D.slice().sort(rt);a=m}return D}Nt.empty.nextLayer=Nt.empty;class hi{finishChunk(a){this.chunks.push(new Vt(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,a&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(a,d,m){this.addInner(a,d,m)||(this.nextLayer||(this.nextLayer=new hi)).add(a,d,m)}addInner(a,d,m){let k=a-this.lastTo||m.startSide-this.last.endSide;if(k<=0&&(a-this.lastFrom||m.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return k<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=a),this.from.push(a-this.chunkStart),this.to.push(d-this.chunkStart),this.last=m,this.lastFrom=a,this.lastTo=d,this.value.push(m),m.point&&(this.maxPoint=Math.max(this.maxPoint,d-a)),!0)}addChunk(a,d){if((a-this.lastTo||d.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,d.maxPoint),this.chunks.push(d),this.chunkPos.push(a);let m=d.value.length-1;return this.last=d.value[m],this.lastFrom=d.from[m]+a,this.lastTo=d.to[m]+a,!0}finish(){return this.finishInner(Nt.empty)}finishInner(a){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return a;let d=Nt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(a):a,this.setMaxPoint);return this.from=null,d}}function mi(D,a,d){let m=new Map;for(let R of D)for(let B=0;B<R.chunk.length;B++)R.chunk[B].maxPoint<=0&&m.set(R.chunk[B],R.chunkPos[B]);let k=new Set;for(let R of a)for(let B=0;B<R.chunk.length;B++){let Q=m.get(R.chunk[B]);Q!=null&&(d?d.mapPos(Q):Q)==R.chunkPos[B]&&!(d!=null&&d.touchesRange(Q,Q+R.chunk[B].length))&&k.add(R.chunk[B])}return k}class I{constructor(a,d,m,k=0){this.layer=a,this.skip=d,this.minPoint=m,this.rank=k}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(a,d=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(a,d,!1),this}gotoInner(a,d,m){for(;this.chunkIndex<this.layer.chunk.length;){let k=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(k)||this.layer.chunkEnd(this.chunkIndex)<a||k.maxPoint<this.minPoint))break;this.chunkIndex++,m=!1}if(this.chunkIndex<this.layer.chunk.length){let k=this.layer.chunk[this.chunkIndex].findIndex(a-this.layer.chunkPos[this.chunkIndex],d,!0);(!m||this.rangeIndex<k)&&this.setRangeIndex(k)}this.next()}forward(a,d){(this.to-a||this.endSide-d)<0&&this.gotoInner(a,d,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let a=this.layer.chunkPos[this.chunkIndex],d=this.layer.chunk[this.chunkIndex],m=a+d.from[this.rangeIndex];if(this.from=m,this.to=a+d.to[this.rangeIndex],this.value=d.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(a){if(a==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=a}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(a){return this.from-a.from||this.startSide-a.startSide||this.rank-a.rank||this.to-a.to||this.endSide-a.endSide}}class y{constructor(a){this.heap=a}static from(a,d=null,m=-1){let k=[];for(let R=0;R<a.length;R++)for(let B=a[R];!B.isEmpty;B=B.nextLayer)B.maxPoint>=m&&k.push(new I(B,d,m,R));return k.length==1?k[0]:new y(k)}get startSide(){return this.value?this.value.startSide:0}goto(a,d=-1e9){for(let m of this.heap)m.goto(a,d);for(let m=this.heap.length>>1;m>=0;m--)P(this.heap,m);return this.next(),this}forward(a,d){for(let m of this.heap)m.forward(a,d);for(let m=this.heap.length>>1;m>=0;m--)P(this.heap,m);(this.to-a||this.value.endSide-d)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let a=this.heap[0];this.from=a.from,this.to=a.to,this.value=a.value,this.rank=a.rank,a.value&&a.next(),P(this.heap,0)}}}function P(D,a){for(let d=D[a];;){let m=(a<<1)+1;if(m>=D.length)break;let k=D[m];if(m+1<D.length&&k.compare(D[m+1])>=0&&(k=D[m+1],m++),d.compare(k)<0)break;D[m]=d,D[a]=k,a=m}}class N{constructor(a,d,m){this.minPoint=m,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=y.from(a,d,m)}goto(a,d=-1e9){return this.cursor.goto(a,d),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=a,this.endSide=d,this.openStart=-1,this.next(),this}forward(a,d){for(;this.minActive>-1&&(this.activeTo[this.minActive]-a||this.active[this.minActive].endSide-d)<0;)this.removeActive(this.minActive);this.cursor.forward(a,d)}removeActive(a){J(this.active,a),J(this.activeTo,a),J(this.activeRank,a),this.minActive=Je(this.active,this.activeTo)}addActive(a){let d=0,{value:m,to:k,rank:R}=this.cursor;for(;d<this.activeRank.length&&(R-this.activeRank[d]||k-this.activeTo[d])>0;)d++;he(this.active,d,m),he(this.activeTo,d,k),he(this.activeRank,d,R),a&&he(a,d,this.cursor.from),this.minActive=Je(this.active,this.activeTo)}next(){let a=this.to,d=this.point;this.point=null;let m=this.openStart<0?[]:null;for(;;){let k=this.minActive;if(k>-1&&(this.activeTo[k]-this.cursor.from||this.active[k].endSide-this.cursor.startSide)<0){if(this.activeTo[k]>a){this.to=this.activeTo[k],this.endSide=this.active[k].endSide;break}this.removeActive(k),m&&J(m,k)}else if(this.cursor.value)if(this.cursor.from>a){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let R=this.cursor.value;if(!R.point)this.addActive(m),this.cursor.next();else if(d&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=R,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=R.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(m){this.openStart=0;for(let k=m.length-1;k>=0&&m[k]<a;k--)this.openStart++}}activeForPoint(a){if(!this.active.length)return this.active;let d=[];for(let m=this.active.length-1;m>=0&&!(this.activeRank[m]<this.pointRank);m--)(this.activeTo[m]>a||this.activeTo[m]==a&&this.active[m].endSide>=this.point.endSide)&&d.push(this.active[m]);return d.reverse()}openEnd(a){let d=0;for(let m=this.activeTo.length-1;m>=0&&this.activeTo[m]>a;m--)d++;return d}}function U(D,a,d,m,k,R){D.goto(a),d.goto(m);let B=m+k,Q=m,q=m-a;for(;;){let de=D.to+q-d.to||D.endSide-d.endSide,Se=de<0?D.to+q:d.to,Ie=Math.min(Se,B);if(D.point||d.point?D.point&&d.point&&(D.point==d.point||D.point.eq(d.point))&&ne(D.activeForPoint(D.to),d.activeForPoint(d.to))||R.comparePoint(Q,Ie,D.point,d.point):Ie>Q&&!ne(D.active,d.active)&&R.compareRange(Q,Ie,D.active,d.active),Se>B)break;Q=Se,de<=0&&D.next(),de>=0&&d.next()}}function ne(D,a){if(D.length!=a.length)return!1;for(let d=0;d<D.length;d++)if(D[d]!=a[d]&&!D[d].eq(a[d]))return!1;return!0}function J(D,a){for(let d=a,m=D.length-1;d<m;d++)D[d]=D[d+1];D.pop()}function he(D,a,d){for(let m=D.length-1;m>=a;m--)D[m+1]=D[m];D[a]=d}function Je(D,a){let d=-1,m=1e9;for(let k=0;k<a.length;k++)(a[k]-m||D[k].endSide-D[d].endSide)<0&&(d=k,m=a[k]);return d}function Ze(D,a,d=D.length){let m=0;for(let k=0;k<d;)D.charCodeAt(k)==9?(m+=a-m%a,k++):(m++,k=ft(D,k));return m}function Kt(D,a,d,m){for(let k=0,R=0;;){if(R>=a)return k;if(k==D.length)break;R+=D.charCodeAt(k)==9?d-R%d:1,k=ft(D,k)}return m===!0?-1:D.length}},75533:function(Di,ti,pe){pe.d(ti,{p:function(){return Ge},Nm:function(){return rt},tk:function(){return Jt},SJ:function(){return li},lg:function(){return di},l9:function(){return Qe},S2:function(){return sl},Uw:function(){return Uo},qr:function(){return Gn},Sd:function(){return go},gB:function(){return Rl},v5:function(){return mo},ZO:function(){return il},HQ:function(){return gl},AE:function(){return Cl},bF:function(){return Dl},$f:function(){return Ur},Eu:function(){return Ts},OO:function(){return Ai},W$:function(){return Kn},Zs:function(){return lo},$1:function(){return nr},mH:function(){return Cs},hJ:function(){return ws}});for(var E=pe(78120),ae=pe(28699),xe={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},z={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ce=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),Ke=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Re=0;Re<10;Re++)xe[48+Re]=xe[96+Re]=String(Re);for(var Re=1;Re<=24;Re++)xe[Re+111]="F"+Re;for(var Re=65;Re<=90;Re++)xe[Re]=String.fromCharCode(Re+32),z[Re]=String.fromCharCode(Re);for(var jt in xe)z.hasOwnProperty(jt)||(z[jt]=xe[jt]);function it(o){var e=ce&&o.metaKey&&o.shiftKey&&!o.ctrlKey&&!o.altKey||Ke&&o.shiftKey&&o.key&&o.key.length==1||o.key=="Unidentified",t=!e&&o.key||(o.shiftKey?z:xe)[o.keyCode]||o.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function nt(o){let e;return o.nodeType==11?e=o.getSelection?o:o.ownerDocument:e=o,e.getSelection()}function Xe(o,e){return e?o==e||o.contains(e.nodeType!=1?e.parentNode:e):!1}function lt(o){let e=o.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function Ee(o,e){if(!e.anchorNode)return!1;try{return Xe(o,e.anchorNode)}catch(t){return!1}}function ct(o){return o.nodeType==3?Me(o,0,o.nodeValue.length).getClientRects():o.nodeType==1?o.getClientRects():[]}function vt(o,e,t,n){return t?kt(o,e,t,n,-1)||kt(o,e,t,n,1):!1}function ft(o){for(var e=0;;e++)if(o=o.previousSibling,!o)return e}function ue(o){return o.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(o.nodeName)}function kt(o,e,t,n,s){for(;;){if(o==t&&e==n)return!0;if(e==(s<0?0:Ot(o))){if(o.nodeName=="DIV")return!1;let h=o.parentNode;if(!h||h.nodeType!=1)return!1;e=ft(o)+(s<0?0:1),o=h}else if(o.nodeType==1){if(o=o.childNodes[e+(s<0?-1:0)],o.nodeType==1&&o.contentEditable=="false")return!1;e=s<0?Ot(o):0}else return!1}}function Ot(o){return o.nodeType==3?o.nodeValue.length:o.childNodes.length}function Qt(o,e){let t=e?o.left:o.right;return{left:t,right:t,top:o.top,bottom:o.bottom}}function Ut(o){let e=o.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:o.innerWidth,top:0,bottom:o.innerHeight}}function Pt(o,e){let t=e.width/o.offsetWidth,n=e.height/o.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-o.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-o.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function Dt(o,e,t,n,s,h,u,b){let v=o.ownerDocument,A=v.defaultView||window;for(let O=o,V=!1;O&&!V;)if(O.nodeType==1){let X,te=O==v.body,re=1,me=1;if(te)X=Ut(A);else{if(/^(fixed|sticky)$/.test(getComputedStyle(O).position)&&(V=!0),O.scrollHeight<=O.clientHeight&&O.scrollWidth<=O.clientWidth){O=O.assignedSlot||O.parentNode;continue}let bt=O.getBoundingClientRect();({scaleX:re,scaleY:me}=Pt(O,bt)),X={left:bt.left,right:bt.left+O.clientWidth*re,top:bt.top,bottom:bt.top+O.clientHeight*me}}let fe=0,Ae=0;if(s=="nearest")e.top<X.top?(Ae=-(X.top-e.top+u),t>0&&e.bottom>X.bottom+Ae&&(Ae=e.bottom-X.bottom+Ae+u)):e.bottom>X.bottom&&(Ae=e.bottom-X.bottom+u,t<0&&e.top-Ae<X.top&&(Ae=-(X.top+Ae-e.top+u)));else{let bt=e.bottom-e.top,Lt=X.bottom-X.top;Ae=(s=="center"&&bt<=Lt?e.top+bt/2-Lt/2:s=="start"||s=="center"&&t<0?e.top-u:e.bottom-Lt+u)-X.top}if(n=="nearest"?e.left<X.left?(fe=-(X.left-e.left+h),t>0&&e.right>X.right+fe&&(fe=e.right-X.right+fe+h)):e.right>X.right&&(fe=e.right-X.right+h,t<0&&e.left<X.left+fe&&(fe=-(X.left+fe-e.left+h))):fe=(n=="center"?e.left+(e.right-e.left)/2-(X.right-X.left)/2:n=="start"==b?e.left-h:e.right-(X.right-X.left)+h)-X.left,fe||Ae)if(te)A.scrollBy(fe,Ae);else{let bt=0,Lt=0;if(Ae){let ut=O.scrollTop;O.scrollTop+=Ae/me,Lt=(O.scrollTop-ut)*me}if(fe){let ut=O.scrollLeft;O.scrollLeft+=fe/re,bt=(O.scrollLeft-ut)*re}e={left:e.left-bt,top:e.top-Lt,right:e.right-bt,bottom:e.bottom-Lt},bt&&Math.abs(bt-fe)<1&&(n="nearest"),Lt&&Math.abs(Lt-Ae)<1&&(s="nearest")}if(te)break;O=O.assignedSlot||O.parentNode}else if(O.nodeType==11)O=O.host;else break}function Gt(o){let e=o.ownerDocument;for(let t=o.parentNode;t&&t!=e.body;)if(t.nodeType==1){if(t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)return t;t=t.assignedSlot||t.parentNode}else if(t.nodeType==11)t=t.host;else break;return null}class $t{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Ot(t):0),n,Math.min(e.focusOffset,n?Ot(n):0))}set(e,t,n,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=s}}let at=null;function Le(o){if(o.setActive)return o.setActive();if(at)return o.focus(at);let e=[];for(let t=o;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(o.focus(at==null?{get preventScroll(){return at={preventScroll:!0},!0}}:void 0),!at){at=!1;for(let t=0;t<e.length;){let n=e[t++],s=e[t++],h=e[t++];n.scrollTop!=s&&(n.scrollTop=s),n.scrollLeft!=h&&(n.scrollLeft=h)}}}let He;function Me(o,e,t=e){let n=He||(He=document.createRange());return n.setEnd(o,t),n.setStart(o,e),n}function ke(o,e,t,n){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=n);let h=new KeyboardEvent("keydown",s);h.synthetic=!0,o.dispatchEvent(h);let u=new KeyboardEvent("keyup",s);return u.synthetic=!0,o.dispatchEvent(u),h.defaultPrevented||u.defaultPrevented}function Ne(o){for(;o;){if(o&&(o.nodeType==9||o.nodeType==11&&o.host))return o;o=o.assignedSlot||o.parentNode}return null}function K(o){for(;o.attributes.length;)o.removeAttributeNode(o.attributes[0])}function $e(o,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Ot(t));;)if(n){if(t.nodeType!=1)return!1;let s=t.childNodes[n-1];s.contentEditable=="false"?n--:(t=s,n=Ot(t))}else{if(t==o)return!0;n=ft(t),t=t.parentNode}}function Fe(o){return o.scrollTop>Math.max(1,o.scrollHeight-o.clientHeight-4)}function ee(o,e){for(let t=o,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=Ot(t)}else if(t.parentNode&&!ue(t))n=ft(t),t=t.parentNode;else return null}}function ge(o,e){for(let t=o,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!ue(t))n=ft(t)+1,t=t.parentNode;else return null}}class Ce{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Ce(e.parentNode,ft(e),t)}static after(e,t){return new Ce(e.parentNode,ft(e)+1,t)}}const Oe=[];class De{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,s=null,h;for(let u of this.children){if(u.flags&7){if(!u.dom&&(h=s?s.nextSibling:n.firstChild)){let b=De.get(h);(!b||!b.parent&&b.canReuseDOM(u))&&u.reuseDOM(h)}u.sync(e,t),u.flags&=-8}if(h=s?s.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&h!=u.dom&&(t.written=!0),u.dom.parentNode==n)for(;h&&h!=u.dom;)h=dt(h);else n.insertBefore(u.dom,h);s=u.dom}for(h=s?s.nextSibling:n.firstChild,h&&t&&t.node==n&&(t.written=!0);h;)h=dt(h)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let s=Ot(e)==0?0:t==0?-1:1;for(;;){let h=e.parentNode;if(h==this.dom)break;s==0&&h.firstChild!=h.lastChild&&(e==h.firstChild?s=-1:s=1),e=h}s<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!De.get(n);)n=n.nextSibling;if(!n)return this.length;for(let s=0,h=0;;s++){let u=this.children[s];if(u.dom==n)return h;h+=u.length+u.breakAfter}}domBoundsAround(e,t,n=0){let s=-1,h=-1,u=-1,b=-1;for(let v=0,A=n,O=n;v<this.children.length;v++){let V=this.children[v],X=A+V.length;if(A<e&&X>t)return V.domBoundsAround(e,t,A);if(X>=e&&s==-1&&(s=v,h=A),A>t&&V.dom.parentNode==this.dom){u=v,b=O;break}O=X,A=X+V.breakAfter}return{from:h,to:b<0?n+this.length:b,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:u<this.children.length&&u>=0?this.children[u].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Oe){this.markDirty();for(let s=e;s<t;s++){let h=this.children[s];h.parent==this&&n.indexOf(h)<0&&h.destroy()}this.children.splice(e,t-e,...n);for(let s=0;s<n.length;s++)n[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Ye(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,s,h,u){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}De.prototype.breakAfter=0;function dt(o){let e=o.nextSibling;return o.parentNode.removeChild(o),e}class Ye{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function xt(o,e,t,n,s,h,u,b,v){let{children:A}=o,O=A.length?A[e]:null,V=h.length?h[h.length-1]:null,X=V?V.breakAfter:u;if(!(e==n&&O&&!u&&!X&&h.length<2&&O.merge(t,s,h.length?V:null,t==0,b,v))){if(n<A.length){let te=A[n];te&&(s<te.length||te.breakAfter&&(V!=null&&V.breakAfter))?(e==n&&(te=te.split(s),s=0),!X&&V&&te.merge(0,s,V,!0,0,v)?h[h.length-1]=te:((s||te.children.length&&!te.children[0].length)&&te.merge(0,s,null,!1,0,v),h.push(te))):te!=null&&te.breakAfter&&(V?V.breakAfter=1:u=1),n++}for(O&&(O.breakAfter=u,t>0&&(!u&&h.length&&O.merge(t,O.length,h[0],!1,b,0)?O.breakAfter=h.shift().breakAfter:(t<O.length||O.children.length&&O.children[O.children.length-1].length==0)&&O.merge(t,O.length,null,!1,b,0),e++));e<n&&h.length;)if(A[n-1].become(h[h.length-1]))n--,h.pop(),v=h.length?0:b;else if(A[e].become(h[0]))e++,h.shift(),b=h.length?0:v;else break;!h.length&&e&&n<A.length&&!A[e-1].breakAfter&&A[n].merge(0,0,A[e-1],!1,b,v)&&e--,(e<n||h.length)&&o.replaceChildren(e,n,h)}}function pt(o,e,t,n,s,h){let u=o.childCursor(),{i:b,off:v}=u.findPos(t,1),{i:A,off:O}=u.findPos(e,-1),V=e-t;for(let X of n)V+=X.length;o.length+=V,xt(o,A,O,b,v,n,0,s,h)}let Rt=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},It=typeof document!="undefined"?document:{documentElement:{style:{}}};const Et=/Edge\/(\d+)/.exec(Rt.userAgent),Mt=/MSIE \d/.test(Rt.userAgent),ii=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rt.userAgent),oi=!!(Mt||ii||Et),oe=!oi&&/gecko\/(\d+)/i.test(Rt.userAgent),x=!oi&&/Chrome\/(\d+)/.exec(Rt.userAgent),M="webkitFontSmoothing"in It.documentElement.style,F=!oi&&/Apple Computer/.test(Rt.vendor),j=F&&(/Mobile\/\w+/.test(Rt.userAgent)||Rt.maxTouchPoints>2);var $={mac:j||/Mac/.test(Rt.platform),windows:/Win/.test(Rt.platform),linux:/Linux|X11/.test(Rt.platform),ie:oi,ie_version:Mt?It.documentMode||6:ii?+ii[1]:Et?+Et[1]:0,gecko:oe,gecko_version:oe?+(/Firefox\/(\d+)/.exec(Rt.userAgent)||[0,0])[1]:0,chrome:!!x,chrome_version:x?+x[1]:0,ios:j,android:/Android\b/.test(Rt.userAgent),webkit:M,safari:F,webkit_version:M?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:It.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const se=256;class le extends De{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof le)||this.length-(t-e)+n.length>se||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new le(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Ce(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return et(this.dom,e,t)}}class Be extends De{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let s of t)s.setParent(this)}setAttrs(e){if(K(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,s,h,u){return n&&(!(n instanceof Be&&n.mark.eq(this.mark))||e&&h<=0||t<this.length&&u<=0)?!1:(pt(this,e,t,n?n.children.slice():[],h-1,u-1),this.markDirty(),!0)}split(e){let t=[],n=0,s=-1,h=0;for(let b of this.children){let v=n+b.length;v>e&&t.push(n<e?b.split(e-n):b),s<0&&n>=e&&(s=h),n=v,h++}let u=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Be(this.mark,t,u)}domAtPos(e){return Pe(this,e)}coordsAt(e,t){return Te(this,e,t)}}function et(o,e,t){let n=o.nodeValue.length;e>n&&(e=n);let s=e,h=e,u=0;e==0&&t<0||e==n&&t>=0?$.chrome||$.gecko||(e?(s--,u=1):h<n&&(h++,u=-1)):t<0?s--:h<n&&h++;let b=Me(o,s,h).getClientRects();if(!b.length)return null;let v=b[(u?u<0:t>=0)?0:b.length-1];return $.safari&&!u&&v.width==0&&(v=Array.prototype.find.call(b,A=>A.width)||v),u?Qt(v,u<0):v||null}class We extends De{static create(e,t,n){return new We(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=We.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,s,h,u){return n&&(!(n instanceof We)||!this.widget.compare(n.widget)||e>0&&h<=0||t<this.length&&u<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof We&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return E.xv.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,s=this.posAtStart;return n?n.slice(s,s+this.length):E.xv.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Ce.before(this.dom):Ce.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let s=this.dom.getClientRects(),h=null;if(!s.length)return null;let u=this.side?this.side<0:e>0;for(let b=u?s.length-1:0;h=s[b],!(e>0?b==0:b==s.length-1||h.top<h.bottom);b+=u?-1:1);return Qt(h,!u)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _ extends De{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof _&&e.side==this.side}split(){return new _(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Ce.before(this.dom):Ce.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return E.xv.empty}get isHidden(){return!0}}le.prototype.children=We.prototype.children=_.prototype.children=Oe;function Pe(o,e){let t=o.dom,{children:n}=o,s=0;for(let h=0;s<n.length;s++){let u=n[s],b=h+u.length;if(!(b==h&&u.getSide()<=0)){if(e>h&&e<b&&u.dom.parentNode==t)return u.domAtPos(e-h);if(e<=h)break;h=b}}for(let h=s;h>0;h--){let u=n[h-1];if(u.dom.parentNode==t)return u.domAtPos(u.length)}for(let h=s;h<n.length;h++){let u=n[h];if(u.dom.parentNode==t)return u.domAtPos(0)}return new Ce(t,0)}function ye(o,e,t){let n,{children:s}=o;t>0&&e instanceof Be&&s.length&&(n=s[s.length-1])instanceof Be&&n.mark.eq(e.mark)?ye(n,e.children[0],t-1):(s.push(e),e.setParent(o)),o.length+=e.length}function Te(o,e,t){let n=null,s=-1,h=null,u=-1;function b(A,O){for(let V=0,X=0;V<A.children.length&&X<=O;V++){let te=A.children[V],re=X+te.length;re>=O&&(te.children.length?b(te,O-X):(!h||h.isHidden&&t>0)&&(re>O||X==re&&te.getSide()>0)?(h=te,u=O-X):(X<O||X==re&&te.getSide()<0&&!te.isHidden)&&(n=te,s=O-X)),X=re}}b(o,e);let v=(t<0?n:h)||n||h;return v?v.coordsAt(Math.max(0,v==n?s:u),t):je(o)}function je(o){let e=o.dom.lastChild;if(!e)return o.dom.getBoundingClientRect();let t=ct(e);return t[t.length-1]||null}function Ve(o,e){for(let t in o)t=="class"&&e.class?e.class+=" "+o.class:t=="style"&&e.style?e.style+=";"+o.style:e[t]=o[t];return e}const ht=Object.create(null);function wt(o,e,t){if(o==e)return!0;o||(o=ht),e||(e=ht);let n=Object.keys(o),s=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let h of n)if(h!=t&&(s.indexOf(h)==-1||o[h]!==e[h]))return!1;return!0}function gt(o,e,t){let n=!1;if(e)for(let s in e)t&&s in t||(n=!0,s=="style"?o.style.cssText="":o.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(n=!0,s=="style"?o.style.cssText=t[s]:o.setAttribute(s,t[s]));return n}function Ft(o){let e=Object.create(null);for(let t=0;t<o.attributes.length;t++){let n=o.attributes[t];e[n.name]=n.value}return e}class ze extends De{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,s,h,u){if(n){if(!(n instanceof ze))return!1;this.dom||n.transferDOM(this)}return s&&this.setDeco(n?n.attrs:null),pt(this,e,t,n?n.children.slice():[],h,u),!0}split(e){let t=new ze;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:s}=this.childPos(e);s&&(t.append(this.children[n].split(s),0),this.children[n].merge(s,this.children[n].length,null,!1,0,0),n++);for(let h=n;h<this.children.length;h++)t.append(this.children[h],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wt(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ye(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Ve(t,this.attrs||{})),n&&(this.attrs=Ve({class:n},this.attrs||{}))}domAtPos(e){return Pe(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(K(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(gt(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&De.get(s)instanceof Be;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((n=De.get(s))===null||n===void 0?void 0:n.isEditable)==!1&&(!$.ios||!this.children.some(h=>h instanceof le))){let h=document.createElement("BR");h.cmIgnore=!0,this.dom.appendChild(h)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof le)||/[^ -~]/.test(n.text))return null;let s=ct(n.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=Te(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:s}=this.parent.view.viewState,h=n.bottom-n.top;if(Math.abs(h-s.lineHeight)<2&&s.textHeight<h){let u=(h-s.textHeight)/2;return{top:n.top+u,bottom:n.bottom-u,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,s=0;n<e.children.length;n++){let h=e.children[n],u=s+h.length;if(u>=t){if(h instanceof ze)return h;if(u>t)break}s=u+h.breakAfter}return null}}class Tt extends De{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,s,h,u){return n&&(!(n instanceof Tt)||!this.widget.compare(n.widget)||e>0&&h<=0||t<this.length&&u<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Ce.before(this.dom):Ce.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new Tt(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Oe}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):E.xv.empty}domBoundsAround(){return null}become(e){return e instanceof Tt&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class Qe{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ct=function(o){return o[o.Text=0]="Text",o[o.WidgetBefore=1]="WidgetBefore",o[o.WidgetAfter=2]="WidgetAfter",o[o.WidgetRange=3]="WidgetRange",o}(Ct||(Ct={}));class Ge extends E.uU{constructor(e,t,n,s){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=s}get heightRelevant(){return!1}static mark(e){return new tt(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new st(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,s;if(e.isBlockGap)n=-5e8,s=4e8;else{let{start:h,end:u}=zt(e,t);n=(h?t?-3e8:-1:5e8)-1,s=(u?t?2e8:1:-6e8)+1}return new st(e,n,s,t,e.widget||null,!0)}static line(e){return new mt(e)}static set(e,t=!1){return E.Xs.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ge.none=E.Xs.empty;class tt extends Ge{constructor(e){let{start:t,end:n}=zt(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof tt&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&wt(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}tt.prototype.point=!1;class mt extends Ge{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof mt&&this.spec.class==e.spec.class&&wt(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}mt.prototype.mapMode=E.gc.TrackBefore,mt.prototype.point=!0;class st extends Ge{constructor(e,t,n,s,h,u){super(t,n,h,e),this.block=s,this.isReplace=u,this.mapMode=s?t<=0?E.gc.TrackBefore:E.gc.TrackAfter:E.gc.TrackDel}get type(){return this.startSide!=this.endSide?Ct.WidgetRange:this.startSide<=0?Ct.WidgetBefore:Ct.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof st&&Ht(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}st.prototype.point=!0;function zt(o,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=o;return t==null&&(t=o.inclusive),n==null&&(n=o.inclusive),{start:t!=null?t:e,end:n!=null?n:e}}function Ht(o,e){return o==e||!!(o&&e&&o.compare(e))}function St(o,e,t,n=0){let s=t.length-1;s>=0&&t[s]+n>=o?t[s]=Math.max(t[s],e):t.push(o,e)}class si{constructor(e,t,n,s){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Tt&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ze),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(qt(new _(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Tt)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:h,lineBreak:u,done:b}=this.cursor.next(this.skip);if(this.skip=0,b)throw new Error("Ran out of text content when drawing inline views");if(u){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=h,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(qt(new le(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}}span(e,t,n,s){this.buildText(t-e,n,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,n,s,h,u){if(this.disallowBlockEffectsFor[u]&&n instanceof st){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let b=t-e;if(n instanceof st)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Tt(n.widget||_t.block,b,n));else{let v=We.create(n.widget||_t.inline,b,b?0:n.startSide),A=this.atCursorPos&&!v.isEditable&&h<=s.length&&(e<t||n.startSide>0),O=!v.isEditable&&(e<t||h>s.length||n.startSide<=0),V=this.getLine();this.pendingBuffer==2&&!A&&!v.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),A&&(V.append(qt(new _(1),s),h),h=s.length+Math.max(0,h-s.length)),V.append(qt(v,s),h),this.atCursorPos=O,this.pendingBuffer=O?e<t||h>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);b&&(this.textOff+b<=this.text.length?this.textOff+=b:(this.skip+=b-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=h)}static build(e,t,n,s,h){let u=new si(e,t,n,h);return u.openEnd=E.Xs.spans(s,t,n,u),u.openStart<0&&(u.openStart=u.openEnd),u.finish(u.openEnd),u}}function qt(o,e){for(let t of e)o=new Be(t,[o],o.length);return o}class _t extends Qe{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}_t.inline=new _t("span"),_t.block=new _t("div");var rt=function(o){return o[o.LTR=0]="LTR",o[o.RTL=1]="RTL",o}(rt||(rt={}));const Vt=rt.LTR,Nt=rt.RTL;function fi(o){let e=[];for(let t=0;t<o.length;t++)e.push(1<<+o[t]);return e}const hi=fi("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),mi=fi("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),I=Object.create(null),y=[];for(let o of["()","[]","{}"]){let e=o.charCodeAt(0),t=o.charCodeAt(1);I[e]=t,I[t]=-e}function P(o){return o<=247?hi[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?mi[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1}const N=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class U{get dir(){return this.level%2?Nt:Vt}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,s){let h=-1;for(let u=0;u<e.length;u++){let b=e[u];if(b.from<=t&&b.to>=t){if(b.level==n)return u;(h<0||(s!=0?s<0?b.from<t:b.to>t:e[h].level>b.level))&&(h=u)}}if(h<0)throw new RangeError("Index out of range");return h}}function ne(o,e){if(o.length!=e.length)return!1;for(let t=0;t<o.length;t++){let n=o[t],s=e[t];if(n.from!=s.from||n.to!=s.to||n.direction!=s.direction||!ne(n.inner,s.inner))return!1}return!0}const J=[];function he(o,e,t,n,s){for(let h=0;h<=n.length;h++){let u=h?n[h-1].to:e,b=h<n.length?n[h].from:t,v=h?256:s;for(let A=u,O=v,V=v;A<b;A++){let X=P(o.charCodeAt(A));X==512?X=O:X==8&&V==4&&(X=16),J[A]=X==4?2:X,X&7&&(V=X),O=X}for(let A=u,O=v,V=v;A<b;A++){let X=J[A];if(X==128)A<b-1&&O==J[A+1]&&O&24?X=J[A]=O:J[A]=256;else if(X==64){let te=A+1;for(;te<b&&J[te]==64;)te++;let re=A&&O==8||te<t&&J[te]==8?V==1?1:8:256;for(let me=A;me<te;me++)J[me]=re;A=te-1}else X==8&&V==1&&(J[A]=1);O=X,X&7&&(V=X)}}}function Je(o,e,t,n,s){let h=s==1?2:1;for(let u=0,b=0,v=0;u<=n.length;u++){let A=u?n[u-1].to:e,O=u<n.length?n[u].from:t;for(let V=A,X,te,re;V<O;V++)if(te=I[X=o.charCodeAt(V)])if(te<0){for(let me=b-3;me>=0;me-=3)if(y[me+1]==-te){let fe=y[me+2],Ae=fe&2?s:fe&4?fe&1?h:s:0;Ae&&(J[V]=J[y[me]]=Ae),b=me;break}}else{if(y.length==189)break;y[b++]=V,y[b++]=X,y[b++]=v}else if((re=J[V])==2||re==1){let me=re==s;v=me?0:1;for(let fe=b-3;fe>=0;fe-=3){let Ae=y[fe+2];if(Ae&2)break;if(me)y[fe+2]|=2;else{if(Ae&4)break;y[fe+2]|=4}}}}}function Ze(o,e,t,n){for(let s=0,h=n;s<=t.length;s++){let u=s?t[s-1].to:o,b=s<t.length?t[s].from:e;for(let v=u;v<b;){let A=J[v];if(A==256){let O=v+1;for(;;)if(O==b){if(s==t.length)break;O=t[s++].to,b=s<t.length?t[s].from:e}else if(J[O]==256)O++;else break;let V=h==1,X=(O<e?J[O]:n)==1,te=V==X?V?1:2:n;for(let re=O,me=s,fe=me?t[me-1].to:o;re>v;)re==fe&&(re=t[--me].from,fe=me?t[me-1].to:o),J[--re]=te;v=O}else h=A,v++}}}function Kt(o,e,t,n,s,h,u){let b=n%2?2:1;if(n%2==s%2)for(let v=e,A=0;v<t;){let O=!0,V=!1;if(A==h.length||v<h[A].from){let me=J[v];me!=b&&(O=!1,V=me==16)}let X=!O&&b==1?[]:null,te=O?n:n+1,re=v;e:for(;;)if(A<h.length&&re==h[A].from){if(V)break e;let me=h[A];if(!O)for(let fe=me.to,Ae=A+1;;){if(fe==t)break e;if(Ae<h.length&&h[Ae].from==fe)fe=h[Ae++].to;else{if(J[fe]==b)break e;break}}if(A++,X)X.push(me);else{me.from>v&&u.push(new U(v,me.from,te));let fe=me.direction==Vt!=!(te%2);D(o,fe?n+1:n,s,me.inner,me.from,me.to,u),v=me.to}re=me.to}else{if(re==t||(O?J[re]!=b:J[re]==b))break;re++}X?Kt(o,v,re,n+1,s,X,u):v<re&&u.push(new U(v,re,te)),v=re}else for(let v=t,A=h.length;v>e;){let O=!0,V=!1;if(!A||v>h[A-1].to){let me=J[v-1];me!=b&&(O=!1,V=me==16)}let X=!O&&b==1?[]:null,te=O?n:n+1,re=v;e:for(;;)if(A&&re==h[A-1].to){if(V)break e;let me=h[--A];if(!O)for(let fe=me.from,Ae=A;;){if(fe==e)break e;if(Ae&&h[Ae-1].to==fe)fe=h[--Ae].from;else{if(J[fe-1]==b)break e;break}}if(X)X.push(me);else{me.to<v&&u.push(new U(me.to,v,te));let fe=me.direction==Vt!=!(te%2);D(o,fe?n+1:n,s,me.inner,me.from,me.to,u),v=me.from}re=me.from}else{if(re==e||(O?J[re-1]!=b:J[re-1]==b))break;re--}X?Kt(o,re,v,n+1,s,X,u):re<v&&u.push(new U(re,v,te)),v=re}}function D(o,e,t,n,s,h,u){let b=e%2?2:1;he(o,s,h,n,b),Je(o,s,h,n,b),Ze(s,h,n,b),Kt(o,s,h,e,t,n,u)}function a(o,e,t){if(!o)return[new U(0,0,e==Nt?1:0)];if(e==Vt&&!t.length&&!N.test(o))return d(o.length);if(t.length)for(;o.length>J.length;)J[J.length]=256;let n=[],s=e==Vt?0:1;return D(o,s,s,t,0,o.length,n),n}function d(o){return[new U(0,o,0)]}let m="";function k(o,e,t,n,s){var h;let u=n.head-o.from,b=U.find(e,u,(h=n.bidiLevel)!==null&&h!==void 0?h:-1,n.assoc),v=e[b],A=v.side(s,t);if(u==A){let X=b+=s?1:-1;if(X<0||X>=e.length)return null;v=e[b=X],u=v.side(!s,t),A=v.side(s,t)}let O=(0,E.cp)(o.text,u,v.forward(s,t));(O<v.from||O>v.to)&&(O=A),m=o.text.slice(Math.min(u,O),Math.max(u,O));let V=b==(s?e.length-1:0)?null:e[b+(s?1:-1)];return V&&O==A&&V.level+(s?0:1)<v.level?E.jT.cursor(V.side(!s,t)+o.from,V.forward(s,t)?1:-1,V.level):E.jT.cursor(O+o.from,v.forward(s,t)?-1:1,v.level)}function R(o,e,t){for(let n=e;n<t;n++){let s=P(o.charCodeAt(n));if(s==1)return Vt;if(s==2||s==4)return Nt}return Vt}const B=E.r$.define(),Q=E.r$.define(),q=E.r$.define(),de=E.r$.define(),Se=E.r$.define(),Ie=E.r$.define(),ot=E.r$.define(),_e=E.r$.define({combine:o=>o.some(e=>e)}),ei=E.r$.define({combine:o=>o.some(e=>e)}),Ci=E.r$.define();class ni{constructor(e,t="nearest",n="nearest",s=5,h=5,u=!1){this.range=e,this.y=t,this.x=n,this.yMargin=s,this.xMargin=h,this.isSnapshot=u}map(e){return e.empty?this:new ni(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ni(E.jT.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ni=E.Py.define({map:(o,e)=>o.map(e)});function Ai(o,e,t){let n=o.facet(de);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const $i=E.r$.define({combine:o=>o.length?o[0]:!0});let ns=0;const Hi=E.r$.define();class di{constructor(e,t,n,s,h){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=s,this.extension=h(this)}static define(e,t){const{eventHandlers:n,eventObservers:s,provide:h,decorations:u}=t||{};return new di(ns++,e,n,s,b=>{let v=[Hi.of(b)];return u&&v.push(Vi.of(A=>{let O=A.plugin(b);return O?u(O):Ge.none})),h&&v.push(h(b)),v})}static fromClass(e,t){return di.define(n=>new e(n),t)}}class wn{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Ai(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(s){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ai(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Ai(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Fn=E.r$.define(),Sn=E.r$.define(),Vi=E.r$.define(),Fi=E.r$.define(),Gi=E.r$.define(),on=E.r$.define();function ln(o,e){let t=o.state.facet(on);if(!t.length)return t;let n=t.map(h=>h instanceof Function?h(o):h),s=[];return E.Xs.spans(n,e.from,e.to,{point(){},span(h,u,b,v){let A=h-e.from,O=u-e.from,V=s;for(let X=b.length-1;X>=0;X--,v--){let te=b[X].spec.bidiIsolate,re;if(te==null&&(te=R(e.text,A,O)),v>0&&V.length&&(re=V[V.length-1]).to==A&&re.direction==te)re.to=O,V=re.inner;else{let me={from:A,to:O,direction:te,inner:[]};V.push(me),V=me.inner}}}}),s}const Es=E.r$.define();function an(o){let e=0,t=0,n=0,s=0;for(let h of o.state.facet(Es)){let u=h(o);u&&(u.left!=null&&(e=Math.max(e,u.left)),u.right!=null&&(t=Math.max(t,u.right)),u.top!=null&&(n=Math.max(n,u.top)),u.bottom!=null&&(s=Math.max(s,u.bottom)))}return{left:e,right:t,top:n,bottom:s}}const hn=E.r$.define();class wi{constructor(e,t,n,s){this.fromA=e,this.toA=t,this.fromB=n,this.toB=s}join(e){return new wi(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>n.toA)){if(s.toA<n.fromA)break;n=n.join(s),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let s=0,h=0,u=0,b=0;;s++){let v=s==e.length?null:e[s],A=u-b,O=v?v.fromB:1e9;for(;h<t.length&&t[h]<O;){let V=t[h],X=t[h+1],te=Math.max(b,V),re=Math.min(O,X);if(te<=re&&new wi(te+A,re+A,te,re).addToSet(n),X>O)break;h+=2}if(!v)return n;new wi(v.fromA,v.toA,v.fromB,v.toB).addToSet(n),u=v.toA,b=v.toB}}}class cn{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=E.as.empty(this.startState.doc.length);for(let h of n)this.changes=this.changes.compose(h.changes);let s=[];this.changes.iterChangedRanges((h,u,b,v)=>s.push(new wi(h,u,b,v))),this.changedRanges=s}static create(e,t,n){return new cn(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class ss extends De{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ze],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wi(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:A,toA:O})=>O<this.minWidthFrom||A>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let s=-1;this.view.inputState.composing>=0&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!be(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let h=s>-1?w(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:A,to:O}=this.hasComposition;n=new wi(A,O,e.changes.mapPos(A,-1),e.changes.mapPos(O,1)).addToSet(n.slice())}this.hasComposition=h?{from:h.range.fromB,to:h.range.toB}:null,($.ie||$.chrome)&&!h&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let u=this.decorations,b=this.updateDeco(),v=G(u,b,e.changes);return n=wi.extendWithRanges(n,v),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,h),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let u=$.chrome||$.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,u),this.flags&=-8,u&&(u.written||s.selectionRange.focusNode!=u.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(u=>u.flags&=-9);let h=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let u of this.children)u instanceof Tt&&u.widget instanceof T&&h.push(u.dom);s.updateGaps(h)}updateChildren(e,t,n){let s=n?n.range.addToSet(e.slice()):e,h=this.childCursor(t);for(let u=s.length-1;;u--){let b=u>=0?s[u]:null;if(!b)break;let{fromA:v,toA:A,fromB:O,toB:V}=b,X,te,re,me;if(n&&n.range.fromB<V&&n.range.toB>O){let ut=si.build(this.view.state.doc,O,n.range.fromB,this.decorations,this.dynamicDecorationMap),Bt=si.build(this.view.state.doc,n.range.toB,V,this.decorations,this.dynamicDecorationMap);te=ut.breakAtStart,re=ut.openStart,me=Bt.openEnd;let Wt=this.compositionView(n);Bt.breakAtStart?Wt.breakAfter=1:Bt.content.length&&Wt.merge(Wt.length,Wt.length,Bt.content[0],!1,Bt.openStart,0)&&(Wt.breakAfter=Bt.content[0].breakAfter,Bt.content.shift()),ut.content.length&&Wt.merge(0,0,ut.content[ut.content.length-1],!0,0,ut.openEnd)&&ut.content.pop(),X=ut.content.concat(Wt).concat(Bt.content)}else({content:X,breakAtStart:te,openStart:re,openEnd:me}=si.build(this.view.state.doc,O,V,this.decorations,this.dynamicDecorationMap));let{i:fe,off:Ae}=h.findPos(A,1),{i:bt,off:Lt}=h.findPos(v,-1);xt(this,bt,Lt,fe,Ae,X,te,re,me)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new le(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Be(s,[t],t.length);let n=new ze;return n.append(t,0),n}fixCompositionDOM(e){let t=(h,u)=>{u.flags|=8|(u.children.some(v=>v.flags&7)?1:0),this.markedForComposition.add(u);let b=De.get(h);b&&b!=u&&(b.dom=null),u.setDOM(h)},n=this.childPos(e.range.fromB,1),s=this.children[n.i];t(e.line,s);for(let h=e.marks.length-1;h>=-1;h--)n=s.childPos(n.off,1),s=s.children[n.i],t(h>=0?e.marks[h].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,s=n==this.dom,h=!s&&Ee(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(s||t||h))return;let u=this.forceSelection;this.forceSelection=!1;let b=this.view.state.selection.main,v=this.moveToLine(this.domAtPos(b.anchor)),A=b.empty?v:this.moveToLine(this.domAtPos(b.head));if($.gecko&&b.empty&&!this.hasComposition&&kr(v)){let V=document.createTextNode("");this.view.observer.ignore(()=>v.node.insertBefore(V,v.node.childNodes[v.offset]||null)),v=A=new Ce(V,0),u=!0}let O=this.view.observer.selectionRange;(u||!O.focusNode||(!vt(v.node,v.offset,O.anchorNode,O.anchorOffset)||!vt(A.node,A.offset,O.focusNode,O.focusOffset))&&!this.suppressWidgetCursorChange(O,b))&&(this.view.observer.ignore(()=>{$.android&&$.chrome&&this.dom.contains(O.focusNode)&&Y(O.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let V=nt(this.view.root);if(V)if(b.empty){if($.gecko){let X=L(v.node,v.offset);if(X&&X!=3){let te=(X==1?ee:ge)(v.node,v.offset);te&&(v=new Ce(te.node,te.offset))}}V.collapse(v.node,v.offset),b.bidiLevel!=null&&V.caretBidiLevel!==void 0&&(V.caretBidiLevel=b.bidiLevel)}else if(V.extend){V.collapse(v.node,v.offset);try{V.extend(A.node,A.offset)}catch(X){}}else{let X=document.createRange();b.anchor>b.head&&([v,A]=[A,v]),X.setEnd(A.node,A.offset),X.setStart(v.node,v.offset),V.removeAllRanges(),V.addRange(X)}h&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(v,A)),this.impreciseAnchor=v.precise?null:new Ce(O.anchorNode,O.anchorOffset),this.impreciseHead=A.precise?null:new Ce(O.focusNode,O.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&vt(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=nt(e.root),{anchorNode:s,anchorOffset:h}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let u=ze.find(this,t.head);if(!u)return;let b=u.posAtStart;if(t.head==b||t.head==b+u.length)return;let v=this.coordsAt(t.head,-1),A=this.coordsAt(t.head,1);if(!v||!A||v.bottom>A.top)return;let O=this.domAtPos(t.head+t.assoc);n.collapse(O.node,O.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let V=e.observer.selectionRange;e.docView.posFromDOM(V.anchorNode,V.anchorOffset)!=t.from&&n.collapse(s,h)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let s=e.offset;!n&&s<t.childNodes.length;s++){let h=De.get(t.childNodes[s]);h instanceof ze&&(n=h.domAtPos(0))}for(let s=e.offset-1;!n&&s>=0;s--){let h=De.get(t.childNodes[s]);h instanceof ze&&(n=h.domAtPos(h.length))}return n?new Ce(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=De.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(n<s.length||s instanceof ze)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,s=0;for(let h=this.length,u=this.children.length-1;u>=0;u--){let b=this.children[u],v=h-b.breakAfter,A=v-b.length;if(v<e)break;A<=e&&(A<e||b.covers(-1))&&(v>e||b.covers(1))&&(!n||b instanceof ze&&!(n instanceof ze&&t>=0))&&(n=b,s=A),h=A}return n?n.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),s=this.children[t];if(!(s instanceof ze))return null;for(;s.children.length;){let{i:b,off:v}=s.childPos(n,1);for(;;b++){if(b==s.children.length)return null;if((s=s.children[b]).length)break}n=v}if(!(s instanceof le))return null;let h=(0,E.cp)(s.text,n);if(h==n)return null;let u=Me(s.dom,n,h).getClientRects();for(let b=0;b<u.length;b++){let v=u[b];if(b==u.length-1||v.top<v.bottom&&v.left<v.right)return v}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:s}=e,h=this.view.contentDOM.clientWidth,u=h>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,b=-1,v=this.view.textDirection==rt.LTR;for(let A=0,O=0;O<this.children.length;O++){let V=this.children[O],X=A+V.length;if(X>s)break;if(A>=n){let te=V.dom.getBoundingClientRect();if(t.push(te.height),u){let re=V.dom.lastChild,me=re?ct(re):[];if(me.length){let fe=me[me.length-1],Ae=v?fe.right-te.left:te.right-fe.left;Ae>b&&(b=Ae,this.minWidth=h,this.minWidthFrom=A,this.minWidthTo=X)}}}A=X+V.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?rt.RTL:rt.LTR}measureTextSize(){for(let h of this.children)if(h instanceof ze){let u=h.measureTextSize();if(u)return u}let e=document.createElement("div"),t,n,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let h=ct(e.firstChild)[0];t=e.getBoundingClientRect().height,n=h?h.width/27:7,s=h?h.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Ye(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,s=0;;s++){let h=s==t.viewports.length?null:t.viewports[s],u=h?h.from-1:this.length;if(u>n){let b=(t.lineBlockAt(u).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Ge.replace({widget:new T(b),block:!0,inclusive:!0,isBlockGap:!0}).range(n,u))}if(!h)break;n=h.to+1}return Ge.set(e)}updateDeco(){let e=0,t=this.view.state.facet(Vi).map(h=>(this.dynamicDecorationMap[e++]=typeof h=="function")?h(this.view):h),n=!1,s=this.view.state.facet(Fi).map((h,u)=>{let b=typeof h=="function";return b&&(n=!0),b?h(this.view):h});for(s.length&&(this.dynamicDecorationMap[e++]=n,t.push(E.Xs.join(s))),this.decorations=[...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let A=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=A.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let A of this.view.state.facet(Ci))try{if(A(this.view,e.range,e))return!0}catch(O){Ai(this.view.state,O,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!n)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,s.left),top:Math.min(n.top,s.top),right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)});let h=an(this.view),u={left:n.left-h.left,top:n.top-h.top,right:n.right+h.right,bottom:n.bottom+h.bottom},{offsetWidth:b,offsetHeight:v}=this.view.scrollDOM;Dt(this.view.scrollDOM,u,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,b),-b),Math.max(Math.min(e.yMargin,v),-v),this.view.textDirection==rt.LTR)}}function kr(o){return o.node.nodeType==1&&o.node.firstChild&&(o.offset==0||o.node.childNodes[o.offset-1].contentEditable=="false")&&(o.offset==o.node.childNodes.length||o.node.childNodes[o.offset].contentEditable=="false")}class T extends Qe{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function g(o,e){let t=o.observer.selectionRange;if(!t.focusNode)return null;let n=ee(t.focusNode,t.focusOffset),s=ge(t.focusNode,t.focusOffset),h=n||s;if(s&&n&&s.node!=n.node){let b=De.get(s.node);if(!b||b instanceof le&&b.text!=s.node.nodeValue)h=s;else if(o.docView.lastCompositionAfterCursor){let v=De.get(n.node);!v||v instanceof le&&v.text!=n.node.nodeValue||(h=s)}}if(o.docView.lastCompositionAfterCursor=h!=n,!h)return null;let u=e-h.offset;return{from:u,to:u+h.node.nodeValue.length,node:h.node}}function w(o,e,t){let n=g(o,t);if(!n)return null;let{node:s,from:h,to:u}=n,b=s.nodeValue;if(/[\n\r]/.test(b)||o.state.doc.sliceString(n.from,n.to)!=b)return null;let v=e.invertedDesc,A=new wi(v.mapPos(h),v.mapPos(u),h,u),O=[];for(let V=s.parentNode;;V=V.parentNode){let X=De.get(V);if(X instanceof Be)O.push({node:V,deco:X.mark});else{if(X instanceof ze||V.nodeName=="DIV"&&V.parentNode==o.contentDOM)return{range:A,text:s,marks:O,line:V};if(V!=o.contentDOM)O.push({node:V,deco:new tt({inclusive:!0,attributes:Ft(V),tagName:V.tagName.toLowerCase()})});else return null}}}function L(o,e){return o.nodeType!=1?0:(e&&o.childNodes[e-1].contentEditable=="false"?1:0)|(e<o.childNodes.length&&o.childNodes[e].contentEditable=="false"?2:0)}let H=class{constructor(){this.changes=[]}compareRange(e,t){St(e,t,this.changes)}comparePoint(e,t){St(e,t,this.changes)}};function G(o,e,t){let n=new H;return E.Xs.compare(o,e,t,n),n.changes}function Y(o,e){for(let t=o;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function be(o,e){let t=!1;return e&&o.iterChangedRanges((n,s)=>{n<e.to&&s>e.from&&(t=!0)}),t}function ve(o,e,t=1){let n=o.charCategorizer(e),s=o.doc.lineAt(e),h=e-s.from;if(s.length==0)return E.jT.cursor(e);h==0?t=1:h==s.length&&(t=-1);let u=h,b=h;t<0?u=(0,E.cp)(s.text,h,!1):b=(0,E.cp)(s.text,h);let v=n(s.text.slice(u,b));for(;u>0;){let A=(0,E.cp)(s.text,u,!1);if(n(s.text.slice(A,u))!=v)break;u=A}for(;b<s.length;){let A=(0,E.cp)(s.text,b);if(n(s.text.slice(b,A))!=v)break;b=A}return E.jT.range(u+s.from,b+s.from)}function qe(o,e){return e.left>o?e.left-o:Math.max(0,o-e.right)}function yt(o,e){return e.top>o?e.top-o:Math.max(0,o-e.bottom)}function Yt(o,e){return o.top<e.bottom-1&&o.bottom>e.top+1}function yi(o,e){return e<o.top?{top:e,left:o.left,right:o.right,bottom:o.bottom}:o}function bi(o,e){return e>o.bottom?{top:o.top,left:o.left,right:o.right,bottom:e}:o}function Ei(o,e,t){let n,s,h,u,b=!1,v,A,O,V;for(let re=o.firstChild;re;re=re.nextSibling){let me=ct(re);for(let fe=0;fe<me.length;fe++){let Ae=me[fe];s&&Yt(s,Ae)&&(Ae=yi(bi(Ae,s.bottom),s.top));let bt=qe(e,Ae),Lt=yt(t,Ae);if(bt==0&&Lt==0)return re.nodeType==3?ji(re,e,t):Ei(re,e,t);if(!n||u>Lt||u==Lt&&h>bt){n=re,s=Ae,h=bt,u=Lt;let ut=Lt?t<Ae.top?-1:1:bt?e<Ae.left?-1:1:0;b=!ut||(ut>0?fe<me.length-1:fe>0)}bt==0?t>Ae.bottom&&(!O||O.bottom<Ae.bottom)?(v=re,O=Ae):t<Ae.top&&(!V||V.top>Ae.top)&&(A=re,V=Ae):O&&Yt(O,Ae)?O=bi(O,Ae.bottom):V&&Yt(V,Ae)&&(V=yi(V,Ae.top))}}if(O&&O.bottom>=t?(n=v,s=O):V&&V.top<=t&&(n=A,s=V),!n)return{node:o,offset:0};let X=Math.max(s.left,Math.min(s.right,e));if(n.nodeType==3)return ji(n,X,t);if(b&&n.contentEditable!="false")return Ei(n,X,t);let te=Array.prototype.indexOf.call(o.childNodes,n)+(e>=(s.left+s.right)/2?1:0);return{node:o,offset:te}}function ji(o,e,t){let n=o.nodeValue.length,s=-1,h=1e9,u=0;for(let b=0;b<n;b++){let v=Me(o,b,b+1).getClientRects();for(let A=0;A<v.length;A++){let O=v[A];if(O.top==O.bottom)continue;u||(u=e-O.left);let V=(O.top>t?O.top-t:t-O.bottom)-1;if(O.left-1<=e&&O.right+1>=e&&V<h){let X=e>=(O.left+O.right)/2,te=X;if(($.chrome||$.gecko)&&Me(o,b).getBoundingClientRect().left==O.right&&(te=!X),V<=0)return{node:o,offset:b+(te?1:0)};s=b+(te?1:0),h=V}}}return{node:o,offset:s>-1?s:u>0?o.nodeValue.length:0}}function rs(o,e,t,n=-1){var s,h;let u=o.contentDOM.getBoundingClientRect(),b=u.top+o.viewState.paddingTop,v,{docHeight:A}=o.viewState,{x:O,y:V}=e,X=V-b;if(X<0)return 0;if(X>A)return o.state.doc.length;for(let ut=o.viewState.heightOracle.textHeight/2,Bt=!1;v=o.elementAtHeight(X),v.type!=Ct.Text;)for(;X=n>0?v.bottom+ut:v.top-ut,!(X>=0&&X<=A);){if(Bt)return t?null:0;Bt=!0,n=-n}V=b+X;let te=v.from;if(te<o.viewport.from)return o.viewport.from==0?0:t?null:On(o,u,v,O,V);if(te>o.viewport.to)return o.viewport.to==o.state.doc.length?o.state.doc.length:t?null:On(o,u,v,O,V);let re=o.dom.ownerDocument,me=o.root.elementFromPoint?o.root:re,fe=me.elementFromPoint(O,V);fe&&!o.contentDOM.contains(fe)&&(fe=null),fe||(O=Math.max(u.left+1,Math.min(u.right-1,O)),fe=me.elementFromPoint(O,V),fe&&!o.contentDOM.contains(fe)&&(fe=null));let Ae,bt=-1;if(fe&&((s=o.docView.nearest(fe))===null||s===void 0?void 0:s.isEditable)!=!1){if(re.caretPositionFromPoint){let ut=re.caretPositionFromPoint(O,V);ut&&({offsetNode:Ae,offset:bt}=ut)}else if(re.caretRangeFromPoint){let ut=re.caretRangeFromPoint(O,V);ut&&({startContainer:Ae,startOffset:bt}=ut,(!o.contentDOM.contains(Ae)||$.safari&&wr(Ae,bt,O)||$.chrome&&Ls(Ae,bt,O))&&(Ae=void 0))}}if(!Ae||!o.docView.dom.contains(Ae)){let ut=ze.find(o.docView,te);if(!ut)return X>v.top+v.height/2?v.to:v.from;({node:Ae,offset:bt}=Ei(ut.dom,O,V))}let Lt=o.docView.nearest(Ae);if(!Lt)return null;if(Lt.isWidget&&((h=Lt.dom)===null||h===void 0?void 0:h.nodeType)==1){let ut=Lt.dom.getBoundingClientRect();return e.y<ut.top||e.y<=ut.bottom&&e.x<=(ut.left+ut.right)/2?Lt.posAtStart:Lt.posAtEnd}else return Lt.localPosFromDOM(Ae,bt)+Lt.posAtStart}function On(o,e,t,n,s){let h=Math.round((n-e.left)*o.defaultCharacterWidth);if(o.lineWrapping&&t.height>o.defaultLineHeight*1.5){let b=o.viewState.heightOracle.textHeight,v=Math.floor((s-t.top-(o.defaultLineHeight-b)*.5)/b);h+=v*o.viewState.heightOracle.lineLength}let u=o.state.sliceDoc(t.from,t.to);return t.from+(0,E.Gz)(u,h,o.state.tabSize)}function wr(o,e,t){let n;if(o.nodeType!=3||e!=(n=o.nodeValue.length))return!1;for(let s=o.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return Me(o,n-1,n).getBoundingClientRect().left>t}function Ls(o,e,t){if(e!=0)return!1;for(let s=o;;){let h=s.parentNode;if(!h||h.nodeType!=1||h.firstChild!=s)return!1;if(h.classList.contains("cm-line"))break;s=h}let n=o.nodeType==1?o.getBoundingClientRect():Me(o,0,Math.max(o.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function Is(o,e){let t=o.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==Ct.Text))return n}return t}function Ns(o,e,t,n){let s=Is(o,e.head),h=!n||s.type!=Ct.Text||!(o.lineWrapping||s.widgetLineBreaks)?null:o.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(h){let u=o.dom.getBoundingClientRect(),b=o.textDirectionAt(s.from),v=o.posAtCoords({x:t==(b==rt.LTR)?u.right-1:u.left+1,y:(h.top+h.bottom)/2});if(v!=null)return E.jT.cursor(v,t?-1:1)}return E.jT.cursor(t?s.to:s.from,t?-1:1)}function $s(o,e,t,n){let s=o.state.doc.lineAt(e.head),h=o.bidiSpans(s),u=o.textDirectionAt(s.from);for(let b=e,v=null;;){let A=k(s,h,u,b,t),O=m;if(!A){if(s.number==(t?o.state.doc.lines:1))return b;O=`
`,s=o.state.doc.line(s.number+(t?1:-1)),h=o.bidiSpans(s),A=o.visualLineSide(s,!t)}if(v){if(!v(O))return b}else{if(!n)return A;v=n(O)}b=A}}function wl(o,e,t){let n=o.state.charCategorizer(e),s=n(t);return h=>{let u=n(h);return s==E.D0.Space&&(s=u),s==u}}function Co(o,e,t,n){let s=e.head,h=t?1:-1;if(s==(t?o.state.doc.length:0))return E.jT.cursor(s,e.assoc);let u=e.goalColumn,b,v=o.contentDOM.getBoundingClientRect(),A=o.coordsAtPos(s,e.assoc||-1),O=o.documentTop;if(A)u==null&&(u=A.left-v.left),b=h<0?A.top:A.bottom;else{let te=o.viewState.lineBlockAt(s);u==null&&(u=Math.min(v.right-v.left,o.defaultCharacterWidth*(s-te.from))),b=(h<0?te.top:te.bottom)+O}let V=v.left+u,X=n!=null?n:o.viewState.heightOracle.textHeight>>1;for(let te=0;;te+=10){let re=b+(X+te)*h,me=rs(o,{x:V,y:re},!1,h);if(re<v.top||re>v.bottom||(h<0?me<s:me>s)){let fe=o.docView.coordsForChar(me),Ae=!fe||re<fe.top?-1:1;return E.jT.cursor(me,Ae,void 0,u)}}}function os(o,e,t){for(;;){let n=0;for(let s of o)s.between(e-1,e+1,(h,u,b)=>{if(e>h&&e<u){let v=n||t||(e-h<u-e?-1:1);e=v<0?h:u,n=v}});if(!n)return e}}function Fs(o,e,t){let n=os(o.state.facet(Gi).map(s=>s(o)),t.from,e.head>t.from?-1:1);return n==t.from?t:E.jT.cursor(n,n<t.from?1:-1)}class Ao{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,$.safari&&e.contentDOM.addEventListener("input",()=>null),$.gecko&&as(e.contentDOM.ownerDocument)}handleEvent(e){!Vs(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||this.runHandlers(e.type,e)}runHandlers(e,t){let n=this.handlers[e];if(n){for(let s of n.observers)s(this.view,t);for(let s of n.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Sr(e),n=this.handlers,s=this.view.contentDOM;for(let h in t)if(h!="scroll"){let u=!t[h].handlers.length,b=n[h];b&&u!=!b.handlers.length&&(s.removeEventListener(h,this.handleEvent),b=null),b||s.addEventListener(h,this.handleEvent,{passive:u})}for(let h in n)h!="scroll"&&!t[h]&&s.removeEventListener(h,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(e.keyCode!=27&&zs.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),$.android&&$.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return $.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Ws.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||Cn.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ke(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:$.safari&&!$.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function ri(o,e){return(t,n)=>{try{return e.call(o,n,t)}catch(s){Ai(t.state,s)}}}function Sr(o){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of o){let s=n.spec;if(s&&s.domEventHandlers)for(let h in s.domEventHandlers){let u=s.domEventHandlers[h];u&&t(h).handlers.push(ri(n.value,u))}if(s&&s.domEventObservers)for(let h in s.domEventObservers){let u=s.domEventObservers[h];u&&t(h).observers.push(ri(n.value,u))}}for(let n in Pi)t(n).handlers.push(Pi[n]);for(let n in Ri)t(n).observers.push(Ri[n]);return e}const Ws=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Cn="dthko",zs=[16,17,18,20,91,92,224,225],An=6;function Wn(o){return Math.max(0,o)*.7+8}function Hs(o,e){return Math.max(Math.abs(o.clientX-e.clientX),Math.abs(o.clientY-e.clientY))}class Tn{constructor(e,t,n,s){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=Gt(e.contentDOM),this.atoms=e.state.facet(Gi).map(u=>u(e));let h=e.contentDOM.ownerDocument;h.addEventListener("mousemove",this.move=this.move.bind(this)),h.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(E.yy.allowMultipleSelections)&&Or(e,t),this.dragging=ls(e,t)&&Br(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){var t;if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&Hs(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,s=0,h=((t=this.scrollParent)===null||t===void 0?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},u=an(this.view);e.clientX-u.left<=h.left+An?n=-Wn(h.left-e.clientX):e.clientX+u.right>=h.right-An&&(n=Wn(e.clientX-h.right)),e.clientY-u.top<=h.top+An?s=-Wn(h.top-e.clientY):e.clientY+u.bottom>=h.bottom-An&&(s=Wn(e.clientY-h.bottom)),this.setScrollSpeed(n,s)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],h=null;if(s.empty){let u=os(this.atoms,s.from,0);u!=s.from&&(h=E.jT.cursor(u,-1))}else{let u=os(this.atoms,s.from,-1),b=os(this.atoms,s.to,1);(u!=s.from||b!=s.to)&&(h=E.jT.range(s.from==s.anchor?u:b,s.from==s.head?u:b))}h&&(t||(t=e.ranges.slice()),t[n]=h)}return t?E.jT.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Or(o,e){let t=o.state.facet(B);return t.length?t[0](e):$.mac?e.metaKey:e.ctrlKey}function To(o,e){let t=o.state.facet(Q);return t.length?t[0](e):$.mac?!e.altKey:!e.ctrlKey}function ls(o,e){let{main:t}=o.state.selection;if(t.empty)return!1;let n=nt(o.root);if(!n||n.rangeCount==0)return!0;let s=n.getRangeAt(0).getClientRects();for(let h=0;h<s.length;h++){let u=s[h];if(u.left<=e.clientX&&u.right>=e.clientX&&u.top<=e.clientY&&u.bottom>=e.clientY)return!0}return!1}function Vs(o,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=o.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=De.get(t))&&n.ignoreEvent(e))return!1;return!0}const Pi=Object.create(null),Ri=Object.create(null),Cr=$.ie&&$.ie_version<15||$.ios&&$.webkit_version<604;function Po(o){let e=o.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{o.focus(),t.remove(),Ar(o,t.value)},50)}function Ar(o,e){let{state:t}=o,n,s=1,h=t.toText(e),u=h.lines==t.selection.ranges.length;if(qi!=null&&t.selection.ranges.every(v=>v.empty)&&qi==h.toString()){let v=-1;n=t.changeByRange(A=>{let O=t.doc.lineAt(A.from);if(O.from==v)return{range:A};v=O.from;let V=t.toText((u?h.line(s++).text:e)+t.lineBreak);return{changes:{from:O.from,insert:V},range:E.jT.cursor(A.from+V.length)}})}else u?n=t.changeByRange(v=>{let A=h.line(s++);return{changes:{from:v.from,to:v.to,insert:A.text},range:E.jT.cursor(v.from+A.length)}}):n=t.replaceSelection(h);o.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}Ri.scroll=o=>{o.inputState.lastScrollTop=o.scrollDOM.scrollTop,o.inputState.lastScrollLeft=o.scrollDOM.scrollLeft},Pi.keydown=(o,e)=>(o.inputState.setSelectionOrigin("select"),e.keyCode==27&&(o.inputState.lastEscPress=Date.now()),!1),Ri.touchstart=(o,e)=>{o.inputState.lastTouchTime=Date.now(),o.inputState.setSelectionOrigin("select.pointer")},Ri.touchmove=o=>{o.inputState.setSelectionOrigin("select.pointer")},Pi.mousedown=(o,e)=>{if(o.observer.flush(),o.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of o.state.facet(q))if(t=n(o,e),t)break;if(!t&&e.button==0&&(t=Ro(o,e)),t){let n=!o.hasFocus;o.inputState.startMouseSelection(new Tn(o,e,t,n)),n&&o.observer.ignore(()=>Le(o.contentDOM));let s=o.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function js(o,e,t,n){if(n==1)return E.jT.cursor(e,t);if(n==2)return ve(o.state,e,t);{let s=ze.find(o.docView,e),h=o.state.doc.lineAt(s?s.posAtEnd:e),u=s?s.posAtStart:h.from,b=s?s.posAtEnd:h.to;return b<o.state.doc.length&&b==h.to&&b++,E.jT.range(u,b)}}let Tr=(o,e)=>o>=e.top&&o<=e.bottom,Pr=(o,e,t)=>Tr(e,t)&&o>=t.left&&o<=t.right;function Mo(o,e,t,n){let s=ze.find(o.docView,e);if(!s)return 1;let h=e-s.posAtStart;if(h==0)return 1;if(h==s.length)return-1;let u=s.coordsAt(h,-1);if(u&&Pr(t,n,u))return-1;let b=s.coordsAt(h,1);return b&&Pr(t,n,b)?1:u&&Tr(n,u)?-1:1}function Qs(o,e){let t=o.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:Mo(o,t,e.clientX,e.clientY)}}const Do=$.ie&&$.ie_version<=11;let Mr=null,Dr=0,Rr=0;function Br(o){if(!Do)return o.detail;let e=Mr,t=Rr;return Mr=o,Rr=Date.now(),Dr=!e||t>Date.now()-400&&Math.abs(e.clientX-o.clientX)<2&&Math.abs(e.clientY-o.clientY)<2?(Dr+1)%3:1}function Ro(o,e){let t=Qs(o,e),n=Br(e),s=o.state.selection;return{update(h){h.docChanged&&(t.pos=h.changes.mapPos(t.pos),s=s.map(h.changes))},get(h,u,b){let v=Qs(o,h),A,O=js(o,v.pos,v.bias,n);if(t.pos!=v.pos&&!u){let V=js(o,t.pos,t.bias,n),X=Math.min(V.from,O.from),te=Math.max(V.to,O.to);O=X<O.from?E.jT.range(X,te):E.jT.range(te,X)}return u?s.replaceRange(s.main.extend(O.from,O.to)):b&&n==1&&s.ranges.length>1&&(A=fn(s,v.pos))?A:b?s.addRange(O):E.jT.create([O])}}}function fn(o,e){for(let t=0;t<o.ranges.length;t++){let{from:n,to:s}=o.ranges[t];if(n<=e&&s>=e)return E.jT.create(o.ranges.slice(0,t).concat(o.ranges.slice(t+1)),o.mainIndex==t?0:o.mainIndex-(o.mainIndex>t?1:0))}return null}Pi.dragstart=(o,e)=>{let{selection:{main:t}}=o.state;if(e.target.draggable){let s=o.docView.nearest(e.target);if(s&&s.isWidget){let h=s.posAtStart,u=h+s.length;(h>=t.to||u<=t.from)&&(t=E.jT.range(h,u))}}let{inputState:n}=o;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",o.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove"),!1},Pi.dragend=o=>(o.inputState.draggedContent=null,!1);function Bo(o,e,t,n){if(!t)return;let s=o.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:h}=o.inputState,u=n&&h&&To(o,e)?{from:h.from,to:h.to}:null,b={from:s,insert:t},v=o.state.changes(u?[u,b]:b);o.focus(),o.dispatch({changes:v,selection:{anchor:v.mapPos(s,-1),head:v.mapPos(s,1)},userEvent:u?"move.drop":"input.drop"}),o.inputState.draggedContent=null}Pi.drop=(o,e)=>{if(!e.dataTransfer)return!1;if(o.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),s=0,h=()=>{++s==t.length&&Bo(o,e,n.filter(u=>u!=null).join(o.state.lineBreak),!1)};for(let u=0;u<t.length;u++){let b=new FileReader;b.onerror=h,b.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(b.result)||(n[u]=b.result),h()},b.readAsText(t[u])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Bo(o,e,n,!0),!0}return!1},Pi.paste=(o,e)=>{if(o.state.readOnly)return!0;o.observer.flush();let t=Cr?null:e.clipboardData;return t?(Ar(o,t.getData("text/plain")||t.getData("text/uri-list")),!0):(Po(o),!1)};function Er(o,e){let t=o.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),o.focus()},50)}function Lr(o){let e=[],t=[],n=!1;for(let s of o.selection.ranges)s.empty||(e.push(o.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:h}of o.selection.ranges){let u=o.doc.lineAt(h);u.number>s&&(e.push(u.text),t.push({from:u.from,to:Math.min(o.doc.length,u.to+1)})),s=u.number}n=!0}return{text:e.join(o.lineBreak),ranges:t,linewise:n}}let qi=null;Pi.copy=Pi.cut=(o,e)=>{let{text:t,ranges:n,linewise:s}=Lr(o.state);if(!t&&!s)return!1;qi=s?t:null,e.type=="cut"&&!o.state.readOnly&&o.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let h=Cr?null:e.clipboardData;return h?(h.clearData(),h.setData("text/plain",t),!0):(Er(o,t),!1)};const Ir=E.q6.define();function Nr(o,e){let t=[];for(let n of o.facet(ot)){let s=n(o,e);s&&t.push(s)}return t?o.update({effects:t,annotations:Ir.of(!0)}):null}function un(o){setTimeout(()=>{let e=o.hasFocus;if(e!=o.inputState.notifiedFocused){let t=Nr(o.state,e);t?o.dispatch(t):o.update([])}},10)}Ri.focus=o=>{o.inputState.lastFocusTime=Date.now(),!o.scrollDOM.scrollTop&&(o.inputState.lastScrollTop||o.inputState.lastScrollLeft)&&(o.scrollDOM.scrollTop=o.inputState.lastScrollTop,o.scrollDOM.scrollLeft=o.inputState.lastScrollLeft),un(o)},Ri.blur=o=>{o.observer.clearSelectionRange(),un(o)},Ri.compositionstart=Ri.compositionupdate=o=>{o.inputState.compositionFirstChange==null&&(o.inputState.compositionFirstChange=!0),o.inputState.composing<0&&(o.inputState.composing=0)},Ri.compositionend=o=>{o.inputState.composing=-1,o.inputState.compositionEndedAt=Date.now(),o.inputState.compositionPendingKey=!0,o.inputState.compositionPendingChange=o.observer.pendingRecords().length>0,o.inputState.compositionFirstChange=null,$.chrome&&$.android?o.observer.flushSoon():o.inputState.compositionPendingChange?Promise.resolve().then(()=>o.observer.flush()):setTimeout(()=>{o.inputState.composing<0&&o.docView.hasComposition&&o.update([])},50)},Ri.contextmenu=o=>{o.inputState.lastContextMenu=Date.now()},Pi.beforeinput=(o,e)=>{var t;let n;if($.chrome&&$.android&&(n=Ws.find(s=>s.inputType==e.inputType))&&(o.observer.delayAndroidKey(n.key,n.keyCode),n.key=="Backspace"||n.key=="Delete")){let s=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var h;(((h=window.visualViewport)===null||h===void 0?void 0:h.height)||0)>s+10&&o.hasFocus&&(o.contentDOM.blur(),o.focus())},100)}return $.ios&&e.inputType=="deleteContentForward"&&o.observer.flushSoon(),$.safari&&e.inputType=="insertText"&&o.inputState.composing>=0&&setTimeout(()=>Ri.compositionend(o,e),20),!1};const zn=new Set;function as(o){zn.has(o)||(zn.add(o),o.addEventListener("copy",()=>{}),o.addEventListener("cut",()=>{}))}const $r=["pre-wrap","normal","pre-line","break-spaces"];class Fr{constructor(e){this.lineWrapping=e,this.doc=E.xv.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $r.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let s=e[n];s<0?n++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,n,s,h,u){let b=$r.indexOf(e)>-1,v=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=b;if(this.lineWrapping=b,this.lineHeight=t,this.charWidth=n,this.textHeight=s,this.lineLength=h,v){this.heightSamples={};for(let A=0;A<u.length;A++){let O=u[A];O<0?A++:this.heightSamples[Math.floor(O*10)]=!0}}return v}}class Pn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Li{constructor(e,t,n,s,h){this.from=e,this.length=t,this.top=n,this.height=s,this._content=h}get type(){return typeof this._content=="number"?Ct.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof st?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Li(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Zt=function(o){return o[o.ByPos=0]="ByPos",o[o.ByHeight=1]="ByHeight",o[o.ByPosNoHeight=2]="ByPosNoHeight",o}(Zt||(Zt={}));const Xs=.001;class Ti{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Xs&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return Ti.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,s){let h=this,u=n.doc;for(let b=s.length-1;b>=0;b--){let{fromA:v,toA:A,fromB:O,toB:V}=s[b],X=h.lineAt(v,Zt.ByPosNoHeight,n.setDoc(t),0,0),te=X.to>=A?X:h.lineAt(A,Zt.ByPosNoHeight,n,0,0);for(V+=te.to-A,A=te.to;b>0&&X.from<=s[b-1].toA;)v=s[b-1].fromA,O=s[b-1].fromB,b--,v<X.from&&(X=h.lineAt(v,Zt.ByPosNoHeight,n,0,0));O+=X.from-v,v=X.from;let re=Dn.build(n.setDoc(u),e,O,V);h=h.replace(v,A,re)}return h.updateHeight(n,0)}static empty(){return new Bi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,s=0,h=0;for(;;)if(t==n)if(s>h*2){let b=e[t-1];b.break?e.splice(--t,1,b.left,null,b.right):e.splice(--t,1,b.left,b.right),n+=1+b.break,s-=b.size}else if(h>s*2){let b=e[n];b.break?e.splice(n,1,b.left,null,b.right):e.splice(n,1,b.left,b.right),n+=2+b.break,h-=b.size}else break;else if(s<h){let b=e[t++];b&&(s+=b.size)}else{let b=e[--n];b&&(h+=b.size)}let u=0;return e[t-1]==null?(u=1,t--):e[t]==null&&(u=1,n++),new Eo(Ti.of(e.slice(0,t)),u,Ti.of(e.slice(n)))}}Ti.prototype.size=1;class hs extends Ti{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,s){return new Li(s,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,s,h){return this.blockAt(0,n,s,h)}forEachLine(e,t,n,s,h,u){e<=h+this.length&&t>=h&&u(this.blockAt(0,n,s,h))}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(e,s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Bi extends hs{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,s){return new Li(s,this.length,n,this.height,this.breaks)}replace(e,t,n){let s=n[0];return n.length==1&&(s instanceof Bi||s instanceof vi&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof vi?s=new Bi(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ti.of(n)}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more?this.setHeight(e,s.heights[s.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class vi extends Ti{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,h=s-n+1,u,b=0;if(e.lineWrapping){let v=Math.min(this.height,e.lineHeight*h);u=v/h,this.length>h+1&&(b=(this.height-v)/(this.length-h-1))}else u=this.height/h;return{firstLine:n,lastLine:s,perLine:u,perChar:b}}blockAt(e,t,n,s){let{firstLine:h,lastLine:u,perLine:b,perChar:v}=this.heightMetrics(t,s);if(t.lineWrapping){let A=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),O=t.doc.lineAt(A),V=b+O.length*v,X=Math.max(n,e-V/2);return new Li(O.from,O.length,X,V,0)}else{let A=Math.max(0,Math.min(u-h,Math.floor((e-n)/b))),{from:O,length:V}=t.doc.line(h+A);return new Li(O,V,n+b*A,b,0)}}lineAt(e,t,n,s,h){if(t==Zt.ByHeight)return this.blockAt(e,n,s,h);if(t==Zt.ByPosNoHeight){let{from:te,to:re}=n.doc.lineAt(e);return new Li(te,re-te,0,0,0)}let{firstLine:u,perLine:b,perChar:v}=this.heightMetrics(n,h),A=n.doc.lineAt(e),O=b+A.length*v,V=A.number-u,X=s+b*V+v*(A.from-h-V);return new Li(A.from,A.length,Math.max(s,Math.min(X,s+this.height-O)),O,0)}forEachLine(e,t,n,s,h,u){e=Math.max(e,h),t=Math.min(t,h+this.length);let{firstLine:b,perLine:v,perChar:A}=this.heightMetrics(n,h);for(let O=e,V=s;O<=t;){let X=n.doc.lineAt(O);if(O==e){let re=X.number-b;V+=v*re+A*(e-h-re)}let te=v+A*X.length;u(new Li(X.from,X.length,V,te,0)),V+=te,O=X.to+1}}replace(e,t,n){let s=this.length-t;if(s>0){let h=n[n.length-1];h instanceof vi?n[n.length-1]=new vi(h.length+s):n.push(null,new vi(s-1))}if(e>0){let h=n[0];h instanceof vi?n[0]=new vi(e+h.length):n.unshift(new vi(e-1),null)}return Ti.of(n)}decomposeLeft(e,t){t.push(new vi(e-1),null)}decomposeRight(e,t){t.push(null,new vi(this.length-e-1))}updateHeight(e,t=0,n=!1,s){let h=t+this.length;if(s&&s.from<=t+this.length&&s.more){let u=[],b=Math.max(t,s.from),v=-1;for(s.from>t&&u.push(new vi(s.from-t-1).updateHeight(e,t));b<=h&&s.more;){let O=e.doc.lineAt(b).length;u.length&&u.push(null);let V=s.heights[s.index++];v==-1?v=V:Math.abs(V-v)>=Xs&&(v=-2);let X=new Bi(O,V);X.outdated=!1,u.push(X),b+=O+1}b<=h&&u.push(null,new vi(h-b).updateHeight(e,b));let A=Ti.of(u);return(v<0||Math.abs(A.height-this.height)>=Xs||Math.abs(v-this.heightMetrics(e,t).perLine)>=Xs)&&(e.heightChanged=!0),A}else(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Eo extends Ti{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,s){let h=n+this.left.height;return e<h?this.left.blockAt(e,t,n,s):this.right.blockAt(e,t,h,s+this.left.length+this.break)}lineAt(e,t,n,s,h){let u=s+this.left.height,b=h+this.left.length+this.break,v=t==Zt.ByHeight?e<u:e<b,A=v?this.left.lineAt(e,t,n,s,h):this.right.lineAt(e,t,n,u,b);if(this.break||(v?A.to<b:A.from>b))return A;let O=t==Zt.ByPosNoHeight?Zt.ByPosNoHeight:Zt.ByPos;return v?A.join(this.right.lineAt(b,O,n,u,b)):this.left.lineAt(b,O,n,s,h).join(A)}forEachLine(e,t,n,s,h,u){let b=s+this.left.height,v=h+this.left.length+this.break;if(this.break)e<v&&this.left.forEachLine(e,t,n,s,h,u),t>=v&&this.right.forEachLine(e,t,n,b,v,u);else{let A=this.lineAt(v,Zt.ByPos,n,s,h);e<A.from&&this.left.forEachLine(e,A.from-1,n,s,h,u),A.to>=e&&A.from<=t&&u(A),t>A.to&&this.right.forEachLine(A.to+1,t,n,b,v,u)}}replace(e,t,n){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,n));let h=[];e>0&&this.decomposeLeft(e,h);let u=h.length;for(let b of n)h.push(b);if(e>0&&Mn(h,u-1),t<this.length){let b=h.length;this.decomposeRight(t,h),Mn(h,b)}return Ti.of(h)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,s=n+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ti.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,s){let{left:h,right:u}=this,b=t+h.length+this.break,v=null;return s&&s.from<=t+h.length&&s.more?v=h=h.updateHeight(e,t,n,s):h.updateHeight(e,t,n),s&&s.from<=b+u.length&&s.more?v=u=u.updateHeight(e,b,n,s):u.updateHeight(e,b,n),v?this.balanced(h,u):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Mn(o,e){let t,n;o[e]==null&&(t=o[e-1])instanceof vi&&(n=o[e+1])instanceof vi&&o.splice(e-1,3,new vi(t.length+1+n.length))}const cs=5;class Dn{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Bi?s.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Bi(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let s=n.widget?n.widget.estimatedHeight:0,h=n.widget?n.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let u=t-e;n.block?this.addBlock(new hs(u,s,n)):(u||h||s>=cs)&&this.addLineDeco(s,h,u)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Bi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new vi(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Bi)return e;let t=new Bi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let s=this.ensureLine();s.length+=n,s.collapsed+=n,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Bi)&&!this.isCovered?this.nodes.push(new Bi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let s of this.nodes)s instanceof Bi&&s.updateHeight(this.oracle,n),n+=s?s.length:1;return this.nodes}static build(e,t,n,s){let h=new Dn(n,e);return E.Xs.spans(t,n,s,h,0),h.finish(n)}}function Lo(o,e,t){let n=new Io;return E.Xs.compare(o,e,t,n,0),n.changes}class Io{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,s){(e<t||n&&n.heightRelevant||s&&s.heightRelevant)&&St(e,t,this.changes,5)}}function Wr(o,e){let t=o.getBoundingClientRect(),n=o.ownerDocument,s=n.defaultView||window,h=Math.max(0,t.left),u=Math.min(s.innerWidth,t.right),b=Math.max(0,t.top),v=Math.min(s.innerHeight,t.bottom);for(let A=o.parentNode;A&&A!=n.body;)if(A.nodeType==1){let O=A,V=window.getComputedStyle(O);if((O.scrollHeight>O.clientHeight||O.scrollWidth>O.clientWidth)&&V.overflow!="visible"){let X=O.getBoundingClientRect();h=Math.max(h,X.left),u=Math.min(u,X.right),b=Math.max(b,X.top),v=A==o.parentNode?X.bottom:Math.min(v,X.bottom)}A=V.position=="absolute"||V.position=="fixed"?O.offsetParent:O.parentNode}else if(A.nodeType==11)A=A.host;else break;return{left:h-t.left,right:Math.max(h,u)-t.left,top:b-(t.top+e),bottom:Math.max(b,v)-(t.top+e)}}function No(o,e){let t=o.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Hn{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],h=t[n];if(s.from!=h.from||s.to!=h.to||s.size!=h.size)return!1}return!0}draw(e,t){return Ge.replace({widget:new fs(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class fs extends Qe{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Js{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Mi,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=rt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Sn).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new Fr(t),this.stateDeco=e.facet(Vi).filter(n=>typeof n!="function"),this.heightMap=Ti.empty().applyChanges(this.stateDeco,E.xv.empty,this.heightOracle.setDoc(e.doc),[new wi(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ge.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let s=n?t.head:t.anchor;if(!e.some(({from:h,to:u})=>s>=h&&s<=u)){let{from:h,to:u}=this.lineBlockAt(s);e.push(new Vn(h,u))}}this.viewports=e.sort((n,s)=>n.from-s.from),this.scaler=this.heightMap.height<=7e6?Mi:new ds(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ki(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Vi).filter(O=>typeof O!="function");let s=e.changedRanges,h=wi.extendWithRanges(s,Lo(n,this.stateDeco,e?e.changes:E.as.empty(this.state.doc.length))),u=this.heightMap.height,b=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),h),this.heightMap.height!=u&&(e.flags|=2),b?(this.scrollAnchorPos=e.changes.mapPos(b.from,-1),this.scrollAnchorHeight=b.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let v=h.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<v.from||t.range.head>v.to)||!this.viewportIsAppropriate(v))&&(v=this.getViewport(0,t));let A=!e.changes.empty||e.flags&2||v.from!=this.viewport.from||v.to!=this.viewport.to;this.viewport=v,this.updateForViewport(),A&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(ei)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),s=this.heightOracle,h=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?rt.RTL:rt.LTR;let u=this.heightOracle.mustRefreshForWrapping(h),b=t.getBoundingClientRect(),v=u||this.mustMeasureContent||this.contentDOMHeight!=b.height;this.contentDOMHeight=b.height,this.mustMeasureContent=!1;let A=0,O=0;if(b.width&&b.height){let{scaleX:ut,scaleY:Bt}=Pt(t,b);(ut>.005&&Math.abs(this.scaleX-ut)>.005||Bt>.005&&Math.abs(this.scaleY-Bt)>.005)&&(this.scaleX=ut,this.scaleY=Bt,A|=8,u=v=!0)}let V=(parseInt(n.paddingTop)||0)*this.scaleY,X=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=V||this.paddingBottom!=X)&&(this.paddingTop=V,this.paddingBottom=X,A|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(v=!0),this.editorWidth=e.scrollDOM.clientWidth,A|=8);let te=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=te&&(this.scrollAnchorHeight=-1,this.scrollTop=te),this.scrolledToBottom=Fe(e.scrollDOM);let re=(this.printing?No:Wr)(t,this.paddingTop),me=re.top-this.pixelViewport.top,fe=re.bottom-this.pixelViewport.bottom;this.pixelViewport=re;let Ae=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(Ae!=this.inView&&(this.inView=Ae,Ae&&(v=!0)),!this.inView&&!this.scrollTarget)return 0;let bt=b.width;if((this.contentDOMWidth!=bt||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=b.width,this.editorHeight=e.scrollDOM.clientHeight,A|=8),v){let ut=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(ut)&&(u=!0),u||s.lineWrapping&&Math.abs(bt-this.contentDOMWidth)>s.charWidth){let{lineHeight:Bt,charWidth:Wt,textHeight:pi}=e.docView.measureTextSize();u=Bt>0&&s.refresh(h,Bt,Wt,pi,bt/Wt,ut),u&&(e.docView.minWidth=0,A|=8)}me>0&&fe>0?O=Math.max(me,fe):me<0&&fe<0&&(O=Math.min(me,fe)),s.heightChanged=!1;for(let Bt of this.viewports){let Wt=Bt.from==this.viewport.from?ut:e.docView.measureVisibleLineHeights(Bt);this.heightMap=(u?Ti.empty().applyChanges(this.stateDeco,E.xv.empty,this.heightOracle,[new wi(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,u,new Pn(Bt.from,Wt))}s.heightChanged&&(A|=2)}let Lt=!this.viewportIsAppropriate(this.viewport,O)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return Lt&&(this.viewport=this.getViewport(O,this.scrollTarget)),this.updateForViewport(),(A&2||Lt)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(u?[]:this.lineGaps,e)),A|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),A}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,h=this.heightOracle,{visibleTop:u,visibleBottom:b}=this,v=new Vn(s.lineAt(u-n*1e3,Zt.ByHeight,h,0,0).from,s.lineAt(b+(1-n)*1e3,Zt.ByHeight,h,0,0).to);if(t){let{head:A}=t.range;if(A<v.from||A>v.to){let O=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),V=s.lineAt(A,Zt.ByPos,h,0,0),X;t.y=="center"?X=(V.top+V.bottom)/2-O/2:t.y=="start"||t.y=="nearest"&&A<v.from?X=V.top:X=V.bottom-O,v=new Vn(s.lineAt(X-1e3/2,Zt.ByHeight,h,0,0).from,s.lineAt(X+O+1e3/2,Zt.ByHeight,h,0,0).to)}}return v}mapViewport(e,t){let n=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Vn(this.heightMap.lineAt(n,Zt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Zt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Zt.ByPos,this.heightOracle,0,0),{bottom:h}=this.heightMap.lineAt(t,Zt.ByPos,this.heightOracle,0,0),{visibleTop:u,visibleBottom:b}=this;return(e==0||s<=u-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||h>=b+Math.max(10,Math.min(n,250)))&&s>u-2*1e3&&h<b+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let s of e)t.touchesRange(s.from,s.to)||n.push(new Hn(t.mapPos(s.from),t.mapPos(s.to),s.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,h=s>>1,u=s<<1;if(this.defaultTextDirection!=rt.LTR&&!n)return[];let b=[],v=(A,O,V,X)=>{if(O-A<h)return;let te=this.state.selection.main,re=[te.from];te.empty||re.push(te.to);for(let fe of re)if(fe>A&&fe<O){v(A,fe-10,V,X),v(fe+10,O,V,X);return}let me=$o(e,fe=>fe.from>=V.from&&fe.to<=V.to&&Math.abs(fe.from-A)<h&&Math.abs(fe.to-O)<h&&!re.some(Ae=>fe.from<Ae&&fe.to>Ae));if(!me){if(O<V.to&&t&&n&&t.visibleRanges.some(fe=>fe.from<=O&&fe.to>=O)){let fe=t.moveToLineBoundary(E.jT.cursor(O),!1,!0).head;fe>A&&(O=fe)}me=new Hn(A,O,this.gapSize(V,A,O,X))}b.push(me)};for(let A of this.viewportLines){if(A.length<u)continue;let O=zr(A.from,A.to,this.stateDeco);if(O.total<u)continue;let V=this.scrollTarget?this.scrollTarget.range.head:null,X,te;if(n){let re=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,me,fe;if(V!=null){let Ae=us(O,V),bt=((this.visibleBottom-this.visibleTop)/2+re)/A.height;me=Ae-bt,fe=Ae+bt}else me=(this.visibleTop-A.top-re)/A.height,fe=(this.visibleBottom-A.top+re)/A.height;X=jn(O,me),te=jn(O,fe)}else{let re=O.total*this.heightOracle.charWidth,me=s*this.heightOracle.charWidth,fe,Ae;if(V!=null){let bt=us(O,V),Lt=((this.pixelViewport.right-this.pixelViewport.left)/2+me)/re;fe=bt-Lt,Ae=bt+Lt}else fe=(this.pixelViewport.left-me)/re,Ae=(this.pixelViewport.right+me)/re;X=jn(O,fe),te=jn(O,Ae)}X>A.from&&v(A.from,X,A,O),te<A.to&&v(te,A.to,A,O)}return b}gapSize(e,t,n,s){let h=us(s,n)-us(s,t);return this.heightOracle.lineWrapping?e.height*h:s.total*this.heightOracle.charWidth*h}updateLineGaps(e){Hn.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ge.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];E.Xs.spans(e,this.viewport.from,this.viewport.to,{span(s,h){t.push({from:s,to:h})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some((s,h)=>s.from!=t[h].from||s.to!=t[h].to);return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ki(this.heightMap.lineAt(e,Zt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return Ki(this.heightMap.lineAt(this.scaler.fromDOM(e),Zt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ki(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Vn{constructor(e,t){this.from=e,this.to=t}}function zr(o,e,t){let n=[],s=o,h=0;return E.Xs.spans(t,o,e,{span(){},point(u,b){u>s&&(n.push({from:s,to:u}),h+=u-s),s=b}},20),s<e&&(n.push({from:s,to:e}),h+=e-s),{total:h,ranges:n}}function jn({total:o,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(o*t);for(let s=0;;s++){let{from:h,to:u}=e[s],b=u-h;if(n<=b)return h+n;n-=b}}function us(o,e){let t=0;for(let{from:n,to:s}of o.ranges){if(e<=s){t+=e-n;break}t+=s-n}return t/o.total}function $o(o,e){for(let t of o)if(e(t))return t}const Mi={toDOM(o){return o},fromDOM(o){return o},scale:1};class ds{constructor(e,t,n){let s=0,h=0,u=0;this.viewports=n.map(({from:b,to:v})=>{let A=t.lineAt(b,Zt.ByPos,e,0,0).top,O=t.lineAt(v,Zt.ByPos,e,0,0).bottom;return s+=O-A,{from:b,to:v,top:A,bottom:O,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let b of this.viewports)b.domTop=u+(b.top-h)*this.scale,u=b.domBottom=b.domTop+(b.bottom-b.top),h=b.bottom}toDOM(e){for(let t=0,n=0,s=0;;t++){let h=t<this.viewports.length?this.viewports[t]:null;if(!h||e<h.top)return s+(e-n)*this.scale;if(e<=h.bottom)return h.domTop+(e-h.top);n=h.bottom,s=h.domBottom}}fromDOM(e){for(let t=0,n=0,s=0;;t++){let h=t<this.viewports.length?this.viewports[t]:null;if(!h||e<h.domTop)return n+(e-s)/this.scale;if(e<=h.domBottom)return h.top+(e-h.domTop);n=h.bottom,s=h.domBottom}}}function Ki(o,e){if(e.scale==1)return o;let t=e.toDOM(o.top),n=e.toDOM(o.bottom);return new Li(o.from,o.length,t,n-t,Array.isArray(o._content)?o._content.map(s=>Ki(s,e)):o._content)}const Rn=E.r$.define({combine:o=>o.join(" ")}),Us=E.r$.define({combine:o=>o.indexOf(!0)>-1}),Qn=ae.V.newName(),Gs=ae.V.newName(),qs=ae.V.newName(),Hr={"&light":"."+Gs,"&dark":"."+qs};function Ks(o,e,t){return new ae.V(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,s=>{if(s=="&")return o;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):o+" "+n}})}const Sl=Ks("."+Qn,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Hr),ps="\uFFFF";class Vr{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(E.yy.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=ps}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let s=e;;){this.findPointBefore(n,s);let h=this.text.length;this.readNode(s);let u=s.nextSibling;if(u==t)break;let b=De.get(s),v=De.get(u);(b&&v?b.breakAfter:(b?b.breakAfter:ue(s))||ue(u)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>h)&&this.lineBreak(),s=u}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let h=-1,u=1,b;if(this.lineSeparator?(h=t.indexOf(this.lineSeparator,n),u=this.lineSeparator.length):(b=s.exec(t))&&(h=b.index,u=b[0].length),this.append(t.slice(n,h<0?t.length:h)),h<0)break;if(this.lineBreak(),u>1)for(let v of this.points)v.node==e&&v.pos>this.text.length&&(v.pos-=u-1);n=h+u}}readNode(e){if(e.cmIgnore)return;let t=De.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let s=n.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Yi(e,n.node,n.offset)?t:0))}}function Yi(o,e,t){for(;;){if(!e||t<Ot(e))return!1;if(e==o)return!0;t=ft(e)+1,e=e.parentNode}}class Ys{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Zs{constructor(e,t,n,s){this.typeOver=s,this.bounds=null,this.text="";let{impreciseHead:h,impreciseAnchor:u}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let b=h||u?[]:gs(e),v=new Vr(b,e.state);v.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=v.text,this.newSel=Xn(b,this.bounds.from)}else{let b=e.observer.selectionRange,v=h&&h.node==b.focusNode&&h.offset==b.focusOffset||!Xe(e.contentDOM,b.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(b.focusNode,b.focusOffset),A=u&&u.node==b.anchorNode&&u.offset==b.anchorOffset||!Xe(e.contentDOM,b.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(b.anchorNode,b.anchorOffset),O=e.viewport;if(($.ios||$.chrome)&&e.state.selection.main.empty&&v!=A&&(O.from>0||O.to<e.state.doc.length)){let V=Math.min(v,A),X=Math.max(v,A),te=O.from-V,re=O.to-X;(te==0||te==1||V==0)&&(re==0||re==-1||X==e.state.doc.length)&&(v=0,A=e.state.doc.length)}this.newSel=E.jT.single(A,v)}}}function jr(o,e){let t,{newSel:n}=e,s=o.state.selection.main,h=o.inputState.lastKeyTime>Date.now()-100?o.inputState.lastKeyCode:-1;if(e.bounds){let{from:u,to:b}=e.bounds,v=s.from,A=null;(h===8||$.android&&e.text.length<b-u)&&(v=s.to,A="end");let O=Fo(o.state.doc.sliceString(u,b,ps),e.text,v-u,A);O&&($.chrome&&h==13&&O.toB==O.from+2&&e.text.slice(O.from,O.toB)==ps+ps&&O.toB--,t={from:u+O.from,to:u+O.toA,insert:E.xv.of(e.text.slice(O.from,O.toB).split(ps))})}else n&&(!o.hasFocus&&o.state.facet($i)||n.main.eq(s))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!s.empty&&n&&n.main.empty?t={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,s.to)}:t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:o.state.doc.slice(s.from,t.from).append(t.insert).append(o.state.doc.slice(t.to,s.to))}:($.mac||$.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&o.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=E.jT.single(n.main.anchor-1,n.main.head-1)),t={from:s.from,to:s.to,insert:E.xv.of([" "])}):$.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&o.lineWrapping&&(n&&(n=E.jT.single(n.main.anchor-1,n.main.head-1)),t={from:s.from,to:s.to,insert:E.xv.of([" "])}),t){if($.ios&&o.inputState.flushIOSKey(t)||$.android&&(t.to==s.to&&(t.from==s.from||t.from==s.from-1&&o.state.sliceDoc(t.from,s.from)==" ")&&t.insert.length==1&&t.insert.lines==2&&ke(o.contentDOM,"Enter",13)||(t.from==s.from-1&&t.to==s.to&&t.insert.length==0||h==8&&t.insert.length<t.to-t.from&&t.to>s.head)&&ke(o.contentDOM,"Backspace",8)||t.from==s.from&&t.to==s.to+1&&t.insert.length==0&&ke(o.contentDOM,"Delete",46)))return!0;let u=t.insert.toString();o.inputState.composing>=0&&o.inputState.composing++;let b,v=()=>b||(b=Qr(o,t,n));return o.state.facet(Ie).some(A=>A(o,t.from,t.to,u,v))||o.dispatch(v()),!0}else if(n&&!n.main.eq(s)){let u=!1,b="select";return o.inputState.lastSelectionTime>Date.now()-50&&(o.inputState.lastSelectionOrigin=="select"&&(u=!0),b=o.inputState.lastSelectionOrigin),o.dispatch({selection:n,scrollIntoView:u,userEvent:b}),!0}else return!1}function Qr(o,e,t){let n,s=o.state,h=s.selection.main;if(e.from>=h.from&&e.to<=h.to&&e.to-e.from>=(h.to-h.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&o.inputState.composing<0){let b=h.from<e.from?s.sliceDoc(h.from,e.from):"",v=h.to>e.to?s.sliceDoc(e.to,h.to):"";n=s.replaceSelection(o.state.toText(b+e.insert.sliceString(0,void 0,o.state.lineBreak)+v))}else{let b=s.changes(e),v=t&&t.main.to<=b.newLength?t.main:void 0;if(s.selection.ranges.length>1&&o.inputState.composing>=0&&e.to<=h.to&&e.to>=h.to-10){let A=o.state.sliceDoc(e.from,e.to),O,V=t&&g(o,t.main.head);if(V){let re=e.insert.length-(e.to-e.from);O={from:V.from,to:V.to-re}}else O=o.state.doc.lineAt(h.head);let X=h.to-e.to,te=h.to-h.from;n=s.changeByRange(re=>{if(re.from==h.from&&re.to==h.to)return{changes:b,range:v||re.map(b)};let me=re.to-X,fe=me-A.length;if(re.to-re.from!=te||o.state.sliceDoc(fe,me)!=A||re.to>=O.from&&re.from<=O.to)return{range:re};let Ae=s.changes({from:fe,to:me,insert:e.insert}),bt=re.to-h.to;return{changes:Ae,range:v?E.jT.range(Math.max(0,v.anchor+bt),Math.max(0,v.head+bt)):re.map(Ae)}})}else n={changes:b,selection:v&&s.selection.replaceRange(v)}}let u="input.type";return(o.composing||o.inputState.compositionPendingChange&&o.inputState.compositionEndedAt>Date.now()-50)&&(o.inputState.compositionPendingChange=!1,u+=".compose",o.inputState.compositionFirstChange&&(u+=".start",o.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:u,scrollIntoView:!0})}function Fo(o,e,t,n){let s=Math.min(o.length,e.length),h=0;for(;h<s&&o.charCodeAt(h)==e.charCodeAt(h);)h++;if(h==s&&o.length==e.length)return null;let u=o.length,b=e.length;for(;u>0&&b>0&&o.charCodeAt(u-1)==e.charCodeAt(b-1);)u--,b--;if(n=="end"){let v=Math.max(0,h-Math.min(u,b));t-=u+v-h}if(u<h&&o.length<e.length){let v=t<=h&&t>=u?h-t:0;h-=v,b=h+(b-u),u=h}else if(b<h){let v=t<=h&&t>=b?h-t:0;h-=v,u=h+(u-b),b=h}return{from:h,toA:u,toB:b}}function gs(o){let e=[];if(o.root.activeElement!=o.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:h}=o.observer.selectionRange;return t&&(e.push(new Ys(t,n)),(s!=t||h!=n)&&e.push(new Ys(s,h))),e}function Xn(o,e){if(o.length==0)return null;let t=o[0].pos,n=o.length==2?o[1].pos:t;return t>-1&&n>-1?E.jT.single(t+e,n+e):null}const Wo={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},_s=$.ie&&$.ie_version<=11;class xi{constructor(e){this.view=e,this.active=!1,this.selectionRange=new $t,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);($.ie&&$.ie_version<=11||$.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),_s&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){e.type=="change"&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,s=this.selectionRange;if(n.state.facet($i)?n.root.activeElement!=this.dom:!Ee(n.dom,s))return;let h=s.anchorNode&&n.docView.nearest(s.anchorNode);if(h&&h.ignoreEvent(e)){t||(this.selectionChanged=!1);return}($.ie&&$.ie_version<=11||$.android&&$.chrome)&&!n.state.selection.main.empty&&s.focusNode&&vt(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=nt(e.root);if(!t)return!1;let n=$.safari&&e.root.nodeType==11&&lt(this.dom.ownerDocument)==this.dom&&zo(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let s=Ee(this.dom,n);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&$e(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Wo),_s&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),_s&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let s=()=>{let h=this.delayedAndroidKey;h&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=h.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&h.force&&ke(this.dom,h.key,h.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,s=!1;for(let h of e){let u=this.readMutation(h);u&&(u.typeOver&&(s=!0),t==-1?{from:t,to:n}=u:(t=Math.min(u.from,t),n=Math.max(u.to,n)))}return{from:t,to:n,typeOver:s}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),s=this.selectionChanged&&Ee(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let h=new Zs(this.view,e,t,n);return this.view.docView.domChanged={newSel:h.newSel?h.newSel.main:null},h}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,s=jr(this.view,t);return this.view.state==n&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=er(t,e.previousSibling||e.target.previousSibling,-1),s=er(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener("change",this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener("change",this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function er(o,e,t){for(;e;){let n=De.get(e);if(n&&n.parent==o)return n;let s=e.parentNode;e=s!=o.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function Xr(o,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,h=e.endOffset,u=o.docView.domAtPos(o.state.selection.main.anchor);return vt(u.node,u.offset,s,h)&&([t,n,s,h]=[s,h,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:h}}function zo(o,e){if(e.getComposedRanges){let s=e.getComposedRanges(o.root)[0];if(s)return Xr(o,s)}let t=null;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return o.contentDOM.addEventListener("beforeinput",n,!0),o.dom.ownerDocument.execCommand("indent"),o.contentDOM.removeEventListener("beforeinput",n,!0),t?Xr(o,t):null}class Jt{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(n=>n.forEach(s=>t(s,this)))||(n=>this.update(n)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Ne(e.parent)||document,this.viewState=new Js(e.state||E.yy.create(e)),e.scrollTo&&e.scrollTo.is(Ni)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Hi).map(n=>new wn(n));for(let n of this.plugins)n.update(this);this.observer=new xi(this),this.inputState=new Ao(this),this.inputState.ensureHandlers(this.plugins),this.docView=new ss(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...e){let t=e.length==1&&e[0]instanceof E.YW?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,s,h=this.state;for(let X of e){if(X.startState!=h)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");h=X.state}if(this.destroyed){this.viewState.state=h;return}let u=this.hasFocus,b=0,v=null;e.some(X=>X.annotation(Ir))?(this.inputState.notifiedFocused=u,b=1):u!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=u,v=Nr(h,u),v||(b=1));let A=this.observer.delayedAndroidKey,O=null;if(A?(this.observer.clearDelayedAndroidKey(),O=this.observer.readChange(),(O&&!this.state.doc.eq(h.doc)||!this.state.selection.eq(h.selection))&&(O=null)):this.observer.clear(),h.facet(E.yy.phrases)!=this.state.facet(E.yy.phrases))return this.setState(h);s=cn.create(this,h,e),s.flags|=b;let V=this.viewState.scrollTarget;try{this.updateState=2;for(let X of e){if(V&&(V=V.map(X.changes)),X.scrollIntoView){let{main:te}=X.state.selection;V=new ni(te.empty?te:E.jT.cursor(te.head,te.head>te.anchor?-1:1))}for(let te of X.effects)te.is(Ni)&&(V=te.value.clip(this.state))}this.viewState.update(s,V),this.bidiCache=ms.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(hn)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(X=>X.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Rn)!=s.state.facet(Rn)&&(this.viewState.mustMeasureContent=!0),(t||n||V||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let X of this.state.facet(Se))try{X(s)}catch(te){Ai(this.state,te,"update listener")}(v||O)&&Promise.resolve().then(()=>{v&&this.state==v.startState&&this.dispatch(v),O&&!jr(this,O)&&A.force&&ke(this.contentDOM,A.key,A.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new Js(e),this.plugins=e.facet(Hi).map(n=>new wn(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new ss(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Hi),n=e.state.facet(Hi);if(t!=n){let s=[];for(let h of n){let u=t.indexOf(h);if(u<0)s.push(new wn(h));else{let b=this.plugins[u];b.mustUpdate=e,s.push(b)}}for(let h of this.plugins)h.mustUpdate!=e&&h.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Ai(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,s=n.scrollTop*this.scaleY,{scrollAnchorPos:h,scrollAnchorHeight:u}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(u=-1),this.viewState.scrollAnchorHeight=-1;try{for(let b=0;;b++){if(u<0)if(Fe(n))h=-1,u=this.viewState.heightMap.height;else{let te=this.viewState.scrollAnchorAt(s);h=te.from,u=te.top}this.updateState=1;let v=this.viewState.measure(this);if(!v&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(b>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let A=[];v&4||([this.measureRequests,A]=[A,this.measureRequests]);let O=A.map(te=>{try{return te.read(this)}catch(re){return Ai(this.state,re),Jr}}),V=cn.create(this,this.state,[]),X=!1;V.flags|=v,t?t.flags|=v:t=V,this.updateState=2,V.empty||(this.updatePlugins(V),this.inputState.update(V),this.updateAttrs(),X=this.docView.update(V),X&&this.docViewUpdate());for(let te=0;te<A.length;te++)if(O[te]!=Jr)try{let re=A[te];re.write&&re.write(O[te],this)}catch(re){Ai(this.state,re)}if(X&&this.docView.updateSelection(!0),!V.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,u=-1;continue}else{let re=(h<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(h).top)-u;if(re>1||re<-1){s=s+re,n.scrollTop=s/this.scaleY,u=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let b of this.state.facet(Se))b(t)}get themeClasses(){return Qn+" "+(this.state.facet(Us)?qs:Gs)+" "+this.state.facet(Rn)}updateAttrs(){let e=tr(this,Fn,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet($i)?"true":"false",class:"cm-content",style:`${$.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),tr(this,Sn,t);let n=this.observer.ignore(()=>{let s=gt(this.contentDOM,this.contentAttrs,t),h=gt(this.dom,this.editorAttrs,e);return s||h});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let s of n.effects)if(s.is(Jt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let h=this.announceDOM.appendChild(document.createElement("div"));h.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(hn);let e=this.state.facet(Jt.cspNonce);ae.V.mount(this.root,this.styleModules.concat(Sl).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Fs(this,e,$s(this,e,t,n))}moveByGroup(e,t){return Fs(this,e,$s(this,e,t,n=>wl(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),h=n[t?n.length-1:0];return E.jT.cursor(h.side(t,s)+e.from,h.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,n=!0){return Ns(this,e,t,n)}moveVertically(e,t,n){return Fs(this,e,Co(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),rs(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let s=this.state.doc.lineAt(e),h=this.bidiSpans(s),u=h[U.find(h,e-s.from,-1,t)];return Qt(n,u.dir==rt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(_e)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ho)return d(e.length);let t=this.textDirectionAt(e.from),n;for(let h of this.bidiCache)if(h.from==e.from&&h.dir==t&&(h.fresh||ne(h.isolates,n=ln(this,e))))return h.order;n||(n=ln(this,e));let s=a(e.text,t,n);return this.bidiCache.push(new ms(e.from,e.to,t,n,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||$.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Le(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ni.of(new ni(typeof e=="number"?E.jT.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Ni.of(new ni(E.jT.cursor(n.from),"start","start",n.top-e,t,!0))}static domEventHandlers(e){return di.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return di.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=ae.V.newName(),s=[Rn.of(n),hn.of(Ks(`.${n}`,e))];return t&&t.dark&&s.push(Us.of(!0)),s}static baseTheme(e){return E.Wl.lowest(hn.of(Ks("."+Qn,e,Hr)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),s=n&&De.get(n)||De.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Jt.styleModule=hn,Jt.inputHandler=Ie,Jt.scrollHandler=Ci,Jt.focusChangeEffect=ot,Jt.perLineTextDirection=_e,Jt.exceptionSink=de,Jt.updateListener=Se,Jt.editable=$i,Jt.mouseSelectionStyle=q,Jt.dragMovesSelection=Q,Jt.clickAddsSelectionRange=B,Jt.decorations=Vi,Jt.outerDecorations=Fi,Jt.atomicRanges=Gi,Jt.bidiIsolatedRanges=on,Jt.scrollMargins=Es,Jt.darkTheme=Us,Jt.cspNonce=E.r$.define({combine:o=>o.length?o[0]:""}),Jt.contentAttributes=Sn,Jt.editorAttributes=Fn,Jt.lineWrapping=Jt.contentAttributes.of({class:"cm-lineWrapping"}),Jt.announce=E.Py.define();const Ho=4096,Jr={};class ms{constructor(e,t,n,s,h,u){this.from=e,this.to=t,this.dir=n,this.isolates=s,this.fresh=h,this.order=u}static update(e,t){if(t.empty&&!e.some(h=>h.fresh))return e;let n=[],s=e.length?e[e.length-1].dir:rt.LTR;for(let h=Math.max(0,e.length-10);h<e.length;h++){let u=e[h];u.dir==s&&!t.touchesRange(u.from,u.to)&&n.push(new ms(t.mapPos(u.from,1),t.mapPos(u.to,-1),u.dir,u.isolates,!1,u.order))}return n}}function tr(o,e,t){for(let n=o.state.facet(e),s=n.length-1;s>=0;s--){let h=n[s],u=typeof h=="function"?h(o):h;u&&Ve(u,t)}return t}const Vo=$.mac?"mac":$.windows?"win":$.linux?"linux":"key";function Bn(o,e){const t=o.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let s,h,u,b;for(let v=0;v<t.length-1;++v){const A=t[v];if(/^(cmd|meta|m)$/i.test(A))b=!0;else if(/^a(lt)?$/i.test(A))s=!0;else if(/^(c|ctrl|control)$/i.test(A))h=!0;else if(/^s(hift)?$/i.test(A))u=!0;else if(/^mod$/i.test(A))e=="mac"?b=!0:h=!0;else throw new Error("Unrecognized modifier name: "+A)}return s&&(n="Alt-"+n),h&&(n="Ctrl-"+n),b&&(n="Meta-"+n),u&&(n="Shift-"+n),n}function dn(o,e,t){return e.altKey&&(o="Alt-"+o),e.ctrlKey&&(o="Ctrl-"+o),e.metaKey&&(o="Meta-"+o),t!==!1&&e.shiftKey&&(o="Shift-"+o),o}const jo=E.Wl.default(Jt.domEventHandlers({keydown(o,e){return sr(Gr(e.state),o,e,"editor")}})),Ur=E.r$.define({enables:jo}),ir=new WeakMap;function Gr(o){let e=o.facet(Ur),t=ir.get(e);return t||ir.set(e,t=Qo(e.reduce((n,s)=>n.concat(s),[]))),t}function nr(o,e,t){return sr(Gr(o.state),e,o,t)}let ui=null;const En=4e3;function Qo(o,e=Vo){let t=Object.create(null),n=Object.create(null),s=(u,b)=>{let v=n[u];if(v==null)n[u]=b;else if(v!=b)throw new Error("Key binding "+u+" is used both as a regular binding and as a multi-stroke prefix")},h=(u,b,v,A,O)=>{var V,X;let te=t[u]||(t[u]=Object.create(null)),re=b.split(/ (?!$)/).map(Ae=>Bn(Ae,e));for(let Ae=1;Ae<re.length;Ae++){let bt=re.slice(0,Ae).join(" ");s(bt,!0),te[bt]||(te[bt]={preventDefault:!0,stopPropagation:!1,run:[Lt=>{let ut=ui={view:Lt,prefix:bt,scope:u};return setTimeout(()=>{ui==ut&&(ui=null)},En),!0}]})}let me=re.join(" ");s(me,!1);let fe=te[me]||(te[me]={preventDefault:!1,stopPropagation:!1,run:((X=(V=te._any)===null||V===void 0?void 0:V.run)===null||X===void 0?void 0:X.slice())||[]});v&&fe.run.push(v),A&&(fe.preventDefault=!0),O&&(fe.stopPropagation=!0)};for(let u of o){let b=u.scope?u.scope.split(" "):["editor"];if(u.any)for(let A of b){let O=t[A]||(t[A]=Object.create(null));O._any||(O._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let V in O)O[V].run.push(u.any)}let v=u[e]||u.key;if(v)for(let A of b)h(A,v,u.run,u.preventDefault,u.stopPropagation),u.shift&&h(A,"Shift-"+v,u.shift,u.preventDefault,u.stopPropagation)}return t}function sr(o,e,t,n){let s=it(e),h=(0,E.gm)(s,0),u=(0,E.nZ)(h)==s.length&&s!=" ",b="",v=!1,A=!1,O=!1;ui&&ui.view==t&&ui.scope==n&&(b=ui.prefix+" ",zs.indexOf(e.keyCode)<0&&(A=!0,ui=null));let V=new Set,X=fe=>{if(fe){for(let Ae of fe.run)if(!V.has(Ae)&&(V.add(Ae),Ae(t,e)))return fe.stopPropagation&&(O=!0),!0;fe.preventDefault&&(fe.stopPropagation&&(O=!0),A=!0)}return!1},te=o[n],re,me;return te&&(X(te[b+dn(s,e,!u)])?v=!0:u&&(e.altKey||e.metaKey||e.ctrlKey)&&!($.windows&&e.ctrlKey&&e.altKey)&&(re=xe[e.keyCode])&&re!=s?(X(te[b+dn(re,e,!0)])||e.shiftKey&&(me=z[e.keyCode])!=s&&me!=re&&X(te[b+dn(me,e,!1)]))&&(v=!0):u&&e.shiftKey&&X(te[b+dn(s,e,!0)])&&(v=!0),!v&&X(te._any)&&(v=!0)),A&&(v=!0),v&&O&&e.stopPropagation(),v}class pn{constructor(e,t,n,s,h){this.className=e,this.left=t,this.top=n,this.width=s,this.height=h}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let s=e.coordsAtPos(n.head,n.assoc||1);if(!s)return[];let h=gi(e);return[new pn(t,s.left-h.left,s.top-h.top,null,s.bottom-s.top)]}else return Xo(e,t,n)}}function gi(o){let e=o.scrollDOM.getBoundingClientRect();return{left:(o.textDirection==rt.LTR?e.left:e.right-o.scrollDOM.clientWidth*o.scaleX)-o.scrollDOM.scrollLeft*o.scaleX,top:e.top-o.scrollDOM.scrollTop*o.scaleY}}function ys(o,e,t){let n=E.jT.cursor(e);return{from:Math.max(t.from,o.moveToLineBoundary(n,!1,!0).from),to:Math.min(t.to,o.moveToLineBoundary(n,!0,!0).from),type:Ct.Text}}function Xo(o,e,t){if(t.to<=o.viewport.from||t.from>=o.viewport.to)return[];let n=Math.max(t.from,o.viewport.from),s=Math.min(t.to,o.viewport.to),h=o.textDirection==rt.LTR,u=o.contentDOM,b=u.getBoundingClientRect(),v=gi(o),A=u.querySelector(".cm-line"),O=A&&window.getComputedStyle(A),V=b.left+(O?parseInt(O.paddingLeft)+Math.min(0,parseInt(O.textIndent)):0),X=b.right-(O?parseInt(O.paddingRight):0),te=Is(o,n),re=Is(o,s),me=te.type==Ct.Text?te:null,fe=re.type==Ct.Text?re:null;if(me&&(o.lineWrapping||te.widgetLineBreaks)&&(me=ys(o,n,me)),fe&&(o.lineWrapping||re.widgetLineBreaks)&&(fe=ys(o,s,fe)),me&&fe&&me.from==fe.from)return bt(Lt(t.from,t.to,me));{let Bt=me?Lt(t.from,null,me):ut(te,!1),Wt=fe?Lt(null,t.to,fe):ut(re,!0),pi=[];return(me||te).to<(fe||re).from-(me&&fe?1:0)||te.widgetLineBreaks>1&&Bt.bottom+o.defaultLineHeight/2<Wt.top?pi.push(Ae(V,Bt.bottom,X,Wt.top)):Bt.bottom<Wt.top&&o.elementAtHeight((Bt.bottom+Wt.top)/2).type==Ct.Text&&(Bt.bottom=Wt.top=(Bt.bottom+Wt.top)/2),bt(Bt).concat(pi).concat(bt(Wt))}function Ae(Bt,Wt,pi,ki){return new pn(e,Bt-v.left,Wt-v.top-.01,pi-Bt,ki-Wt+.01)}function bt({top:Bt,bottom:Wt,horizontal:pi}){let ki=[];for(let _i=0;_i<pi.length;_i+=2)ki.push(Ae(pi[_i],Bt,pi[_i+1],Wt));return ki}function Lt(Bt,Wt,pi){let ki=1e9,_i=-1e9,Ps=[];function wo(en,tn,$n,xn,is){let Wi=o.coordsAtPos(en,en==pi.to?-2:2),Xi=o.coordsAtPos($n,$n==pi.from?2:-2);!Wi||!Xi||(ki=Math.min(Wi.top,Xi.top,ki),_i=Math.max(Wi.bottom,Xi.bottom,_i),is==rt.LTR?Ps.push(h&&tn?V:Wi.left,h&&xn?X:Xi.right):Ps.push(!h&&xn?V:Xi.left,!h&&tn?X:Wi.right))}let Ms=Bt!=null?Bt:pi.from,Ds=Wt!=null?Wt:pi.to;for(let en of o.visibleRanges)if(en.to>Ms&&en.from<Ds)for(let tn=Math.max(en.from,Ms),$n=Math.min(en.to,Ds);;){let xn=o.state.doc.lineAt(tn);for(let is of o.bidiSpans(xn)){let Wi=is.from+xn.from,Xi=is.to+xn.from;if(Wi>=$n)break;Xi>tn&&wo(Math.max(Wi,tn),Bt==null&&Wi<=Ms,Math.min(Xi,$n),Wt==null&&Xi>=Ds,is.dir)}if(tn=xn.to+1,tn>=$n)break}return Ps.length==0&&wo(Ms,Bt==null,Ds,Wt==null,o.textDirection),{top:ki,bottom:_i,horizontal:Ps}}function ut(Bt,Wt){let pi=b.top+(Wt?Bt.top:Bt.bottom);return{top:pi,bottom:pi,horizontal:[]}}}function bs(o,e){return o.constructor==e.constructor&&o.eq(e)}class Jo{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(vs)!=e.state.facet(vs)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(vs);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!bs(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[n].constructor&&s.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const vs=E.r$.define();function qr(o){return[di.define(e=>new Jo(e,o)),vs.of(o)]}const Kr=!$.ios,Ln=E.r$.define({combine(o){return(0,E.BO)(o,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Uo(o={}){return[Ln.of(o),Go,qo,or,ei.of(!0)]}function Ol(o){return o.facet(Ln)}function Yr(o){return o.startState.facet(Ln)!=o.state.facet(Ln)}const Go=qr({above:!0,markers(o){let{state:e}=o,t=e.facet(Ln),n=[];for(let s of e.selection.ranges){let h=s==e.selection.main;if(s.empty?!h||Kr:t.drawRangeCursor){let u=h?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",b=s.empty?s:E.jT.cursor(s.head,s.head>s.anchor?-1:1);for(let v of pn.forRange(o,u,b))n.push(v)}}return n},update(o,e){o.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Yr(o);return t&&rr(o.state,e),o.docChanged||o.selectionSet||t},mount(o,e){rr(e.state,o)},class:"cm-cursorLayer"});function rr(o,e){e.style.animationDuration=o.facet(Ln).cursorBlinkRate+"ms"}const qo=qr({above:!1,markers(o){return o.state.selection.ranges.map(e=>e.empty?[]:pn.forRange(o,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(o,e){return o.docChanged||o.selectionSet||o.viewportChanged||Yr(o)},class:"cm-selectionLayer"}),Jn={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Kr&&(Jn[".cm-line"].caretColor="transparent !important",Jn[".cm-content"]={caretColor:"transparent !important"});const or=E.Wl.highest(Jt.theme(Jn)),Zr=E.Py.define({map(o,e){return o==null?null:e.mapPos(o)}}),Un=E.QQ.define({create(){return null},update(o,e){return o!=null&&(o=e.changes.mapPos(o)),e.effects.reduce((t,n)=>n.is(Zr)?n.value:t,o)}}),In=di.fromClass(class{constructor(o){this.view=o,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(o){var e;let t=o.state.field(Un);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(o.startState.field(Un)!=t||o.docChanged||o.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:o}=this,e=o.state.field(Un),t=e!=null&&o.coordsAtPos(e);if(!t)return null;let n=o.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+o.scrollDOM.scrollLeft*o.scaleX,top:t.top-n.top+o.scrollDOM.scrollTop*o.scaleY,height:t.bottom-t.top}}drawCursor(o){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;o?(this.cursor.style.left=o.left/e+"px",this.cursor.style.top=o.top/t+"px",this.cursor.style.height=o.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(o){this.view.state.field(Un)!=o&&this.view.dispatch({effects:Zr.of(o)})}},{eventObservers:{dragover(o){this.setDropPos(this.view.posAtCoords({x:o.clientX,y:o.clientY}))},dragleave(o){(o.target==this.view.contentDOM||!this.view.contentDOM.contains(o.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Gn(){return[Un,In]}function _r(o,e,t,n,s){e.lastIndex=0;for(let h=o.iterRange(t,n),u=t,b;!h.next().done;u+=h.value.length)if(!h.lineBreak)for(;b=e.exec(h.value);)s(u+b.index,b)}function gn(o,e){let t=o.visibleRanges;if(t.length==1&&t[0].from==o.viewport.from&&t[0].to==o.viewport.to)return t;let n=[];for(let{from:s,to:h}of t)s=Math.max(o.state.doc.lineAt(s).from,s-e),h=Math.min(o.state.doc.lineAt(h).to,h+e),n.length&&n[n.length-1].to>=s?n[n.length-1].to=h:n.push({from:s,to:h});return n}class qn{constructor(e){const{regexp:t,decoration:n,decorate:s,boundary:h,maxLength:u=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(b,v,A,O)=>s(O,A,A+b[0].length,b,v);else if(typeof n=="function")this.addMatch=(b,v,A,O)=>{let V=n(b,v,A);V&&O(A,A+b[0].length,V)};else if(n)this.addMatch=(b,v,A,O)=>O(A,A+b[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=h,this.maxLength=u}createDeco(e){let t=new E.f_,n=t.add.bind(t);for(let{from:s,to:h}of gn(e,this.maxLength))_r(e.state.doc,this.regexp,s,h,(u,b)=>this.addMatch(b,e,u,n));return t.finish()}updateDeco(e,t){let n=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((h,u,b,v)=>{v>e.view.viewport.from&&b<e.view.viewport.to&&(n=Math.min(b,n),s=Math.max(v,s))}),e.viewportChanged||s-n>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),n,s):t}updateRange(e,t,n,s){for(let h of e.visibleRanges){let u=Math.max(h.from,n),b=Math.min(h.to,s);if(b>u){let v=e.state.doc.lineAt(u),A=v.to<b?e.state.doc.lineAt(b):v,O=Math.max(h.from,v.from),V=Math.min(h.to,A.to);if(this.boundary){for(;u>v.from;u--)if(this.boundary.test(v.text[u-1-v.from])){O=u;break}for(;b<A.to;b++)if(this.boundary.test(A.text[b-A.from])){V=b;break}}let X=[],te,re=(me,fe,Ae)=>X.push(Ae.range(me,fe));if(v==A)for(this.regexp.lastIndex=O-v.from;(te=this.regexp.exec(v.text))&&te.index<V-v.from;)this.addMatch(te,e,te.index+v.from,re);else _r(e.state.doc,this.regexp,O,V,(me,fe)=>this.addMatch(fe,e,me,re));t=t.update({filterFrom:O,filterTo:V,filter:(me,fe)=>me<O||fe>V,add:X})}}return t}}const lr=/x/.unicode!=null?"gu":"g",eo=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\u2066\u2067\u2069\uFEFF\uFFF9-\uFFFC]`,lr),Ko={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let ar=null;function Yo(){var o;if(ar==null&&typeof document!="undefined"&&document.body){let e=document.body.style;ar=((o=e.tabSize)!==null&&o!==void 0?o:e.MozTabSize)!=null}return ar||!1}const hr=E.r$.define({combine(o){let e=(0,E.BO)(o,{render:null,specialChars:eo,addSpecialChars:null});return(e.replaceTabs=!Yo())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,lr)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,lr)),e}});function Cl(o={}){return[hr.of(o),io()]}let to=null;function io(){return to||(to=di.fromClass(class{constructor(o){this.view=o,this.decorations=Ge.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(o.state.facet(hr)),this.decorations=this.decorator.createDeco(o)}makeDecorator(o){return new qn({regexp:o.specialChars,decoration:(e,t,n)=>{let{doc:s}=t.state,h=(0,E.gm)(e[0],0);if(h==9){let u=s.lineAt(n),b=t.state.tabSize,v=(0,E.IS)(u.text,b,n-u.from);return Ge.replace({widget:new el((b-v%b)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[h]||(this.decorationCache[h]=Ge.replace({widget:new _o(o,h)}))},boundary:o.replaceTabs?void 0:/[^]/})}update(o){let e=o.state.facet(hr);o.startState.facet(hr)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(o.view)):this.decorations=this.decorator.updateDeco(o,this.decorations)}},{decorations:o=>o.decorations}))}const Zo="\u2022";function Al(o){return o>=32?Zo:o==10?"\u2424":String.fromCharCode(9216+o)}class _o extends Qe{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Al(this.code),n=e.state.phrase("Control character")+" "+(Ko[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,n,t);if(s)return s;let h=document.createElement("span");return h.textContent=t,h.title=n,h.setAttribute("aria-label",n),h.className="cm-specialChar",h}ignoreEvent(){return!1}}class el extends Qe{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const cr=null;function tl(){return[cr,Sn.of(o=>{var e;return((e=o.plugin(cr))===null||e===void 0?void 0:e.attrs)||null})]}function il(){return so}const no=Ge.line({class:"cm-activeLine"}),so=di.fromClass(class{constructor(o){this.decorations=this.getDeco(o)}update(o){(o.docChanged||o.selectionSet)&&(this.decorations=this.getDeco(o.view))}getDeco(o){let e=-1,t=[];for(let n of o.state.selection.ranges){let s=o.lineBlockAt(n.head);s.from>e&&(t.push(no.range(s.from)),e=s.from)}return Ge.set(t)}},{decorations:o=>o.decorations});class Tl extends Qe{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?ct(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),s=Qt(t[0],n.direction!="rtl"),h=parseInt(n.lineHeight);return s.bottom-s.top>h*1.5?{left:s.left,right:s.right,top:s.top,bottom:s.top+h}:s}ignoreEvent(){return!1}}function Kn(o){return di.fromClass(class{constructor(e){this.view=e,this.placeholder=o?Ge.set([Ge.widget({widget:new Tl(o),side:1}).range(0)]):Ge.none}get decorations(){return this.view.state.doc.length?Ge.none:this.placeholder}},{decorations:e=>e.decorations})}const Qi=2e3;function fr(o,e,t){let n=Math.min(e.line,t.line),s=Math.max(e.line,t.line),h=[];if(e.off>Qi||t.off>Qi||e.col<0||t.col<0){let u=Math.min(e.off,t.off),b=Math.max(e.off,t.off);for(let v=n;v<=s;v++){let A=o.doc.line(v);A.length<=b&&h.push(E.jT.range(A.from+u,A.to+b))}}else{let u=Math.min(e.col,t.col),b=Math.max(e.col,t.col);for(let v=n;v<=s;v++){let A=o.doc.line(v),O=(0,E.Gz)(A.text,u,o.tabSize,!0);if(O<0)h.push(E.jT.cursor(A.to));else{let V=(0,E.Gz)(A.text,b,o.tabSize);h.push(E.jT.range(A.from+O,A.from+V))}}}return h}function ro(o,e){let t=o.coordsAtPos(o.viewport.from);return t?Math.round(Math.abs((t.left-e)/o.defaultCharacterWidth)):-1}function oo(o,e){let t=o.posAtCoords({x:e.clientX,y:e.clientY},!1),n=o.state.doc.lineAt(t),s=t-n.from,h=s>Qi?-1:s==n.length?ro(o,e.clientX):(0,E.IS)(n.text,o.state.tabSize,t-n.from);return{line:n.number,col:h,off:s}}function ur(o,e){let t=oo(o,e),n=o.state.selection;return t?{update(s){if(s.docChanged){let h=s.changes.mapPos(s.startState.doc.line(t.line).from),u=s.state.doc.lineAt(h);t={line:u.number,col:t.col,off:Math.min(t.off,u.length)},n=n.map(s.changes)}},get(s,h,u){let b=oo(o,s);if(!b)return n;let v=fr(o.state,t,b);return v.length?u?E.jT.create(v.concat(n.ranges)):E.jT.create(v):n}}:null}function lo(o){let e=(o==null?void 0:o.eventFilter)||(t=>t.altKey&&t.button==0);return Jt.mouseSelectionStyle.of((t,n)=>e(n)?ur(t,n):null)}const ao={Alt:[18,o=>!!o.altKey],Control:[17,o=>!!o.ctrlKey],Shift:[16,o=>!!o.shiftKey],Meta:[91,o=>!!o.metaKey]},nl={style:"cursor: crosshair"};function sl(o={}){let[e,t]=ao[o.key||"Alt"],n=di.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[n,Jt.contentAttributes.of(s=>{var h;return!((h=s.plugin(n))===null||h===void 0)&&h.isDown?nl:null})]}const xs="-10000px";class ho{constructor(e,t,n,s){this.facet=t,this.createTooltipView=n,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(u=>u);let h=null;this.tooltipViews=this.tooltips.map(u=>h=n(u,h))}update(e,t){var n;let s=e.state.facet(this.facet),h=s.filter(v=>v);if(s===this.input){for(let v of this.tooltipViews)v.update&&v.update(e);return!1}let u=[],b=t?[]:null;for(let v=0;v<h.length;v++){let A=h[v],O=-1;if(A){for(let V=0;V<this.tooltips.length;V++){let X=this.tooltips[V];X&&X.create==A.create&&(O=V)}if(O<0)u[v]=this.createTooltipView(A,v?u[v-1]:null),b&&(b[v]=!!A.above);else{let V=u[v]=this.tooltipViews[O];b&&(b[v]=t[O]),V.update&&V.update(e)}}}for(let v of this.tooltipViews)u.indexOf(v)<0&&(this.removeTooltipView(v),(n=v.destroy)===null||n===void 0||n.call(v));return t&&(b.forEach((v,A)=>t[A]=v),t.length=b.length),this.input=s,this.tooltips=h,this.tooltipViews=u,!0}}function Pl(o={}){return mn.of(o)}function co(o){let{win:e}=o;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const mn=E.r$.define({combine:o=>{var e,t,n;return{position:$.ios?"absolute":((e=o.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=o.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=o.find(s=>s.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||co}}}),fo=new WeakMap,ks=di.fromClass(class{constructor(o){this.view=o,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=o.state.facet(mn);this.position=e.position,this.parent=e.parent,this.classes=o.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new ho(o,ws,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),o.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let o of this.manager.tooltipViews)this.intersectionObserver.observe(o.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(o){o.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(o,this.above);e&&this.observeIntersection();let t=e||o.geometryChanged,n=o.state.facet(mn);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(o,e){let t=o.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),o.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=xs,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var o,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(o=n.destroy)===null||o===void 0||o.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let o=this.view.dom.getBoundingClientRect(),e=1,t=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if($.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==xs&&s.style.left=="0px"){let h=s.getBoundingClientRect();n=Math.abs(h.top+1e4)>1||Math.abs(h.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(e=s.width/this.parent.offsetWidth,t=s.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);return{editor:o,parent:this.parent?this.container.getBoundingClientRect():o,pos:this.manager.tooltips.map((s,h)=>{let u=this.manager.tooltipViews[h];return u.getCoords?u.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(mn).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(o){var e;if(o.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let b of this.manager.tooltipViews)b.dom.style.position="absolute"}let{editor:t,space:n,scaleX:s,scaleY:h}=o,u=[];for(let b=0;b<this.manager.tooltips.length;b++){let v=this.manager.tooltips[b],A=this.manager.tooltipViews[b],{dom:O}=A,V=o.pos[b],X=o.size[b];if(!V||V.bottom<=Math.max(t.top,n.top)||V.top>=Math.min(t.bottom,n.bottom)||V.right<Math.max(t.left,n.left)-.1||V.left>Math.min(t.right,n.right)+.1){O.style.top=xs;continue}let te=v.arrow?A.dom.querySelector(".cm-tooltip-arrow"):null,re=te?7:0,me=X.right-X.left,fe=(e=fo.get(A))!==null&&e!==void 0?e:X.bottom-X.top,Ae=A.offset||ol,bt=this.view.textDirection==rt.LTR,Lt=X.width>n.right-n.left?bt?n.left:n.right-X.width:bt?Math.min(V.left-(te?14:0)+Ae.x,n.right-me):Math.max(n.left,V.left-me+(te?14:0)-Ae.x),ut=this.above[b];!v.strictSide&&(ut?V.top-(X.bottom-X.top)-Ae.y<n.top:V.bottom+(X.bottom-X.top)+Ae.y>n.bottom)&&ut==n.bottom-V.bottom>V.top-n.top&&(ut=this.above[b]=!ut);let Bt=(ut?V.top-n.top:n.bottom-V.bottom)-re;if(Bt<fe&&A.resize!==!1){if(Bt<this.view.defaultLineHeight){O.style.top=xs;continue}fo.set(A,fe),O.style.height=(fe=Bt)/h+"px"}else O.style.height&&(O.style.height="");let Wt=ut?V.top-fe-re-Ae.y:V.bottom+re+Ae.y,pi=Lt+me;if(A.overlap!==!0)for(let ki of u)ki.left<pi&&ki.right>Lt&&ki.top<Wt+fe&&ki.bottom>Wt&&(Wt=ut?ki.top-fe-2-re:ki.bottom+re+2);if(this.position=="absolute"?(O.style.top=(Wt-o.parent.top)/h+"px",O.style.left=(Lt-o.parent.left)/s+"px"):(O.style.top=Wt/h+"px",O.style.left=Lt/s+"px"),te){let ki=V.left+(bt?Ae.x:-Ae.x)-(Lt+14-7);te.style.left=ki/s+"px"}A.overlap!==!0&&u.push({left:Lt,top:Wt,right:pi,bottom:Wt+fe}),O.classList.toggle("cm-tooltip-above",ut),O.classList.toggle("cm-tooltip-below",!ut),A.positioned&&A.positioned(o.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let o of this.manager.tooltipViews)o.dom.style.top=xs}},{eventObservers:{scroll(){this.maybeMeasure()}}}),rl=Jt.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ol={x:0,y:0},ws=E.r$.define({enables:[ks,rl]}),Yn=E.r$.define({combine:o=>o.reduce((e,t)=>e.concat(t),[])});class Zn{static create(e){return new Zn(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ho(e,Yn,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let s=n[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const ll=ws.compute([Yn],o=>{let e=o.facet(Yn);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:Zn.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class uo{constructor(e,t,n,s,h){this.view=e,this.source=t,this.field=n,this.setHover=s,this.hoverTime=h,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let s,h=1;if(n instanceof We)s=n.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let b=e.coordsAtPos(s);if(!b||t.y<b.top||t.y>b.bottom||t.x<b.left-e.defaultCharacterWidth||t.x>b.right+e.defaultCharacterWidth)return;let v=e.bidiSpans(e.state.doc.lineAt(s)).find(O=>O.from<=s&&O.to>=s),A=v&&v.dir==rt.RTL?-1:1;h=t.x<b.left?-A:A}let u=this.source(e,s,h);if(u!=null&&u.then){let b=this.pending={pos:s};u.then(v=>{this.pending==b&&(this.pending=null,v&&!(Array.isArray(v)&&!v.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(v)?v:[v])}))},v=>Ai(e.state,v,"hover tooltip"))}else u&&!(Array.isArray(u)&&!u.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(u)?u:[u])})}get tooltip(){let e=this.view.plugin(ks),t=e?e.manager.tooltips.findIndex(n=>n.create==Zn.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:h}=this;if(s.length&&h&&!Ml(h.dom,e)||this.pending){let{pos:u}=s[0]||this.pending,b=(n=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:u;(u==b?this.view.posAtCoords(this.lastMove)!=u:!po(this.view,u,b,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Ss=4;function Ml(o,e){let t=o.getBoundingClientRect();return e.clientX>=t.left-Ss&&e.clientX<=t.right+Ss&&e.clientY>=t.top-Ss&&e.clientY<=t.bottom+Ss}function po(o,e,t,n,s,h){let u=o.scrollDOM.getBoundingClientRect(),b=o.documentTop+o.documentPadding.top+o.contentHeight;if(u.left>n||u.right<n||u.top>s||Math.min(u.bottom,b)<s)return!1;let v=o.posAtCoords({x:n,y:s},!1);return v>=e&&v<=t}function Dl(o,e={}){let t=E.Py.define(),n=E.QQ.define({create(){return[]},update(s,h){if(s.length&&(e.hideOnChange&&(h.docChanged||h.selection)?s=[]:e.hideOn&&(s=s.filter(u=>!e.hideOn(h,u))),h.docChanged)){let u=[];for(let b of s){let v=h.changes.mapPos(b.pos,-1,E.gc.TrackDel);if(v!=null){let A=Object.assign(Object.create(null),b);A.pos=v,A.end!=null&&(A.end=h.changes.mapPos(A.end)),u.push(A)}}s=u}for(let u of h.effects)u.is(t)&&(s=u.value),u.is(Bl)&&(s=[]);return s},provide:s=>Yn.from(s)});return[n,di.define(s=>new uo(s,o,n,t,e.hoverTime||300)),ll]}function Rl(o,e){let t=o.plugin(ks);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}function Nl(o){return o.facet(Yn).some(e=>e)}const Bl=E.Py.define(),El=null;function Nn(o){let e=o.plugin(ks);e&&e.maybeMeasure()}const Zi=E.r$.define({combine(o){let e,t;for(let n of o)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function al(o){return o?[Zi.of(o)]:[]}function go(o,e){let t=o.plugin(hl),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const hl=di.fromClass(class{constructor(o){this.input=o.state.facet(Cs),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(o));let e=o.state.facet(Zi);this.top=new yn(o,!0,e.topContainer),this.bottom=new yn(o,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(o){let e=o.state.facet(Zi);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new yn(o.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new yn(o.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=o.state.facet(Cs);if(t!=this.input){let n=t.filter(v=>v),s=[],h=[],u=[],b=[];for(let v of n){let A=this.specs.indexOf(v),O;A<0?(O=v(o.view),b.push(O)):(O=this.panels[A],O.update&&O.update(o)),s.push(O),(O.top?h:u).push(O)}this.specs=n,this.panels=s,this.top.sync(h),this.bottom.sync(u);for(let v of b)v.dom.classList.add("cm-panel"),v.mount&&v.mount()}else for(let n of this.panels)n.update&&n.update(o)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:o=>Jt.scrollMargins.of(e=>{let t=e.plugin(o);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class yn{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Os(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Os(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Os(o){let e=o.nextSibling;return o.remove(),e}const Cs=E.r$.define({enables:hl});class li extends E.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}li.prototype.elementClass="",li.prototype.toDOM=void 0,li.prototype.mapMode=E.gc.TrackBefore,li.prototype.startSide=li.prototype.endSide=-1,li.prototype.point=!0;const dr=E.r$.define(),cl={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>E.Xs.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},_n=E.r$.define();function mo(o){return[gr(),_n.of(Object.assign(Object.assign({},cl),o))]}const pr=E.r$.define({combine:o=>o.some(e=>e)});function gr(o){let e=[fl];return o&&o.fixed===!1&&e.push(pr.of(!0)),e}const fl=di.fromClass(class{constructor(o){this.view=o,this.prevViewport=o.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=o.state.facet(_n).map(e=>new bn(o,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!o.state.facet(pr),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),o.scrollDOM.insertBefore(this.dom,o.contentDOM)}update(o){if(this.updateGutters(o)){let e=this.prevViewport,t=o.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}o.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(pr)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=o.view.viewport}syncGutters(o){let e=this.dom.nextSibling;o&&this.dom.remove();let t=E.Xs.iter(this.view.state.facet(dr),this.view.viewport.from),n=[],s=this.gutters.map(h=>new yo(h,this.view.viewport,-this.view.documentPadding.top));for(let h of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(h.type)){let u=!0;for(let b of h.type)if(b.type==Ct.Text&&u){mr(t,n,b.from);for(let v of s)v.line(this.view,b,n);u=!1}else if(b.widget)for(let v of s)v.widget(this.view,b)}else if(h.type==Ct.Text){mr(t,n,h.from);for(let u of s)u.line(this.view,h,n)}else if(h.widget)for(let u of s)u.widget(this.view,h);for(let h of s)h.finish();o&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(o){let e=o.startState.facet(_n),t=o.state.facet(_n),n=o.docChanged||o.heightChanged||o.viewportChanged||!E.Xs.eq(o.startState.facet(dr),o.state.facet(dr),o.view.viewport.from,o.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(o)&&(n=!0);else{n=!0;let s=[];for(let h of t){let u=e.indexOf(h);u<0?s.push(new bn(this.view,h)):(this.gutters[u].update(o),s.push(this.gutters[u]))}for(let h of this.gutters)h.dom.remove(),s.indexOf(h)<0&&h.destroy();for(let h of s)this.dom.appendChild(h.dom);this.gutters=s}return n}destroy(){for(let o of this.gutters)o.destroy();this.dom.remove()}},{provide:o=>Jt.scrollMargins.of(e=>{let t=e.plugin(o);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==rt.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function ul(o){return Array.isArray(o)?o:[o]}function mr(o,e,t){for(;o.value&&o.from<=t;)o.from==t&&e.push(o.value),o.next()}class yo{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=E.Xs.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:s}=this,h=(t.top-this.height)/e.scaleY,u=t.height/e.scaleY;if(this.i==s.elements.length){let b=new dl(e,u,h,n);s.elements.push(b),s.dom.appendChild(b.dom)}else s.elements[this.i].update(e,u,h,n);this.height=t.bottom,this.i++}line(e,t,n){let s=[];mr(this.cursor,s,t.from),n.length&&(s=s.concat(n));let h=this.gutter.config.lineMarker(e,t,s);h&&s.unshift(h);let u=this.gutter;s.length==0&&!u.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class bn{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,s=>{let h=s.target,u;if(h!=this.dom&&this.dom.contains(h)){for(;h.parentNode!=this.dom;)h=h.parentNode;let v=h.getBoundingClientRect();u=(v.top+v.bottom)/2}else u=s.clientY;let b=e.lineBlockAtHeight(u-e.documentTop);t.domEventHandlers[n](e,b,s)&&s.preventDefault()});this.markers=ul(t.markers(e)),t.initialSpacer&&(this.spacer=new dl(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=ul(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let n=e.view.viewport;return!E.Xs.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class dl{constructor(e,t,n,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,s)}update(e,t,n,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),Ll(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let n="cm-gutterElement",s=this.dom.firstChild;for(let h=0,u=0;;){let b=u,v=h<t.length?t[h++]:null,A=!1;if(v){let O=v.elementClass;O&&(n+=" "+O);for(let V=u;V<this.markers.length;V++)if(this.markers[V].compare(v)){b=V,A=!0;break}}else b=this.markers.length;for(;u<b;){let O=this.markers[u++];if(O.toDOM){O.destroy(s);let V=s.nextSibling;s.remove(),s=V}}if(!v)break;v.toDOM&&(A?s=s.nextSibling:this.dom.insertBefore(v.toDOM(e),s)),A&&u++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function Ll(o,e){if(o.length!=e.length)return!1;for(let t=0;t<o.length;t++)if(!o[t].compare(e[t]))return!1;return!0}const bo=E.r$.define(),vn=E.r$.define({combine(o){return(0,E.BO)(o,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let s in t){let h=n[s],u=t[s];n[s]=h?(b,v,A)=>h(b,v,A)||u(b,v,A):u}return n}})}});class yr extends li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function As(o,e){return o.state.facet(vn).formatNumber(e,o.state)}const es=_n.compute([vn],o=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(bo)},lineMarker(e,t,n){return n.some(s=>s.toDOM)?null:new yr(As(e,e.state.doc.lineAt(t.from).number))},widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(vn)!=e.state.facet(vn),initialSpacer(e){return new yr(As(e,ts(e.state.doc.lines)))},updateSpacer(e,t){let n=As(t.view,ts(t.view.state.doc.lines));return n==e.number?e:new yr(n)},domEventHandlers:o.facet(vn).domEventHandlers}));function Ts(o={}){return[vn.of(o),gr(),es]}function ts(o){let e=9;for(;e<o;)e=e*10+9;return e}const pl=new class extends li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},vo=dr.compute(["selection"],o=>{let e=[],t=-1;for(let n of o.selection.ranges){let s=o.doc.lineAt(n.head).from;s>t&&(t=s,e.push(pl.range(s)))}return E.Xs.of(e)});function gl(){return vo}const xo=new Map;function ml(o){let e=xo.get(o);return e||xo.set(o,e=Ge.mark({attributes:o==="	"?{class:"cm-highlightTab"}:{class:"cm-highlightSpace","data-display":o.replace(/ /g,"\xB7")}})),e}function ko(o){return di.define(e=>({decorations:o.createDeco(e),update(t){this.decorations=o.updateDeco(t,this.decorations)}}),{decorations:e=>e.decorations})}const yl=ko(new qn({regexp:/\t| +/g,decoration:o=>ml(o[0]),boundary:/\S/}));function bl(){return yl}const br=ko(new qn({regexp:/\s+$/g,decoration:Ge.mark({class:"cm-trailingSpace"}),boundary:/\S/}));function vl(){return br}const Il={HeightMap:Ti,HeightOracle:Fr,MeasuredHeights:Pn,QueryType:Zt,ChangedRange:wi,computeOrder:a,moveVisually:k}},41113:function(Di,ti,pe){pe.d(ti,{Jq:function(){return Re},L3:function(){return E},Lj:function(){return jt},_b:function(){return Fe},i9:function(){return $e},md:function(){return z},mp:function(){return lt},vj:function(){return Xe}});const E=1024;let ae=0;class xe{constructor(x,M){this.from=x,this.to=M}}class z{constructor(x={}){this.id=ae++,this.perNode=!!x.perNode,this.deserialize=x.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(x){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof x!="function"&&(x=Re.match(x)),M=>{let F=x(M);return F===void 0?null:[this,F]}}}z.closedBy=new z({deserialize:oe=>oe.split(" ")}),z.openedBy=new z({deserialize:oe=>oe.split(" ")}),z.group=new z({deserialize:oe=>oe.split(" ")}),z.isolate=new z({deserialize:oe=>{if(oe&&oe!="rtl"&&oe!="ltr"&&oe!="auto")throw new RangeError("Invalid value for isolate: "+oe);return oe||"auto"}}),z.contextHash=new z({perNode:!0}),z.lookAhead=new z({perNode:!0}),z.mounted=new z({perNode:!0});class ce{constructor(x,M,F){this.tree=x,this.overlay=M,this.parser=F}static get(x){return x&&x.props&&x.props[z.mounted.id]}}const Ke=Object.create(null);class Re{constructor(x,M,F,j=0){this.name=x,this.props=M,this.id=F,this.flags=j}static define(x){let M=x.props&&x.props.length?Object.create(null):Ke,F=(x.top?1:0)|(x.skipped?2:0)|(x.error?4:0)|(x.name==null?8:0),j=new Re(x.name||"",M,x.id,F);if(x.props){for(let $ of x.props)if(Array.isArray($)||($=$(j)),$){if($[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");M[$[0].id]=$[1]}}return j}prop(x){return this.props[x.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(x){if(typeof x=="string"){if(this.name==x)return!0;let M=this.prop(z.group);return M?M.indexOf(x)>-1:!1}return this.id==x}static match(x){let M=Object.create(null);for(let F in x)for(let j of F.split(" "))M[j]=x[F];return F=>{for(let j=F.prop(z.group),$=-1;$<(j?j.length:0);$++){let se=M[$<0?F.name:j[$]];if(se)return se}}}}Re.none=new Re("",Object.create(null),0,8);class jt{constructor(x){this.types=x;for(let M=0;M<x.length;M++)if(x[M].id!=M)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...x){let M=[];for(let F of this.types){let j=null;for(let $ of x){let se=$(F);se&&(j||(j=Object.assign({},F.props)),j[se[0].id]=se[1])}M.push(j?new Re(F.name,j,F.id,F.flags):F)}return new jt(M)}}const it=new WeakMap,nt=new WeakMap;var Xe;(function(oe){oe[oe.ExcludeBuffers=1]="ExcludeBuffers",oe[oe.IncludeAnonymous=2]="IncludeAnonymous",oe[oe.IgnoreMounts=4]="IgnoreMounts",oe[oe.IgnoreOverlays=8]="IgnoreOverlays"})(Xe||(Xe={}));class lt{constructor(x,M,F,j,$){if(this.type=x,this.children=M,this.positions=F,this.length=j,this.props=null,$&&$.length){this.props=Object.create(null);for(let[se,le]of $)this.props[typeof se=="number"?se:se.id]=le}}toString(){let x=ce.get(this);if(x&&!x.overlay)return x.tree.toString();let M="";for(let F of this.children){let j=F.toString();j&&(M&&(M+=","),M+=j)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(M.length?"("+M+")":""):M}cursor(x=0){return new at(this.topNode,x)}cursorAt(x,M=0,F=0){let j=it.get(this)||this.topNode,$=new at(j);return $.moveTo(x,M),it.set(this,$._tree),$}get topNode(){return new kt(this,0,0,null)}resolve(x,M=0){let F=ft(it.get(this)||this.topNode,x,M,!1);return it.set(this,F),F}resolveInner(x,M=0){let F=ft(nt.get(this)||this.topNode,x,M,!0);return nt.set(this,F),F}resolveStack(x,M=0){return $t(this,x,M)}iterate(x){let{enter:M,leave:F,from:j=0,to:$=this.length}=x,se=x.mode||0,le=(se&Xe.IncludeAnonymous)>0;for(let Be=this.cursor(se|Xe.IncludeAnonymous);;){let et=!1;if(Be.from<=$&&Be.to>=j&&(!le&&Be.type.isAnonymous||M(Be)!==!1)){if(Be.firstChild())continue;et=!0}for(;et&&F&&(le||!Be.type.isAnonymous)&&F(Be),!Be.nextSibling();){if(!Be.parent())return;et=!0}}}prop(x){return x.perNode?this.props?this.props[x.id]:void 0:this.type.prop(x)}get propValues(){let x=[];if(this.props)for(let M in this.props)x.push([+M,this.props[M]]);return x}balance(x={}){return this.children.length<=8?this:Ne(Re.none,this.children,this.positions,0,this.children.length,0,this.length,(M,F,j)=>new lt(this.type,M,F,j,this.propValues),x.makeTree||((M,F,j)=>new lt(Re.none,M,F,j)))}static build(x){return He(x)}}lt.empty=new lt(Re.none,[],[],0);class Ee{constructor(x,M){this.buffer=x,this.index=M}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ee(this.buffer,this.index)}}class ct{constructor(x,M,F){this.buffer=x,this.length=M,this.set=F}get type(){return Re.none}toString(){let x=[];for(let M=0;M<this.buffer.length;)x.push(this.childString(M)),M=this.buffer[M+3];return x.join(",")}childString(x){let M=this.buffer[x],F=this.buffer[x+3],j=this.set.types[M],$=j.name;if(/\W/.test($)&&!j.isError&&($=JSON.stringify($)),x+=4,F==x)return $;let se=[];for(;x<F;)se.push(this.childString(x)),x=this.buffer[x+3];return $+"("+se.join(",")+")"}findChild(x,M,F,j,$){let{buffer:se}=this,le=-1;for(let Be=x;Be!=M&&!(vt($,j,se[Be+1],se[Be+2])&&(le=Be,F>0));Be=se[Be+3]);return le}slice(x,M,F){let j=this.buffer,$=new Uint16Array(M-x),se=0;for(let le=x,Be=0;le<M;){$[Be++]=j[le++],$[Be++]=j[le++]-F;let et=$[Be++]=j[le++]-F;$[Be++]=j[le++]-x,se=Math.max(se,et)}return new ct($,se,this.set)}}function vt(oe,x,M,F){switch(oe){case-2:return M<x;case-1:return F>=x&&M<x;case 0:return M<x&&F>x;case 1:return M<=x&&F>x;case 2:return F>x;case 4:return!0}}function ft(oe,x,M,F){for(var j;oe.from==oe.to||(M<1?oe.from>=x:oe.from>x)||(M>-1?oe.to<=x:oe.to<x);){let se=!F&&oe instanceof kt&&oe.index<0?null:oe.parent;if(!se)return oe;oe=se}let $=F?0:Xe.IgnoreOverlays;if(F)for(let se=oe,le=se.parent;le;se=le,le=se.parent)se instanceof kt&&se.index<0&&((j=le.enter(x,M,$))===null||j===void 0?void 0:j.from)!=se.from&&(oe=le);for(;;){let se=oe.enter(x,M,$);if(!se)return oe;oe=se}}class ue{cursor(x=0){return new at(this,x)}getChild(x,M=null,F=null){let j=Ot(this,x,M,F);return j.length?j[0]:null}getChildren(x,M=null,F=null){return Ot(this,x,M,F)}resolve(x,M=0){return ft(this,x,M,!1)}resolveInner(x,M=0){return ft(this,x,M,!0)}matchContext(x){return Qt(this,x)}enterUnfinishedNodesBefore(x){let M=this.childBefore(x),F=this;for(;M;){let j=M.lastChild;if(!j||j.to!=M.to)break;j.type.isError&&j.from==j.to?(F=M,M=j.prevSibling):M=j}return F}get node(){return this}get next(){return this.parent}}class kt extends ue{constructor(x,M,F,j){super(),this._tree=x,this.from=M,this.index=F,this._parent=j}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(x,M,F,j,$=0){for(let se=this;;){for(let{children:le,positions:Be}=se._tree,et=M>0?le.length:-1;x!=et;x+=M){let We=le[x],_=Be[x]+se.from;if(vt(j,F,_,_+We.length)){if(We instanceof ct){if($&Xe.ExcludeBuffers)continue;let Pe=We.findChild(0,We.buffer.length,M,F-_,j);if(Pe>-1)return new Pt(new Ut(se,We,x,_),null,Pe)}else if($&Xe.IncludeAnonymous||!We.type.isAnonymous||Le(We)){let Pe;if(!($&Xe.IgnoreMounts)&&(Pe=ce.get(We))&&!Pe.overlay)return new kt(Pe.tree,_,x,se);let ye=new kt(We,_,x,se);return $&Xe.IncludeAnonymous||!ye.type.isAnonymous?ye:ye.nextChild(M<0?We.children.length-1:0,M,F,j)}}}if($&Xe.IncludeAnonymous||!se.type.isAnonymous||(se.index>=0?x=se.index+M:x=M<0?-1:se._parent._tree.children.length,se=se._parent,!se))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(x){return this.nextChild(0,1,x,2)}childBefore(x){return this.nextChild(this._tree.children.length-1,-1,x,-2)}enter(x,M,F=0){let j;if(!(F&Xe.IgnoreOverlays)&&(j=ce.get(this._tree))&&j.overlay){let $=x-this.from;for(let{from:se,to:le}of j.overlay)if((M>0?se<=$:se<$)&&(M<0?le>=$:le>$))return new kt(j.tree,j.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,x,M,F)}nextSignificantParent(){let x=this;for(;x.type.isAnonymous&&x._parent;)x=x._parent;return x}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ot(oe,x,M,F){let j=oe.cursor(),$=[];if(!j.firstChild())return $;if(M!=null){for(let se=!1;!se;)if(se=j.type.is(M),!j.nextSibling())return $}for(;;){if(F!=null&&j.type.is(F))return $;if(j.type.is(x)&&$.push(j.node),!j.nextSibling())return F==null?$:[]}}function Qt(oe,x,M=x.length-1){for(let F=oe.parent;M>=0;F=F.parent){if(!F)return!1;if(!F.type.isAnonymous){if(x[M]&&x[M]!=F.name)return!1;M--}}return!0}class Ut{constructor(x,M,F,j){this.parent=x,this.buffer=M,this.index=F,this.start=j}}class Pt extends ue{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(x,M,F){super(),this.context=x,this._parent=M,this.index=F,this.type=x.buffer.set.types[x.buffer.buffer[F]]}child(x,M,F){let{buffer:j}=this.context,$=j.findChild(this.index+4,j.buffer[this.index+3],x,M-this.context.start,F);return $<0?null:new Pt(this.context,this,$)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(x){return this.child(1,x,2)}childBefore(x){return this.child(-1,x,-2)}enter(x,M,F=0){if(F&Xe.ExcludeBuffers)return null;let{buffer:j}=this.context,$=j.findChild(this.index+4,j.buffer[this.index+3],M>0?1:-1,x-this.context.start,M);return $<0?null:new Pt(this.context,this,$)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(x){return this._parent?null:this.context.parent.nextChild(this.context.index+x,x,0,4)}get nextSibling(){let{buffer:x}=this.context,M=x.buffer[this.index+3];return M<(this._parent?x.buffer[this._parent.index+3]:x.buffer.length)?new Pt(this.context,this._parent,M):this.externalSibling(1)}get prevSibling(){let{buffer:x}=this.context,M=this._parent?this._parent.index+4:0;return this.index==M?this.externalSibling(-1):new Pt(this.context,this._parent,x.findChild(M,this.index,-1,0,4))}get tree(){return null}toTree(){let x=[],M=[],{buffer:F}=this.context,j=this.index+4,$=F.buffer[this.index+3];if($>j){let se=F.buffer[this.index+1];x.push(F.slice(j,$,se)),M.push(0)}return new lt(this.type,x,M,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Dt(oe){if(!oe.length)return null;let x=0,M=oe[0];for(let $=1;$<oe.length;$++){let se=oe[$];(se.from>M.from||se.to<M.to)&&(M=se,x=$)}let F=M instanceof kt&&M.index<0?null:M.parent,j=oe.slice();return F?j[x]=F:j.splice(x,1),new Gt(j,M)}class Gt{constructor(x,M){this.heads=x,this.node=M}get next(){return Dt(this.heads)}}function $t(oe,x,M){let F=oe.resolveInner(x,M),j=null;for(let $=F instanceof kt?F:F.context.parent;$;$=$.parent)if($.index<0){let se=$.parent;(j||(j=[F])).push(se.resolve(x,M)),$=se}else{let se=ce.get($.tree);if(se&&se.overlay&&se.overlay[0].from<=x&&se.overlay[se.overlay.length-1].to>=x){let le=new kt(se.tree,se.overlay[0].from+$.from,-1,$);(j||(j=[F])).push(ft(le,x,M,!1))}}return j?Dt(j):F}class at{get name(){return this.type.name}constructor(x,M=0){if(this.mode=M,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,x instanceof kt)this.yieldNode(x);else{this._tree=x.context.parent,this.buffer=x.context;for(let F=x._parent;F;F=F._parent)this.stack.unshift(F.index);this.bufferNode=x,this.yieldBuf(x.index)}}yieldNode(x){return x?(this._tree=x,this.type=x.type,this.from=x.from,this.to=x.to,!0):!1}yieldBuf(x,M){this.index=x;let{start:F,buffer:j}=this.buffer;return this.type=M||j.set.types[j.buffer[x]],this.from=F+j.buffer[x+1],this.to=F+j.buffer[x+2],!0}yield(x){return x?x instanceof kt?(this.buffer=null,this.yieldNode(x)):(this.buffer=x.context,this.yieldBuf(x.index,x.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(x,M,F){if(!this.buffer)return this.yield(this._tree.nextChild(x<0?this._tree._tree.children.length-1:0,x,M,F,this.mode));let{buffer:j}=this.buffer,$=j.findChild(this.index+4,j.buffer[this.index+3],x,M-this.buffer.start,F);return $<0?!1:(this.stack.push(this.index),this.yieldBuf($))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(x){return this.enterChild(1,x,2)}childBefore(x){return this.enterChild(-1,x,-2)}enter(x,M,F=this.mode){return this.buffer?F&Xe.ExcludeBuffers?!1:this.enterChild(1,x,M):this.yield(this._tree.enter(x,M,F))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Xe.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let x=this.mode&Xe.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(x)}sibling(x){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+x,x,0,4,this.mode)):!1;let{buffer:M}=this.buffer,F=this.stack.length-1;if(x<0){let j=F<0?0:this.stack[F]+4;if(this.index!=j)return this.yieldBuf(M.findChild(j,this.index,-1,0,4))}else{let j=M.buffer[this.index+3];if(j<(F<0?M.buffer.length:M.buffer[this.stack[F]+3]))return this.yieldBuf(j)}return F<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+x,x,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(x){let M,F,{buffer:j}=this;if(j){if(x>0){if(this.index<j.buffer.buffer.length)return!1}else for(let $=0;$<this.index;$++)if(j.buffer.buffer[$+3]<this.index)return!1;({index:M,parent:F}=j)}else({index:M,_parent:F}=this._tree);for(;F;{index:M,_parent:F}=F)if(M>-1)for(let $=M+x,se=x<0?-1:F._tree.children.length;$!=se;$+=x){let le=F._tree.children[$];if(this.mode&Xe.IncludeAnonymous||le instanceof ct||!le.type.isAnonymous||Le(le))return!1}return!0}move(x,M){if(M&&this.enterChild(x,0,4))return!0;for(;;){if(this.sibling(x))return!0;if(this.atLastNode(x)||!this.parent())return!1}}next(x=!0){return this.move(1,x)}prev(x=!0){return this.move(-1,x)}moveTo(x,M=0){for(;(this.from==this.to||(M<1?this.from>=x:this.from>x)||(M>-1?this.to<=x:this.to<x))&&this.parent(););for(;this.enterChild(1,x,M););return this}get node(){if(!this.buffer)return this._tree;let x=this.bufferNode,M=null,F=0;if(x&&x.context==this.buffer)e:for(let j=this.index,$=this.stack.length;$>=0;){for(let se=x;se;se=se._parent)if(se.index==j){if(j==this.index)return se;M=se,F=$+1;break e}j=this.stack[--$]}for(let j=F;j<this.stack.length;j++)M=new Pt(this.buffer,M,this.stack[j]);return this.bufferNode=new Pt(this.buffer,M,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(x,M){for(let F=0;;){let j=!1;if(this.type.isAnonymous||x(this)!==!1){if(this.firstChild()){F++;continue}this.type.isAnonymous||(j=!0)}for(;j&&M&&M(this),j=this.type.isAnonymous,!this.nextSibling();){if(!F)return;this.parent(),F--,j=!0}}}matchContext(x){if(!this.buffer)return Qt(this.node,x);let{buffer:M}=this.buffer,{types:F}=M.set;for(let j=x.length-1,$=this.stack.length-1;j>=0;$--){if($<0)return Qt(this.node,x,j);let se=F[M.buffer[this.stack[$]]];if(!se.isAnonymous){if(x[j]&&x[j]!=se.name)return!1;j--}}return!0}}function Le(oe){return oe.children.some(x=>x instanceof ct||!x.type.isAnonymous||Le(x))}function He(oe){var x;let{buffer:M,nodeSet:F,maxBufferLength:j=E,reused:$=[],minRepeatType:se=F.types.length}=oe,le=Array.isArray(M)?new Ee(M,M.length):M,Be=F.types,et=0,We=0;function _(ze,Tt,Qe,Ct,Ge,tt){let{id:mt,start:st,end:zt,size:Ht}=le,St=We;for(;Ht<0;)if(le.next(),Ht==-1){let Vt=$[mt];Qe.push(Vt),Ct.push(st-ze);return}else if(Ht==-3){et=mt;return}else if(Ht==-4){We=mt;return}else throw new RangeError(`Unrecognized record size: ${Ht}`);let si=Be[mt],qt,_t,rt=st-ze;if(zt-st<=j&&(_t=Ve(le.pos-Tt,Ge))){let Vt=new Uint16Array(_t.size-_t.skip),Nt=le.pos-_t.size,fi=Vt.length;for(;le.pos>Nt;)fi=ht(_t.start,Vt,fi);qt=new ct(Vt,zt-_t.start,F),rt=_t.start-ze}else{let Vt=le.pos-Ht;le.next();let Nt=[],fi=[],hi=mt>=se?mt:-1,mi=0,I=zt;for(;le.pos>Vt;)hi>=0&&le.id==hi&&le.size>=0?(le.end<=I-j&&(Te(Nt,fi,st,mi,le.end,I,hi,St),mi=Nt.length,I=le.end),le.next()):tt>2500?Pe(st,Vt,Nt,fi):_(st,Vt,Nt,fi,hi,tt+1);if(hi>=0&&mi>0&&mi<Nt.length&&Te(Nt,fi,st,mi,st,I,hi,St),Nt.reverse(),fi.reverse(),hi>-1&&mi>0){let y=ye(si);qt=Ne(si,Nt,fi,0,Nt.length,0,zt-st,y,y)}else qt=je(si,Nt,fi,zt-st,St-zt)}Qe.push(qt),Ct.push(rt)}function Pe(ze,Tt,Qe,Ct){let Ge=[],tt=0,mt=-1;for(;le.pos>Tt;){let{id:st,start:zt,end:Ht,size:St}=le;if(St>4)le.next();else{if(mt>-1&&zt<mt)break;mt<0&&(mt=Ht-j),Ge.push(st,zt,Ht),tt++,le.next()}}if(tt){let st=new Uint16Array(tt*4),zt=Ge[Ge.length-2];for(let Ht=Ge.length-3,St=0;Ht>=0;Ht-=3)st[St++]=Ge[Ht],st[St++]=Ge[Ht+1]-zt,st[St++]=Ge[Ht+2]-zt,st[St++]=St;Qe.push(new ct(st,Ge[2]-zt,F)),Ct.push(zt-ze)}}function ye(ze){return(Tt,Qe,Ct)=>{let Ge=0,tt=Tt.length-1,mt,st;if(tt>=0&&(mt=Tt[tt])instanceof lt){if(!tt&&mt.type==ze&&mt.length==Ct)return mt;(st=mt.prop(z.lookAhead))&&(Ge=Qe[tt]+mt.length+st)}return je(ze,Tt,Qe,Ct,Ge)}}function Te(ze,Tt,Qe,Ct,Ge,tt,mt,st){let zt=[],Ht=[];for(;ze.length>Ct;)zt.push(ze.pop()),Ht.push(Tt.pop()+Qe-Ge);ze.push(je(F.types[mt],zt,Ht,tt-Ge,st-tt)),Tt.push(Ge-Qe)}function je(ze,Tt,Qe,Ct,Ge=0,tt){if(et){let mt=[z.contextHash,et];tt=tt?[mt].concat(tt):[mt]}if(Ge>25){let mt=[z.lookAhead,Ge];tt=tt?[mt].concat(tt):[mt]}return new lt(ze,Tt,Qe,Ct,tt)}function Ve(ze,Tt){let Qe=le.fork(),Ct=0,Ge=0,tt=0,mt=Qe.end-j,st={size:0,start:0,skip:0};e:for(let zt=Qe.pos-ze;Qe.pos>zt;){let Ht=Qe.size;if(Qe.id==Tt&&Ht>=0){st.size=Ct,st.start=Ge,st.skip=tt,tt+=4,Ct+=4,Qe.next();continue}let St=Qe.pos-Ht;if(Ht<0||St<zt||Qe.start<mt)break;let si=Qe.id>=se?4:0,qt=Qe.start;for(Qe.next();Qe.pos>St;){if(Qe.size<0)if(Qe.size==-3)si+=4;else break e;else Qe.id>=se&&(si+=4);Qe.next()}Ge=qt,Ct+=Ht,tt+=si}return(Tt<0||Ct==ze)&&(st.size=Ct,st.start=Ge,st.skip=tt),st.size>4?st:void 0}function ht(ze,Tt,Qe){let{id:Ct,start:Ge,end:tt,size:mt}=le;if(le.next(),mt>=0&&Ct<se){let st=Qe;if(mt>4){let zt=le.pos-(mt-4);for(;le.pos>zt;)Qe=ht(ze,Tt,Qe)}Tt[--Qe]=st,Tt[--Qe]=tt-ze,Tt[--Qe]=Ge-ze,Tt[--Qe]=Ct}else mt==-3?et=Ct:mt==-4&&(We=Ct);return Qe}let wt=[],gt=[];for(;le.pos>0;)_(oe.start||0,oe.bufferStart||0,wt,gt,-1,0);let Ft=(x=oe.length)!==null&&x!==void 0?x:wt.length?gt[0]+wt[0].length:0;return new lt(Be[oe.topID],wt.reverse(),gt.reverse(),Ft)}const Me=new WeakMap;function ke(oe,x){if(!oe.isAnonymous||x instanceof ct||x.type!=oe)return 1;let M=Me.get(x);if(M==null){M=1;for(let F of x.children){if(F.type!=oe||!(F instanceof lt)){M=1;break}M+=ke(oe,F)}Me.set(x,M)}return M}function Ne(oe,x,M,F,j,$,se,le,Be){let et=0;for(let Te=F;Te<j;Te++)et+=ke(oe,x[Te]);let We=Math.ceil(et*1.5/8),_=[],Pe=[];function ye(Te,je,Ve,ht,wt){for(let gt=Ve;gt<ht;){let Ft=gt,ze=je[gt],Tt=ke(oe,Te[gt]);for(gt++;gt<ht;gt++){let Qe=ke(oe,Te[gt]);if(Tt+Qe>=We)break;Tt+=Qe}if(gt==Ft+1){if(Tt>We){let Qe=Te[Ft];ye(Qe.children,Qe.positions,0,Qe.children.length,je[Ft]+wt);continue}_.push(Te[Ft])}else{let Qe=je[gt-1]+Te[gt-1].length-ze;_.push(Ne(oe,Te,je,Ft,gt,ze,Qe,null,Be))}Pe.push(ze+wt-$)}}return ye(x,M,F,j,0),(le||Be)(_,Pe,se)}class K{constructor(){this.map=new WeakMap}setBuffer(x,M,F){let j=this.map.get(x);j||this.map.set(x,j=new Map),j.set(M,F)}getBuffer(x,M){let F=this.map.get(x);return F&&F.get(M)}set(x,M){x instanceof Pt?this.setBuffer(x.context.buffer,x.index,M):x instanceof kt&&this.map.set(x.tree,M)}get(x){return x instanceof Pt?this.getBuffer(x.context.buffer,x.index):x instanceof kt?this.map.get(x.tree):void 0}cursorSet(x,M){x.buffer?this.setBuffer(x.buffer.buffer,x.index,M):this.map.set(x.tree,M)}cursorGet(x){return x.buffer?this.getBuffer(x.buffer.buffer,x.index):this.map.get(x.tree)}}class $e{constructor(x,M,F,j,$=!1,se=!1){this.from=x,this.to=M,this.tree=F,this.offset=j,this.open=($?1:0)|(se?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(x,M=[],F=!1){let j=[new $e(0,x.length,x,0,!1,F)];for(let $ of M)$.to>x.length&&j.push($);return j}static applyChanges(x,M,F=128){if(!M.length)return x;let j=[],$=1,se=x.length?x[0]:null;for(let le=0,Be=0,et=0;;le++){let We=le<M.length?M[le]:null,_=We?We.fromA:1e9;if(_-Be>=F)for(;se&&se.from<_;){let Pe=se;if(Be>=Pe.from||_<=Pe.to||et){let ye=Math.max(Pe.from,Be)-et,Te=Math.min(Pe.to,_)-et;Pe=ye>=Te?null:new $e(ye,Te,Pe.tree,Pe.offset+et,le>0,!!We)}if(Pe&&j.push(Pe),se.to>_)break;se=$<x.length?x[$++]:null}if(!We)break;Be=We.toA,et=We.toA-We.toB}return j}}class Fe{startParse(x,M,F){return typeof x=="string"&&(x=new ee(x)),F=F?F.length?F.map(j=>new xe(j.from,j.to)):[new xe(0,0)]:[new xe(0,x.length)],this.createParse(x,M||[],F)}parse(x,M,F){let j=this.startParse(x,M,F);for(;;){let $=j.advance();if($)return $}}}class ee{constructor(x){this.string=x}get length(){return this.string.length}chunk(x){return this.string.slice(x)}get lineChunks(){return!1}read(x,M){return this.string.slice(x,M)}}function ge(oe){return(x,M,F,j)=>new Ye(x,oe,M,F,j)}class Ce{constructor(x,M,F,j,$){this.parser=x,this.parse=M,this.overlay=F,this.target=j,this.from=$}}function Oe(oe){if(!oe.length||oe.some(x=>x.from>=x.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(oe))}class De{constructor(x,M,F,j,$,se,le){this.parser=x,this.predicate=M,this.mounts=F,this.index=j,this.start=$,this.target=se,this.prev=le,this.depth=0,this.ranges=[]}}const dt=new z({perNode:!0});class Ye{constructor(x,M,F,j,$){this.nest=M,this.input=F,this.fragments=j,this.ranges=$,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=x}advance(){if(this.baseParse){let F=this.baseParse.advance();if(!F)return null;if(this.baseParse=null,this.baseTree=F,this.startInner(),this.stoppedAt!=null)for(let j of this.inner)j.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let F=this.baseTree;return this.stoppedAt!=null&&(F=new lt(F.type,F.children,F.positions,F.length,F.propValues.concat([[dt,this.stoppedAt]]))),F}let x=this.inner[this.innerDone],M=x.parse.advance();if(M){this.innerDone++;let F=Object.assign(Object.create(null),x.target.props);F[z.mounted.id]=new ce(M,x.overlay,x.parser),x.target.props=F}return null}get parsedPos(){if(this.baseParse)return 0;let x=this.input.length;for(let M=this.innerDone;M<this.inner.length;M++)this.inner[M].from<x&&(x=Math.min(x,this.inner[M].parse.parsedPos));return x}stopAt(x){if(this.stoppedAt=x,this.baseParse)this.baseParse.stopAt(x);else for(let M=this.innerDone;M<this.inner.length;M++)this.inner[M].parse.stopAt(x)}startInner(){let x=new Et(this.fragments),M=null,F=null,j=new at(new kt(this.baseTree,this.ranges[0].from,0,null),Xe.IncludeAnonymous|Xe.IgnoreMounts);e:for(let $,se;;){let le=!0,Be;if(this.stoppedAt!=null&&j.from>=this.stoppedAt)le=!1;else if(x.hasNode(j)){if(M){let et=M.mounts.find(We=>We.frag.from<=j.from&&We.frag.to>=j.to&&We.mount.overlay);if(et)for(let We of et.mount.overlay){let _=We.from+et.pos,Pe=We.to+et.pos;_>=j.from&&Pe<=j.to&&!M.ranges.some(ye=>ye.from<Pe&&ye.to>_)&&M.ranges.push({from:_,to:Pe})}}le=!1}else if(F&&(se=xt(F.ranges,j.from,j.to)))le=se!=2;else if(!j.type.isAnonymous&&($=this.nest(j,this.input))&&(j.from<j.to||!$.overlay)){j.tree||Rt(j);let et=x.findMounts(j.from,$.parser);if(typeof $.overlay=="function")M=new De($.parser,$.overlay,et,this.inner.length,j.from,j.tree,M);else{let We=Mt(this.ranges,$.overlay||(j.from<j.to?[new xe(j.from,j.to)]:[]));We.length&&Oe(We),(We.length||!$.overlay)&&this.inner.push(new Ce($.parser,We.length?$.parser.startParse(this.input,oi(et,We),We):$.parser.startParse(""),$.overlay?$.overlay.map(_=>new xe(_.from-j.from,_.to-j.from)):null,j.tree,We.length?We[0].from:j.from)),$.overlay?We.length&&(F={ranges:We,depth:0,prev:F}):le=!1}}else M&&(Be=M.predicate(j))&&(Be===!0&&(Be=new xe(j.from,j.to)),Be.from<Be.to&&M.ranges.push(Be));if(le&&j.firstChild())M&&M.depth++,F&&F.depth++;else for(;!j.nextSibling();){if(!j.parent())break e;if(M&&!--M.depth){let et=Mt(this.ranges,M.ranges);et.length&&(Oe(et),this.inner.splice(M.index,0,new Ce(M.parser,M.parser.startParse(this.input,oi(M.mounts,et),et),M.ranges.map(We=>new xe(We.from-M.start,We.to-M.start)),M.target,et[0].from))),M=M.prev}F&&!--F.depth&&(F=F.prev)}}}}function xt(oe,x,M){for(let F of oe){if(F.from>=M)break;if(F.to>x)return F.from<=x&&F.to>=M?2:1}return 0}function pt(oe,x,M,F,j,$){if(x<M){let se=oe.buffer[x+1];F.push(oe.slice(x,M,se)),j.push(se-$)}}function Rt(oe){let{node:x}=oe,M=[],F=x.context.buffer;do M.push(oe.index),oe.parent();while(!oe.tree);let j=oe.tree,$=j.children.indexOf(F),se=j.children[$],le=se.buffer,Be=[$];function et(We,_,Pe,ye,Te,je){let Ve=M[je],ht=[],wt=[];pt(se,We,Ve,ht,wt,ye);let gt=le[Ve+1],Ft=le[Ve+2];Be.push(ht.length);let ze=je?et(Ve+4,le[Ve+3],se.set.types[le[Ve]],gt,Ft-gt,je-1):x.toTree();return ht.push(ze),wt.push(gt-ye),pt(se,le[Ve+3],_,ht,wt,ye),new lt(Pe,ht,wt,Te)}j.children[$]=et(0,le.length,Re.none,0,se.length,M.length-1);for(let We of Be){let _=oe.tree.children[We],Pe=oe.tree.positions[We];oe.yield(new kt(_,Pe+oe.from,We,oe._tree))}}class It{constructor(x,M){this.offset=M,this.done=!1,this.cursor=x.cursor(Xe.IncludeAnonymous|Xe.IgnoreMounts)}moveTo(x){let{cursor:M}=this,F=x-this.offset;for(;!this.done&&M.from<F;)M.to>=x&&M.enter(F,1,Xe.IgnoreOverlays|Xe.ExcludeBuffers)||M.next(!1)||(this.done=!0)}hasNode(x){if(this.moveTo(x.from),!this.done&&this.cursor.from+this.offset==x.from&&this.cursor.tree)for(let M=this.cursor.tree;;){if(M==x.tree)return!0;if(M.children.length&&M.positions[0]==0&&M.children[0]instanceof lt)M=M.children[0];else break}return!1}}class Et{constructor(x){var M;if(this.fragments=x,this.curTo=0,this.fragI=0,x.length){let F=this.curFrag=x[0];this.curTo=(M=F.tree.prop(dt))!==null&&M!==void 0?M:F.to,this.inner=new It(F.tree,-F.offset)}else this.curFrag=this.inner=null}hasNode(x){for(;this.curFrag&&x.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=x.from&&this.curTo>=x.to&&this.inner.hasNode(x)}nextFrag(){var x;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let M=this.curFrag=this.fragments[this.fragI];this.curTo=(x=M.tree.prop(dt))!==null&&x!==void 0?x:M.to,this.inner=new It(M.tree,-M.offset)}}findMounts(x,M){var F;let j=[];if(this.inner){this.inner.cursor.moveTo(x,1);for(let $=this.inner.cursor.node;$;$=$.parent){let se=(F=$.tree)===null||F===void 0?void 0:F.prop(z.mounted);if(se&&se.parser==M)for(let le=this.fragI;le<this.fragments.length;le++){let Be=this.fragments[le];if(Be.from>=$.to)break;Be.tree==this.curFrag.tree&&j.push({frag:Be,pos:$.from-Be.offset,mount:se})}}}return j}}function Mt(oe,x){let M=null,F=x;for(let j=1,$=0;j<oe.length;j++){let se=oe[j-1].to,le=oe[j].from;for(;$<F.length;$++){let Be=F[$];if(Be.from>=le)break;Be.to<=se||(M||(F=M=x.slice()),Be.from<se?(M[$]=new xe(Be.from,se),Be.to>le&&M.splice($+1,0,new xe(le,Be.to))):Be.to>le?M[$--]=new xe(le,Be.to):M.splice($--,1))}}return F}function ii(oe,x,M,F){let j=0,$=0,se=!1,le=!1,Be=-1e9,et=[];for(;;){let We=j==oe.length?1e9:se?oe[j].to:oe[j].from,_=$==x.length?1e9:le?x[$].to:x[$].from;if(se!=le){let Pe=Math.max(Be,M),ye=Math.min(We,_,F);Pe<ye&&et.push(new xe(Pe,ye))}if(Be=Math.min(We,_),Be==1e9)break;We==Be&&(se?(se=!1,j++):se=!0),_==Be&&(le?(le=!1,$++):le=!0)}return et}function oi(oe,x){let M=[];for(let{pos:F,mount:j,frag:$}of oe){let se=F+(j.overlay?j.overlay[0].from:0),le=se+j.tree.length,Be=Math.max($.from,se),et=Math.min($.to,le);if(j.overlay){let We=j.overlay.map(Pe=>new xe(Pe.from+F,Pe.to+F)),_=ii(x,We,Be,et);for(let Pe=0,ye=Be;;Pe++){let Te=Pe==_.length,je=Te?et:_[Pe].from;if(je>ye&&M.push(new $e(ye,je,j.tree,-se,$.from>=ye||$.openStart,$.to<=je||$.openEnd)),Te)break;ye=_[Pe].to}}else M.push(new $e(Be,et,j.tree,-se,$.from>=se||$.openStart,$.to<=le||$.openEnd))}return M}},35524:function(Di,ti,pe){pe.d(ti,{Gv:function(){return jt},QR:function(){return Xe},bW:function(){return Ee},pJ:function(){return K}});var E=pe(41113);let ae=0;class xe{constructor(ee,ge,Ce){this.set=ee,this.base=ge,this.modified=Ce,this.id=ae++}static define(ee){if(ee!=null&&ee.base)throw new Error("Can not derive from a modified tag");let ge=new xe([],null,[]);if(ge.set.push(ge),ee)for(let Ce of ee.set)ge.set.push(Ce);return ge}static defineModifier(){let ee=new ce;return ge=>ge.modified.indexOf(ee)>-1?ge:ce.get(ge.base||ge,ge.modified.concat(ee).sort((Ce,Oe)=>Ce.id-Oe.id))}}let z=0;class ce{constructor(){this.instances=[],this.id=z++}static get(ee,ge){if(!ge.length)return ee;let Ce=ge[0].instances.find(Ye=>Ye.base==ee&&Ke(ge,Ye.modified));if(Ce)return Ce;let Oe=[],De=new xe(Oe,ee,ge);for(let Ye of ge)Ye.instances.push(De);let dt=Re(ge);for(let Ye of ee.set)if(!Ye.modified.length)for(let xt of dt)Oe.push(ce.get(Ye,xt));return De}}function Ke(Fe,ee){return Fe.length==ee.length&&Fe.every((ge,Ce)=>ge==ee[Ce])}function Re(Fe){let ee=[[]];for(let ge=0;ge<Fe.length;ge++)for(let Ce=0,Oe=ee.length;Ce<Oe;Ce++)ee.push(ee[Ce].concat(Fe[ge]));return ee.sort((ge,Ce)=>Ce.length-ge.length)}function jt(Fe){let ee=Object.create(null);for(let ge in Fe){let Ce=Fe[ge];Array.isArray(Ce)||(Ce=[Ce]);for(let Oe of ge.split(" "))if(Oe){let De=[],dt=2,Ye=Oe;for(let It=0;;){if(Ye=="..."&&It>0&&It+3==Oe.length){dt=1;break}let Et=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(Ye);if(!Et)throw new RangeError("Invalid path: "+Oe);if(De.push(Et[0]=="*"?"":Et[0][0]=='"'?JSON.parse(Et[0]):Et[0]),It+=Et[0].length,It==Oe.length)break;let Mt=Oe[It++];if(It==Oe.length&&Mt=="!"){dt=0;break}if(Mt!="/")throw new RangeError("Invalid path: "+Oe);Ye=Oe.slice(It)}let xt=De.length-1,pt=De[xt];if(!pt)throw new RangeError("Invalid path: "+Oe);let Rt=new nt(Ce,dt,xt>0?De.slice(0,xt):null);ee[pt]=Rt.sort(ee[pt])}}return it.add(ee)}const it=new E.md;class nt{constructor(ee,ge,Ce,Oe){this.tags=ee,this.mode=ge,this.context=Ce,this.next=Oe}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(ee){return!ee||ee.depth<this.depth?(this.next=ee,this):(ee.next=this.sort(ee.next),ee)}get depth(){return this.context?this.context.length:0}}nt.empty=new nt([],2,null);function Xe(Fe,ee){let ge=Object.create(null);for(let De of Fe)if(!Array.isArray(De.tag))ge[De.tag.id]=De.class;else for(let dt of De.tag)ge[dt.id]=De.class;let{scope:Ce,all:Oe=null}=ee||{};return{style:De=>{let dt=Oe;for(let Ye of De)for(let xt of Ye.set){let pt=ge[xt.id];if(pt){dt=dt?dt+" "+pt:pt;break}}return dt},scope:Ce}}function lt(Fe,ee){let ge=null;for(let Ce of Fe){let Oe=Ce.style(ee);Oe&&(ge=ge?ge+" "+Oe:Oe)}return ge}function Ee(Fe,ee,ge,Ce=0,Oe=Fe.length){let De=new vt(Ce,Array.isArray(ee)?ee:[ee],ge);De.highlightRange(Fe.cursor(),Ce,Oe,"",De.highlighters),De.flush(Oe)}function ct(Fe,ee,ge,Ce,Oe,De=0,dt=Fe.length){let Ye=De;function xt(pt,Rt){if(!(pt<=Ye)){for(let It=Fe.slice(Ye,pt),Et=0;;){let Mt=It.indexOf(`
`,Et),ii=Mt<0?It.length:Mt;if(ii>Et&&Ce(It.slice(Et,ii),Rt),Mt<0)break;Oe(),Et=Mt+1}Ye=pt}}Ee(ee,ge,(pt,Rt,It)=>{xt(pt,""),xt(Rt,It)},De,dt),xt(dt,"")}class vt{constructor(ee,ge,Ce){this.at=ee,this.highlighters=ge,this.span=Ce,this.class=""}startSpan(ee,ge){ge!=this.class&&(this.flush(ee),ee>this.at&&(this.at=ee),this.class=ge)}flush(ee){ee>this.at&&this.class&&this.span(this.at,ee,this.class)}highlightRange(ee,ge,Ce,Oe,De){let{type:dt,from:Ye,to:xt}=ee;if(Ye>=Ce||xt<=ge)return;dt.isTop&&(De=this.highlighters.filter(Mt=>!Mt.scope||Mt.scope(dt)));let pt=Oe,Rt=ft(ee)||nt.empty,It=lt(De,Rt.tags);if(It&&(pt&&(pt+=" "),pt+=It,Rt.mode==1&&(Oe+=(Oe?" ":"")+It)),this.startSpan(Math.max(ge,Ye),pt),Rt.opaque)return;let Et=ee.tree&&ee.tree.prop(E.md.mounted);if(Et&&Et.overlay){let Mt=ee.node.enter(Et.overlay[0].from+Ye,1),ii=this.highlighters.filter(oe=>!oe.scope||oe.scope(Et.tree.type)),oi=ee.firstChild();for(let oe=0,x=Ye;;oe++){let M=oe<Et.overlay.length?Et.overlay[oe]:null,F=M?M.from+Ye:xt,j=Math.max(ge,x),$=Math.min(Ce,F);if(j<$&&oi)for(;ee.from<$&&(this.highlightRange(ee,j,$,Oe,De),this.startSpan(Math.min($,ee.to),pt),!(ee.to>=F||!ee.nextSibling())););if(!M||F>Ce)break;x=M.to+Ye,x>ge&&(this.highlightRange(Mt.cursor(),Math.max(ge,M.from+Ye),Math.min(Ce,x),"",ii),this.startSpan(Math.min(Ce,x),pt))}oi&&ee.parent()}else if(ee.firstChild()){Et&&(Oe="");do if(!(ee.to<=ge)){if(ee.from>=Ce)break;this.highlightRange(ee,ge,Ce,Oe,De),this.startSpan(Math.min(Ce,ee.to),pt)}while(ee.nextSibling());ee.parent()}}}function ft(Fe){let ee=Fe.type.prop(it);for(;ee&&ee.context&&!Fe.matchContext(ee.context);)ee=ee.next;return ee||null}const ue=xe.define,kt=ue(),Ot=ue(),Qt=ue(Ot),Ut=ue(Ot),Pt=ue(),Dt=ue(Pt),Gt=ue(Pt),$t=ue(),at=ue($t),Le=ue(),He=ue(),Me=ue(),ke=ue(Me),Ne=ue(),K={comment:kt,lineComment:ue(kt),blockComment:ue(kt),docComment:ue(kt),name:Ot,variableName:ue(Ot),typeName:Qt,tagName:ue(Qt),propertyName:Ut,attributeName:ue(Ut),className:ue(Ot),labelName:ue(Ot),namespace:ue(Ot),macroName:ue(Ot),literal:Pt,string:Dt,docString:ue(Dt),character:ue(Dt),attributeValue:ue(Dt),number:Gt,integer:ue(Gt),float:ue(Gt),bool:ue(Pt),regexp:ue(Pt),escape:ue(Pt),color:ue(Pt),url:ue(Pt),keyword:Le,self:ue(Le),null:ue(Le),atom:ue(Le),unit:ue(Le),modifier:ue(Le),operatorKeyword:ue(Le),controlKeyword:ue(Le),definitionKeyword:ue(Le),moduleKeyword:ue(Le),operator:He,derefOperator:ue(He),arithmeticOperator:ue(He),logicOperator:ue(He),bitwiseOperator:ue(He),compareOperator:ue(He),updateOperator:ue(He),definitionOperator:ue(He),typeOperator:ue(He),controlOperator:ue(He),punctuation:Me,separator:ue(Me),bracket:ke,angleBracket:ue(ke),squareBracket:ue(ke),paren:ue(ke),brace:ue(ke),content:$t,heading:at,heading1:ue(at),heading2:ue(at),heading3:ue(at),heading4:ue(at),heading5:ue(at),heading6:ue(at),contentSeparator:ue($t),list:ue($t),quote:ue($t),emphasis:ue($t),strong:ue($t),link:ue($t),monospace:ue($t),strikethrough:ue($t),inserted:ue(),deleted:ue(),changed:ue(),invalid:ue(),meta:Ne,documentMeta:ue(Ne),annotation:ue(Ne),processingInstruction:ue(Ne),definition:xe.defineModifier(),constant:xe.defineModifier(),function:xe.defineModifier(),standard:xe.defineModifier(),local:xe.defineModifier(),special:xe.defineModifier()},$e=Xe([{tag:K.link,class:"tok-link"},{tag:K.heading,class:"tok-heading"},{tag:K.emphasis,class:"tok-emphasis"},{tag:K.strong,class:"tok-strong"},{tag:K.keyword,class:"tok-keyword"},{tag:K.atom,class:"tok-atom"},{tag:K.bool,class:"tok-bool"},{tag:K.url,class:"tok-url"},{tag:K.labelName,class:"tok-labelName"},{tag:K.inserted,class:"tok-inserted"},{tag:K.deleted,class:"tok-deleted"},{tag:K.literal,class:"tok-literal"},{tag:K.string,class:"tok-string"},{tag:K.number,class:"tok-number"},{tag:[K.regexp,K.escape,K.special(K.string)],class:"tok-string2"},{tag:K.variableName,class:"tok-variableName"},{tag:K.local(K.variableName),class:"tok-variableName tok-local"},{tag:K.definition(K.variableName),class:"tok-variableName tok-definition"},{tag:K.special(K.variableName),class:"tok-variableName2"},{tag:K.definition(K.propertyName),class:"tok-propertyName tok-definition"},{tag:K.typeName,class:"tok-typeName"},{tag:K.namespace,class:"tok-namespace"},{tag:K.className,class:"tok-className"},{tag:K.macroName,class:"tok-macroName"},{tag:K.propertyName,class:"tok-propertyName"},{tag:K.operator,class:"tok-operator"},{tag:K.comment,class:"tok-comment"},{tag:K.meta,class:"tok-meta"},{tag:K.invalid,class:"tok-invalid"},{tag:K.punctuation,class:"tok-punctuation"}])},28699:function(Di,ti,pe){pe.d(ti,{V:function(){return ce}});const E="\u037C",ae=typeof Symbol=="undefined"?"__"+E:Symbol.for(E),xe=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),z=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{};class ce{constructor(it,nt){this.rules=[];let{finish:Xe}=nt||{};function lt(ct){return/^@/.test(ct)?[ct]:ct.split(/,\s*/)}function Ee(ct,vt,ft,ue){let kt=[],Ot=/^@(\w+)\b/.exec(ct[0]),Qt=Ot&&Ot[1]=="keyframes";if(Ot&&vt==null)return ft.push(ct[0]+";");for(let Ut in vt){let Pt=vt[Ut];if(/&/.test(Ut))Ee(Ut.split(/,\s*/).map(Dt=>ct.map(Gt=>Dt.replace(/&/,Gt))).reduce((Dt,Gt)=>Dt.concat(Gt)),Pt,ft);else if(Pt&&typeof Pt=="object"){if(!Ot)throw new RangeError("The value of a property ("+Ut+") should be a primitive value.");Ee(lt(Ut),Pt,kt,Qt)}else Pt!=null&&kt.push(Ut.replace(/_.*/,"").replace(/[A-Z]/g,Dt=>"-"+Dt.toLowerCase())+": "+Pt+";")}(kt.length||Qt)&&ft.push((Xe&&!Ot&&!ue?ct.map(Xe):ct).join(", ")+" {"+kt.join(" ")+"}")}for(let ct in it)Ee(lt(ct),it[ct],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let it=z[ae]||1;return z[ae]=it+1,E+it.toString(36)}static mount(it,nt,Xe){let lt=it[xe],Ee=Xe&&Xe.nonce;lt?Ee&&lt.setNonce(Ee):lt=new Re(it,Ee),lt.mount(Array.isArray(nt)?nt:[nt],it)}}let Ke=new Map;class Re{constructor(it,nt){let Xe=it.ownerDocument||it,lt=Xe.defaultView;if(!it.head&&it.adoptedStyleSheets&&lt.CSSStyleSheet){let Ee=Ke.get(Xe);if(Ee)return it[xe]=Ee;this.sheet=new lt.CSSStyleSheet,Ke.set(Xe,this)}else this.styleTag=Xe.createElement("style"),nt&&this.styleTag.setAttribute("nonce",nt);this.modules=[],it[xe]=this}mount(it,nt){let Xe=this.sheet,lt=0,Ee=0;for(let ct=0;ct<it.length;ct++){let vt=it[ct],ft=this.modules.indexOf(vt);if(ft<Ee&&ft>-1&&(this.modules.splice(ft,1),Ee--,ft=-1),ft==-1){if(this.modules.splice(Ee++,0,vt),Xe)for(let ue=0;ue<vt.rules.length;ue++)Xe.insertRule(vt.rules[ue],lt++)}else{for(;Ee<ft;)lt+=this.modules[Ee++].rules.length;lt+=vt.rules.length,Ee++}}if(Xe)nt.adoptedStyleSheets.indexOf(this.sheet)<0&&(nt.adoptedStyleSheets=[this.sheet,...nt.adoptedStyleSheets]);else{let ct="";for(let ft=0;ft<this.modules.length;ft++)ct+=this.modules[ft].getRules()+`
`;this.styleTag.textContent=ct;let vt=nt.head||nt;this.styleTag.parentNode!=vt&&vt.insertBefore(this.styleTag,vt.firstChild)}}setNonce(it){this.styleTag&&this.styleTag.getAttribute("nonce")!=it&&this.styleTag.setAttribute("nonce",it)}}}}]);
